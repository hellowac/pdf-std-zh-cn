
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../s3/">
      
      
        <link rel="next" href="../s5/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>11.4 透明度组 - PDF STD</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#114-透明度组" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
你当前浏览的版本已不是最新版本，
<a href="../../../..">
    <strong>点击这里</strong>
</a>查看最新版本的文档

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="PDF STD" class="md-header__button md-logo" aria-label="PDF STD" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PDF STD
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              11.4 透明度组
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  首页

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c7/" class="md-tabs__link">
          
  
    
  
  7语法

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c8/" class="md-tabs__link">
          
  
    
  
  8图形绘制

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c9/" class="md-tabs__link">
          
  
    
  
  9文本

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c10/" class="md-tabs__link">
          
  
    
  
  10渲染

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  11透明度

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c12/" class="md-tabs__link">
          
  
    
  
  12互动功能

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c13/" class="md-tabs__link">
          
  
    
  
  13多媒体功能

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c14/" class="md-tabs__link">
          
  
    
  
  14文档交换

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../a1/" class="md-tabs__link">
          
  
    
  
  附录

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../bibliography/" class="md-tabs__link">
        
  
    
  
  参考文献

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="PDF STD" class="md-nav__button md-logo" aria-label="PDF STD" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    PDF STD
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    首页
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../c7/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    7语法
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../c8/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    8图形绘制
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../c9/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    9文本
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../c10/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    10渲染
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    11透明度
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            11透明度
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11.1 概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11.2 透明度概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11.3 基本合成计算
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    11.4 透明度组
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    11.4 透明度组
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1141-概述" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.1 概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1142-组合成计算的符号" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.2 组合成计算的符号
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1143-群体结构和命名法" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.3 群体结构和命名法
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1144-群组合成计算" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.4 群组合成计算
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1145-孤立团体" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.5 孤立团体
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1146-knockout-组" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.6 Knockout 组
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1147-page组" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.7 Page组
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1148-群组合成计算总结" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.8 群组合成计算总结
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11.5 软面罩
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11.6 指定 PDF 中的透明度
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11.7 色彩空间和渲染问题
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../c12/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    12互动功能
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../c13/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    13多媒体功能
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../c14/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    14文档交换
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../a1/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    附录
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bibliography/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    参考文献
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1141-概述" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.1 概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1142-组合成计算的符号" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.2 组合成计算的符号
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1143-群体结构和命名法" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.3 群体结构和命名法
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1144-群组合成计算" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.4 群组合成计算
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1145-孤立团体" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.5 孤立团体
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1146-knockout-组" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.6 Knockout 组
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1147-page组" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.7 Page组
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1148-群组合成计算总结" class="md-nav__link">
    <span class="md-ellipsis">
      11.4.8 群组合成计算总结
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="114-透明度组">11.4 透明度组<a class="headerlink" href="#114-透明度组" title="Permanent link">&para;</a></h1>
<p><strong>Transparency Groups</strong></p>
<h2 id="1141-概述">11.4.1 概述<a class="headerlink" href="#1141-概述" title="Permanent link">&para;</a></h2>
<p><strong>General</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">中文</label><label for="__tabbed_1_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>一个 <em>透明度组</em> 是透明度堆栈中一系列连续的对象，它们应当被收集在一起并合成，以在每个点产生单一的颜色、形状和不透明度。然后，该结果应被视为单个对象，以进行后续的合成操作。组可以嵌套在其他组内，从而形成树状结构的组层次。</p>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>这有助于创建独立的艺术作品，每个作品由多个对象组成，然后将它们组合在一起，并在组合过程中可能应用额外的透明度效果。</p>
</div>
<p>组内包含的对象应被视为一个独立的透明度堆栈，称为 <em>组堆栈</em>。堆栈中的对象应与初始背景（稍后讨论）进行合成，从而为整个组生成合成的颜色、形状和不透明度。其结果是一个对象，该对象的形状是其组成对象的形状的并集，而其颜色和不透明度则是合成操作的结果。然后，该对象应按照常规方式与组的背景进行合成。</p>
<p>除了计算出的颜色、形状和不透明度，整个组还可能具有以下几个额外属性：</p>
<ul>
<li>影响单个对象合成计算的所有输入变量，在将组与其背景合成时也可以应用。这些变量包括遮罩和常量形状、遮罩和常量不透明度，以及混合模式。</li>
<li>该组可以是 <em>隔离的</em> 或 <em>非隔离的</em>，这决定了其堆栈合成时所依据的初始背景。</li>
<li>该组可以是 <em>挖空的</em> 或 <em>非挖空的</em>，这决定了其堆栈中的对象是彼此合成，还是仅与组的背景进行合成。</li>
<li>一个隔离组可以指定其自身的混合颜色空间，而不依赖于组背景的颜色空间。</li>
<li>组的结果可以用作形状或不透明度值的来源，以创建 <em>软遮罩</em>（参见“<a href="../s5/">软遮罩</a>”），而不是直接合成到当前页面上。</li>
</ul>
</div>
<div class="tabbed-block">
<p>A <em>transparency group</em> is a sequence of consecutive objects in a transparency stack that shall be collected together and composited to produce a single colour, shape, and opacity at each point. The result shall then be treated as if it were a single object for subsequent compositing operations. Groups may be nested within other groups to form a tree-structured group hierarchy.</p>
<div class="admonition note">
<p class="admonition-title">NOTE</p>
<p>This facilitates creating independent pieces of artwork, each composed of multiple objects, and then combining them, possibly with additional transparency effects applied during the combination.</p>
</div>
<p>The objects contained within a group shall be treated as a separate transparency stack called the <em>group stack</em>. The objects in the stack shall be composited against an initial backdrop (discussed later), producing a composite colour, shape, and opacity for the group as a whole. The result is an object whose shape is the union of the shapes of its constituent objects and whose colour and opacity are the result of the compositing operations. This object shall then be composited with the group’s backdrop in the usual way.</p>
<p>In addition to its computed colour, shape, and opacity, the group as a whole may have several further attributes:</p>
<ul>
<li>All of the input variables that affect the compositing computation for individual objects may also be applied when compositing the group with its backdrop. These variables include mask and constant shape, mask and constant opacity, and blend mode.</li>
<li>The group may be <em>isolated</em> or <em>non-isolated</em>, which shall determine the initial backdrop against which its stack is composited.</li>
<li>The group may be <em>knockout</em> or <em>non-knockout</em>, which shall determine whether the objects within its stack are composited with one another or only with the group’s backdrop.</li>
<li>An isolated group may specify its own blending colour space, independent of that of the group’s backdrop.</li>
<li>Instead of being composited onto the current page, a group’s results may be used as a source of shape or opacity values for creating a <em>soft mask</em> (see “<a href="../s5/">Soft Masks</a>”).</li>
</ul>
</div>
</div>
</div>
<h2 id="1142-组合成计算的符号">11.4.2 组合成计算的符号<a class="headerlink" href="#1142-组合成计算的符号" title="Permanent link">&para;</a></h2>
<p><strong>Notation for Group Compositing Computations</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">中文</label><label for="__tabbed_2_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>本小节介绍了一些用于处理组合成的符号表示。后续小节将描述 <em>非隔离</em>、<em>非挖空</em> 组的组合公式，以及隔离组和挖空组的特殊属性。</p>
<p>由于现在需要同时处理多个对象，因此引入一些符号来区分它们是很有用的。为此，先前介绍的变量将被修改，以包含一个二级下标，用于表示对象在透明度堆栈中的位置。</p>
<p><span class="arithmatex">\(C_{s_i}\)</span> 代表堆栈中第 <em>i</em> 个对象的源颜色。下标 0 代表初始背景；下标 1 到 <em>n</em> 依次表示堆栈中从最底层到最顶层的 <em>n</em> 个对象。此外，变量 <span class="arithmatex">\(C_b\)</span>、<span class="arithmatex">\(f_β\)</span>、<span class="arithmatex">\(q_β\)</span>、<span class="arithmatex">\(α_β\)</span>、<span class="arithmatex">\(C_r\)</span>、<span class="arithmatex">\(f_ρ\)</span>、<span class="arithmatex">\(q_ρ\)</span> 和 <span class="arithmatex">\(α_ρ\)</span> 的下标 <em>b</em> 和 <em>r</em> 被省略；其他变量仍保留其助记下标。</p>
<p>这些约定使得合成公式可以被重新表述为堆栈元素之间的递推关系。例如，对象 <em>i</em> 的颜色合成计算结果表示为 <span class="arithmatex">\(C_i\)</span>（原先记作 <span class="arithmatex">\(C_r\)</span>）。该计算的输入之一是其直接的背景颜色，即对象 <em>i − 1</em> 的颜色合成计算结果，记作 <span class="arithmatex">\(C_{i − 1}\)</span>（原先记作 <span class="arithmatex">\(C_b\)</span>）。</p>
<p>对于一个简单的 <em>n</em> 元素堆栈（不包括任何组），修正后的公式如下，其中 <em>i = 1, … , n</em>：  </p>
<p><span class="arithmatex">\(\begin{align} 
  &amp;f_{s_i} = f_{j_i} \times f_{m_i} \times f_{k_i} \\
  &amp;q_{s_i} = q_{j_i} \times q_{m_i} \times q_{k_i} \\\\
  &amp;\alpha _{s_i} = f_{s_i} \times q_{s_i} \\
  &amp;\alpha _i = \text{Union}(\alpha _{i-1}, \alpha _{s_i})\\\\
  &amp;f_i = \text{Union}(f_{i-1}, f_{s_i}) \\
  &amp;q_i = \frac{\alpha _i}{\alpha _i} \\\\
  &amp;C_i = \left ( 1- \frac{\alpha _{s_i}}{\alpha _i} \right) \times C_{i-1} + \frac{\alpha _{s_i}}{\alpha _i} \times [(1-\alpha _{i-1}) \times C_{s_i} + \alpha _{i-1} \times B_i(C_{i-1}, C_{s_i})] 
\end{align}\)</span></p>
<p>其中变量的含义如表140所示。</p>
<div class="admonition note">
<p class="admonition-title">NOTE</p>
<p>将这些公式与<a href="../s3/#1138-基本合成计算总结">11.3.8</a>“基本合成计算摘要”中所示的公式进行比较。</p>
</div>
<p><table id="table140" markdown="span">
    <caption><strong>Table 140 – 修改基本合成公式的变量</strong></caption>
    <thead>
        <tr>
            <th><strong>变量</strong></th>
            <th><strong>意义</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="arithmatex">\(f_{s_i}\)</span></td>
            <td>对象 <em>i</em> 的源形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{j_i}\)</span></td>
            <td>对象 <em>i</em> 的对象形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{m_i}\)</span></td>
            <td>对象 <em>i</em> 的蒙版形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{k_i}\)</span></td>
            <td>对象 <em>i</em> 的常量形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_i\)</span></td>
            <td>合成对象 <em>i</em> 后的结果形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{s_i}\)</span></td>
            <td>对象 <em>i</em> 的源不透明度</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{j_i}\)</span></td>
            <td>对象 <em>i</em> 的对象不透明度</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{m_i}\)</span></td>
            <td>对象 <em>i</em> 的蒙版不透明度</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{k_i}\)</span></td>
            <td>对象 <em>i</em> 的常量不透明度</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_i\)</span></td>
            <td>合成对象 <em>i</em> 后的结果不透明度</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_{s_i}\)</span></td>
            <td>对象 <em>i</em> 的源 alpha</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_i\)</span></td>
            <td>合成对象 <em>i</em> 后的结果 alpha</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_{s_i}\)</span></td>
            <td>对象 <em>i</em> 的源颜色</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_i\)</span></td>
            <td>合成对象 <em>i</em> 后的结果颜色</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(B_i(C_{i-1}, C_{s_i})\)</span></td>
            <td>对象 <em>i</em> 的混合函数</td>
        </tr>
    </tbody>
</table></p>
</div>
<div class="tabbed-block">
<p>This sub-clause introduces some notation for dealing with group compositing. Subsequent sub-clauses describe the group compositing formulas for a non-isolated, non-knockout group and the special properties of isolated and knockout groups.</p>
<p>Since we are now dealing with multiple objects at a time, it is useful to have some notation for distinguishing among them. Accordingly, the variables introduced earlier are altered to include a second-level subscript denoting an object’s position in the transparency stack.</p>
<p><span class="arithmatex">\(C_{s_i}\)</span> stands for the source colour of the ith object in the stack. The subscript 0 represents the initial backdrop; subscripts 1 to n denote the bottommost to topmost objects in an n-element stack. In addition, the subscripts b and <em>r</em> are dropped from the variables <span class="arithmatex">\(C_b\)</span> , <span class="arithmatex">\(f_β\)</span> , <span class="arithmatex">\(q_β\)</span> , <span class="arithmatex">\(α_β\)</span> , <span class="arithmatex">\(C_r\)</span>, <span class="arithmatex">\(f_ρ\)</span> , <span class="arithmatex">\(q_ρ\)</span> , and <span class="arithmatex">\(α_ρ\)</span> ; other variables retain their mnemonic subscripts.</p>
<p>These conventions permit the compositing formulas to be restated as recurrence relations among the elements of a stack. For instance, the result of the colour compositing computation for object <em>i</em> is denoted by <span class="arithmatex">\(C_i\)</span> (formerly <span class="arithmatex">\(C_r\)</span> ). This computation takes as one of its inputs the immediate backdrop colour, which is the result of the colour compositing computation for object <em>i − 1</em>; this is denoted by <span class="arithmatex">\(C_{i − 1}\)</span> (formerly <span class="arithmatex">\(C_b\)</span> ).</p>
<p>The revised formulas for a simple n-element stack (not including any groups) shall be, for <em>i = 1, … , n</em>:</p>
<p><span class="arithmatex">\(\begin{align} 
  &amp;f_{s_i} = f_{j_i} \times f_{m_i} \times f_{k_i} \\
  &amp;q_{s_i} = q_{j_i} \times q_{m_i} \times q_{k_i} \\\\
  &amp;\alpha _{s_i} = f_{s_i} \times q_{s_i} \\
  &amp;\alpha _i = \text{Union}(\alpha _{i-1}, \alpha _{s_i})\\\\
  &amp;f_i = \text{Union}(f_{i-1}, f_{s_i}) \\
  &amp;q_i = \frac{\alpha _i}{\alpha _i} \\\\
  &amp;C_i = \left ( 1- \frac{\alpha _{s_i}}{\alpha _i} \right) \times C_{i-1} + \frac{\alpha _{s_i}}{\alpha _i} \times [(1-\alpha _{i-1}) \times C_{s_i} + \alpha _{i-1} \times B_i(C_{i-1}, C_{s_i})] 
\end{align}\)</span></p>
<p>where the variables have the meanings shown in Table 140.</p>
<div class="admonition note">
<p class="admonition-title">NOTE</p>
<p>Compare these formulas with those shown in <a href="../s3/#1138-基本合成计算总结">11.3.8</a>, "Summary of Basic Compositing Computations."</p>
</div>
<p><table id="table140" markdown="span">
    <caption><strong>Table 140 – Revised variables for the basic compositing formulas</strong></caption>
    <thead>
        <tr>
            <th><strong>Variable</strong></th>
            <th><strong>Meaning</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="arithmatex">\(f_{s_i}\)</span></td>
            <td>Source shape for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{j_i}\)</span></td>
            <td>Object shape for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{m_i}\)</span></td>
            <td>Mask shape for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{k_i}\)</span></td>
            <td>Constant shape for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_i\)</span></td>
            <td>Result shape after compositing object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{s_i}\)</span></td>
            <td>Source opacity for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{j_i}\)</span></td>
            <td>Object opacity for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{m_i}\)</span></td>
            <td>Mask opacity for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{k_i}\)</span></td>
            <td>Constant opacity for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_i\)</span></td>
            <td>Result opacity after compositing object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_{s_i}\)</span></td>
            <td>Source alpha for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_i\)</span></td>
            <td>Result alpha after compositing object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_{s_i}\)</span></td>
            <td>Source colour for object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_i\)</span></td>
            <td>Result colour after compositing object <em>i</em></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(B_i(C_{i-1}, C_{s_i})\)</span></td>
            <td>Blend function for object <em>i</em></td>
        </tr>
    </tbody>
</table></p>
</div>
</div>
</div>
<h2 id="1143-群体结构和命名法">11.4.3 群体结构和命名法<a class="headerlink" href="#1143-群体结构和命名法" title="Permanent link">&para;</a></h2>
<p><strong>Group Structure and Nomenclature</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">中文</label><label for="__tabbed_3_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>如前所述，组的元素应被视为单独的透明度堆栈，称为组堆栈。这些对象应与选定的初始背景合成，然后将生成的颜色、形状和不透明度视为属于单个对象。生成的对象又以通常的方式与组的背景合成。</p>
<div class="admonition note">
<p class="admonition-title">NOTE</p>
<p>此计算需要将堆栈解释为树。对于从堆栈中的位置 i 开始的 <em>n 元素</em> 组，它将接下来的 n 个对象视为 <em>n 元素</em> 子堆栈，其元素被赋予 1 到 <em>n</em> 的独立编号。然后从父（包含）堆栈中的对象编号中删除这些对象，并用编号为 i 的组对象替换，然后是要在组顶部绘制的其余对象，从 <em>i + 1</em> 开始重新编号。此操作以递归方式应用于任何嵌套子组。</p>
</div>
<p>术语“元素”（表示为 <span class="arithmatex">\(E_i\)</span> ）是指某个组的成员；它可以是单个对象，也可以是包含的子组。</p>
<p>从嵌套组中特定元素的角度来看，有三种不同的背景值得关注：</p>
<ul>
<li><em>组背景</em>是合成组中所有元素（但不包括第一个元素）的结果。（如果父组是淘汰组，则此定义会改变；请参阅 <a href="#1146-knockout-组">11.4.6</a>，“淘汰组”）</li>
<li><em>初始背景</em>是选择用于合成组的第一个元素的背景。这要么与组背景相同（对于非隔离组），要么是完全透明的背景（对于隔离组）。</li>
<li><em>直接背景</em>是合成组中所有元素（但不包括当前元素）的结果。</li>
</ul>
<p>当组中的所有元素都已合成后，结果应被视为该组是一个单一对象，然后应将其与组背景合成。无论为合成组元素而选择的初始背景是组背景还是透明背景，都应进行此操作。符合要求的读取器应确保背景对整体结果的贡献仅应用一次。</p>
</div>
<div class="tabbed-block">
<p>As stated earlier, the elements of a group shall be treated as a separate transparency stack, referred to as the group stack. These objects shall be composited against a selected initial backdrop and the resulting colour, shape, and opacity shall then be treated as if they belonged to a single object. The resulting object is in turn composited with the group’s backdrop in the usual way.</p>
<div class="admonition note">
<p class="admonition-title">NOTE</p>
<p>This computation entails interpreting the stack as a tree. For an <em>n-element</em> group that begins at position i in the stack, it treats the next n objects as an <em>n-element</em> substack, whose elements are given an independent numbering of 1 to <em>n</em>. These objects are then removed from the object numbering in the parent (containing) stack and replaced by the group object, numbered i, followed by the remaining objects to be painted on top of the group, renumbered starting at <em>i + 1</em>. This operation applies recursively to any nested subgroups.</p>
</div>
<p>The term <em>element</em> (denoted <span class="arithmatex">\(E_i\)</span> ) refers to a member of some group; it can be either an individual object or a contained subgroup.</p>
<p>From the perspective of a particular element in a nested group, there are three different backdrops of interest:</p>
<ul>
<li>The <em>group backdrop</em> is the result of compositing all elements up to but not including the first element in the group. (This definition is altered if the parent group is a knockout group; see <a href="#1146-knockout-组">11.4.6</a>, "Knockout Groups")</li>
<li>The <em>initial backdrop</em> is a backdrop that is selected for compositing the group’s first element. This is either the same as the group backdrop (for a non-isolated group) or a fully transparent backdrop (for an isolated group).</li>
<li>The <em>immediate backdrop</em> is the result of compositing all elements in the group up to but not including the current element.</li>
</ul>
<p>When all elements in a group have been composited, the result shall be treated as if the group were a single object, which shall then be composited with the group backdrop. This operation shall occur whether the initial backdrop chosen for compositing the elements of the group was the group backdrop or a transparent backdrop. A conforming reader shall ensure that the backdrop’s contribution to the overall result is applied only once.</p>
</div>
</div>
</div>
<h2 id="1144-群组合成计算">11.4.4 群组合成计算<a class="headerlink" href="#1144-群组合成计算" title="Permanent link">&para;</a></h2>
<p><strong>Group Compositing Computations</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">中文</label><label for="__tabbed_4_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>组的颜色和不透明度应由 <em>组合成函数</em> 定义：  </p>
<p><span class="arithmatex">\(&lt;C,f,\alpha&gt; = \text{Composite}(C_0, \alpha_0, G)\)</span></p>
<p>其中，各变量的含义如 <strong>表 141</strong> 所示。  </p>
<p><table id="table141" markdown="span">
    <caption><strong>表 141 – 组合成函数的参数与结果</strong></caption>
    <thead>
        <tr>
            <th><strong>变量</strong></th>
            <th><strong>含义</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="arithmatex">\(G\)</span></td>
            <td>透明度组：一个复合对象，由组内的所有元素 <span class="arithmatex">\(E_1, … , E_n\)</span> 组成，即 <em>n</em> 个组成对象的颜色、形状、不透明度和混合模式</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_0\)</span></td>
            <td>组背景的颜色</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C\)</span></td>
            <td>计算出的组颜色，当该组作为一个对象处理时，该颜色应作为源颜色</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f\)</span></td>
            <td>计算出的组形状，当该组作为一个对象处理时，该形状应作为对象形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_0\)</span></td>
            <td>组背景的 alpha 值</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha\)</span></td>
            <td>计算出的组 alpha 值，当该组作为一个对象处理时，该 alpha 值应作为对象的 alpha</td>
        </tr>
    </tbody>
</table></p>
<div class="admonition note">
<p class="admonition-title">注意 1</p>
<p>不透明度并未被明确作为该函数的参数或结果。几乎所有计算都使用形状与不透明度（alpha）的乘积，而非单独使用不透明度；因此，通常直接使用形状和 alpha 比单独使用形状和不透明度更方便。当需要计算不透明度时，可以通过 alpha 除以相应的形状得到。</p>
</div>
<p>应用组合成函数的结果应被视为单个对象，然后按照本小节定义的公式，与组的背景进行合成。在这些公式中，组合成函数计算出的颜色、形状和 alpha（<span class="arithmatex">\(C, f, \alpha\)</span>）应分别用作源颜色 <span class="arithmatex">\(C_s\)</span>、对象形状 <span class="arithmatex">\(f_j\)</span> 和对象 alpha 值 <span class="arithmatex">\(α_j\)</span>。</p>
<p>非隔离、非挖空组的组合成公式定义如下：</p>
<ul>
<li>
<p>初始化：</p>
<p><span class="arithmatex">\(f_{g_0} = \alpha_{g_0} = 0.0\)</span></p>
</li>
<li>
<p>对于组中的每个元素 <span class="arithmatex">\(E_i \in G\)</span>（<span class="arithmatex">\(i = 1, \dots, n\)</span>）：</p>
<p><span class="arithmatex">\(&lt;C_{s_i}, f_{j_i}, \alpha_{j_i}&gt; = \begin{cases}
    \text{合成}(C_{i-1}, \alpha _{i-1}, E_i)  &amp; \text{ 如果 } E_i \text{ 是一个组} \\
    \text{的固有颜色、形状和 }(\text{形状} \times \text{不透明度}) \text{ of } E_i &amp; \text{ 否则 }
\end{cases}\)</span></p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; f_{s_i} = f_{j_i} \times f_{m_i} \times f_{k_i} \\
  &amp; \alpha _{s_i} = \alpha _{j_i} \times (f_{m_i} \times q_{m_i}) \times (f_{k_i} \times q_{k_i})\\\\
  &amp; f_{g_i} = \text{Union}(f_{g_{i-1}}, f_{s_i}) \\
  &amp; \alpha _{g_i} = \text{Union}(\alpha _{g_{i-1}}, \alpha _{s_i})\\
  &amp; \alpha _i = \text{Union}(\alpha _0, \alpha _{g_i}) \\\\
  &amp; C_i = \left ( 1 - \frac{\alpha _{s_i}}{\alpha _i} \right ) \times C_{i-1} + \frac{\alpha _{s_i}}{\alpha _i} \times ((1- \alpha _{i-1}) \times C_{s_i} + \alpha _{i-1} \times B_i(C_{i-1}, C_{s_i}))
\end{align}\)</span></p>
</li>
<li>
<p>结果：</p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; C = C_n + (C_n - C_0) \times \left( \frac{\alpha _0}{\alpha _{g_n}} - \alpha _0 \right) \\
  &amp; f = f_{g_n} \\
  &amp; \alpha = \alpha _{g_n}
\end{align}\)</span></p>
</li>
</ul>
<p>其中各变量的含义如表 142 所示（另外还包括表 141 中的内容）。</p>
<p>对于作为基本对象的元素 <span class="arithmatex">\(E_i\)</span>，颜色、形状和不透明度值 <span class="arithmatex">\(C_{s_i}\)</span>、<span class="arithmatex">\(f_{j_i}\)</span> 和 <span class="arithmatex">\(α_{j_i}\)</span> 是该对象的固有属性。对于作为组的元素，组合成函数应递归应用于子组，并且应将得到的 <span class="arithmatex">\(C\)</span>、<span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(α\)</span> 值用于其在父组计算中的 <span class="arithmatex">\(C_{s_i}\)</span>、<span class="arithmatex">\(f_{j_i}\)</span> 和 <span class="arithmatex">\(α_{j_i}\)</span> 。</p>
<p><table id="table142" markdown="span">
    <caption><strong>表 142 – 组合成公式中使用的变量</strong></caption>
    <thead>
        <tr>
            <th><strong>变量</strong></th>
            <th><strong>含义</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="arithmatex">\(E_i\)</span></td>
            <td>组中的元素 <em>i</em>：表示元素颜色、形状、不透明度和混合模式的复合变量</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{s_i}\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的源形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{j_i}\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的对象形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{m_i}\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的蒙版形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{k_i}\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的常量形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{g_i}\)</span></td>
            <td>组形状：组元素 <span class="arithmatex">\(E_1\)</span> 至 <span class="arithmatex">\(E_i\)</span> 的累积源形状，不包括初始背景</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{m_i}\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的蒙版不透明度</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{k_i}\)</span></td>
            <td>元素的常量不透明度<span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_{s_i}\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的源不透明度</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_{j_i}\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的对象 alpha：其对象形状和对象不透明度的乘积</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_{g_i}\)</span></td>
            <td>组 alpha：组元素 <span class="arithmatex">\(E_1\)</span> 至 <span class="arithmatex">\(E_i\)</span> 的累积源 alpha，不包括初始背景</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_i\)</span></td>
            <td>合成元素 <span class="arithmatex">\(E_i\)</span> 后的累积 alpha，包括初始背景</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_{s_i}\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的源颜色</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_i\)</span></td>
            <td>合成元素 <span class="arithmatex">\(E_i\)</span> 后的累积颜色，包括初始背景</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(B_i(C_{i-1}, C_{s_i})\)</span></td>
            <td>元素 <span class="arithmatex">\(E_i\)</span> 的混合函数</td>
        </tr>
    </tbody>
</table></p>
<div class="admonition note">
<p class="admonition-title">NOTE 2</p>
<p>组的元素被合成到包含组初始背景的背景上。这样做是为了实现混合模式的正确效果，其中大部分效果都取决于背景和混合的源颜色。此功能是区分非隔离组和隔离组的关键，将在下一小节中讨论。</p>
</div>
<div class="admonition note">
<p class="admonition-title">NOTE 3</p>
<p>应特别注意末尾计算组合成函数的最终结果 C、f 和 α 的公式。本质上，这些公式从计算结果中去除了组背景的贡献。这确保当组随后与该背景合成时（可能具有额外的形状或不透明度输入或不同的混合模式），背景的贡献仅包含一次。</p>
<p>对于颜色，背景去除是通过显式计算完成的，其效果本质上与使用 <strong>Normal</strong> 混合模式合成相反。该公式是以下公式的简化，更直观地呈现了此操作：</p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; \varphi _b = \frac{(1 - \alpha_{g_n}) \times \alpha _0}{\text{Union}(\alpha _0, \alpha_{g_n}) } \\\\
  &amp; C = \frac{C_n - \varphi_b \times C_0}{1-\varphi _b} 
\end{align}\)</span></p>
<p>其中 <span class="arithmatex">\(φ_b\)</span> 是<em>背景分数</em>，即背景颜色对整体颜色的相对贡献。</p>
</div>
<div class="admonition note">
<p class="admonition-title">NOTE 4</p>
<p>对于形状和 alpha，背景移除是通过维护两组变量来保存累积值来实现的。无需计算包括背景贡献的相应完整形状 <span class="arithmatex">\(f_i\)</span> 。</p>
</div>
<p>组形状和 alpha，<span class="arithmatex">\(f_{g_i}\)</span> 和 <span class="arithmatex">\(\alpha _{g_i}\)</span> 应仅累积组元素的形状和 alpha，不包括组背景。它们的最终值将成为组合成函数返回的组结果。完整的 alpha，αi 也包括背景贡献；其值用于颜色合成计算。</p>
<div class="admonition note">
<p class="admonition-title">NOTE 5</p>
<p>经过这些修正后，如果满足以下条件，将对象合成为一个组的效果与单独合成（不分组）的效果相同：</p>
<p>该组是非隔离的，并且具有与其父组相同的淘汰属性（请参阅 <a href="#1145-孤立团体">11.4.5</a>，“隔离组”和“淘汰组”）。</p>
<p>将组的结果与组背景合成时，使用<strong>正常</strong>混合模式，形状和不透明度输入始终为 1.0。</p>
</div>
</div>
<div class="tabbed-block">
<p>The colour and opacity of a group shall be defined by the <em>group compositing function</em>:</p>
<p><span class="arithmatex">\(&lt;C,f,\alpha&gt; = \text{Composite}(C_0, \alpha_0, G)\)</span></p>
<p>where the variables have the meanings shown in Table 141.</p>
<p><table id="table141" markdown="span">
    <caption><strong>Table 141 – Arguments and results of the group compositing function</strong></caption>
    <thead>
        <tr>
            <th><strong>Variable</strong></th>
            <th><strong>Meaning</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="arithmatex">\(G\)</span></td>
            <td>The transparency group: a compound object consisting of all elements <span class="arithmatex">\(E_1, … , E_n\)</span> of the group—the <em>n</em> constituent objects’ colours, shapes, opacities, and blend modes</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_0\)</span></td>
            <td>Colour of the group’s backdrop</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C\)</span></td>
            <td>Computed colour of the group, which shall be used as the source colour when the group is treated as an object</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f\)</span></td>
            <td>Computed shape of the group, which shall be used as the object shape when the group is treated as an object</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_0\)</span></td>
            <td>Alpha of the group’s backdrop</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha\)</span></td>
            <td>Computed alpha of the group, which shall be used as the object alpha when the group is treated as an object</td>
        </tr>
    </tbody>
</table></p>
<div class="admonition note">
<p class="admonition-title">NOTE 1</p>
<p>The opacity is not given explicitly as an argument or result of this function. Almost all of the computations use the product of shape and opacity (alpha) rather than opacity alone; therefore, it is usually convenient to work directly with shape and alpha rather than shape and opacity. When needed, the opacity can be computed by dividing the alpha by the associated shape.</p>
</div>
<p>The result of applying the group compositing function shall then be treated as if it were a single object, which in turn is composited with the group’s backdrop according to the formulas defined in this sub-clause. In those formulas, the colour, shape, and alpha (C, f, and α) calculated by the group compositing function shall be used, respectively, as the source colour <span class="arithmatex">\(C_s\)</span> , the object shape <span class="arithmatex">\(f_j\)</span> , and the object alpha <span class="arithmatex">\(α_j\)</span> .</p>
<p>The group compositing formulas for a non-isolated, non-knockout group are defined as follows:</p>
<ul>
<li>
<p>Initialization:</p>
<p><span class="arithmatex">\(f_{g_0} = \alpha_{g_0} = 0.0\)</span></p>
</li>
<li>
<p>For each group element <span class="arithmatex">\(E_i \in G(i=1, \dots , n)\)</span>:</p>
<p><span class="arithmatex">\(&lt;C_{s_i}, f_{j_i}, \alpha_{j_i}&gt; = \begin{cases}
 \text{Composite}(C_{i-1}, \alpha _{i-1}, E_i)  &amp; \text{ if } E_i \text{ is a group} \\
 \text{intrinsic color, shape, and }(\text{shape} \times \text{opacity}) \text{ of } E_i &amp; \text{ otherwise }
\end{cases}\)</span></p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; f_{s_i} = f_{j_i} \times f_{m_i} \times f_{k_i} \\
  &amp; \alpha _{s_i} = \alpha _{j_i} \times (f_{m_i} \times q_{m_i}) \times (f_{k_i} \times q_{k_i})\\\\
  &amp; f_{g_i} = \text{Union}(f_{g_{i-1}}, f_{s_i}) \\
  &amp; \alpha _{g_i} = \text{Union}(\alpha _{g_{i-1}}, \alpha _{s_i})\\
  &amp; \alpha _i = \text{Union}(\alpha _0, \alpha _{g_i}) \\\\
  &amp; C_i = \left ( 1 - \frac{\alpha _{s_i}}{\alpha _i} \right ) \times C_{i-1} + \frac{\alpha _{s_i}}{\alpha _i} \times ((1- \alpha _{i-1}) \times C_{s_i} + \alpha _{i-1} \times B_i(C_{i-1}, C_{s_i}))
\end{align}\)</span></p>
</li>
<li>
<p>Result:</p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; C = C_n + (C_n - C_0) \times \left( \frac{\alpha _0}{\alpha _{g_n}} - \alpha _0 \right) \\
  &amp; f = f_{g_n} \\
  &amp; \alpha = \alpha _{g_n}
\end{align}\)</span></p>
</li>
</ul>
<p>where the variables have the meanings shown in Table 142 (in addition to those in Table 141).</p>
<p>For an element <span class="arithmatex">\(E_i\)</span> that is an elementary object, the colour, shape, and alpha values <span class="arithmatex">\(C_{s_i}\)</span> , <span class="arithmatex">\(f_{j_i}\)</span> , and <span class="arithmatex">\(α_{j_i}\)</span> are intrinsic
attributes of the object. For an element that is a group, the group compositing function shall be applied
recursively to the subgroup and the resulting C, f, and α values shall be used for its <span class="arithmatex">\(C_{s_i}\)</span> , <span class="arithmatex">\(f_{j_i}\)</span> , and <span class="arithmatex">\(α_{j_i}\)</span> in the
calculations for the parent group.</p>
<p><table id="table142" markdown="span">
    <caption><strong>Table 142 – Variables used in the group compositing formulas</strong></caption>
    <thead>
        <tr>
            <th><strong>Variable</strong></th>
            <th><strong>Meaning</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="arithmatex">\(E_i\)</span></td>
            <td>Element <em>i</em> of the group: a compound variable representing the element’s colour, shape, opacity, and blend mode</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{s_i}\)</span></td>
            <td>Source shape for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{j_i}\)</span></td>
            <td>Object shape for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{m_i}\)</span></td>
            <td>Mask shape for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{k_i}\)</span></td>
            <td>Constant shape for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_{g_i}\)</span></td>
            <td>Group shape: the accumulated source shapes of group elements <span class="arithmatex">\(E_1\)</span> to <span class="arithmatex">\(E_i\)</span> , excluding the initial backdrop</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{m_i}\)</span></td>
            <td>Mask opacity for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(q_{k_i}\)</span></td>
            <td>Constant opacity for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_{s_i}\)</span></td>
            <td>Source opacity for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_{j_i}\)</span></td>
            <td>Object alpha for element <span class="arithmatex">\(E_i\)</span> : the product of its object shape and object opacity</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_{g_i}\)</span></td>
            <td>Group alpha: the accumulated source alphas of group elements <span class="arithmatex">\(E_1\)</span> to <span class="arithmatex">\(E_i\)</span>, excluding the initial backdrop</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha_i\)</span></td>
            <td>Accumulated alpha after compositing element <span class="arithmatex">\(E_i\)</span>, including the initial backdrop</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_{s_i}\)</span></td>
            <td>Source colour for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_i\)</span></td>
            <td>Accumulated colour after compositing element <span class="arithmatex">\(E_i\)</span>, including the initial backdrop</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(B_i(C_{i-1}, C_{s_i})\)</span></td>
            <td>Blend function for element <span class="arithmatex">\(E_i\)</span></td>
        </tr>
    </tbody>
</table></p>
<div class="admonition note">
<p class="admonition-title">NOTE 2</p>
<p>The elements of a group are composited onto a backdrop that includes the group’s initial backdrop. This is done to achieve the correct effects of the blend modes, most of which are dependent on both the backdrop and source colours being blended. This feature is what distinguishes non-isolated groups from isolated groups, discussed in the next sub-clause.</p>
</div>
<div class="admonition note">
<p class="admonition-title">NOTE 3</p>
<p>Special attention should be directed to the formulas at the end that compute the final results C, f, and α, of the group compositing function. Essentially, these formulas remove the contribution of the group backdrop from the computed results. This ensures that when the group is subsequently composited with that backdrop (possibly with additional shape or opacity inputs or a different blend mode), the backdrop’s contribution is included only once.</p>
<p>For colour, the backdrop removal is accomplished by an explicit calculation, whose effect is essentially the reverse of compositing with the <strong>Normal</strong> blend mode. The formula is a simplification of the following formulas, which present this operation more intuitively:</p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; \varphi _b = \frac{(1 - \alpha_{g_n}) \times \alpha _0}{\text{Union}(\alpha _0, \alpha_{g_n}) } \\\\
  &amp; C = \frac{C_n - \varphi_b \times C_0}{1-\varphi _b} 
\end{align}\)</span></p>
<p>where <span class="arithmatex">\(φ_b\)</span> is the <em>backdrop fraction</em>, the relative contribution of the backdrop colour to the overall colour.</p>
</div>
<div class="admonition note">
<p class="admonition-title">NOTE 4</p>
<p>For shape and alpha, backdrop removal is accomplished by maintaining two sets of variables to hold the accumulated values. There is never any need to compute the corresponding complete shape, <span class="arithmatex">\(f_i\)</span> , that includes the backdrop contribution.</p>
</div>
<p>The group shape and alpha, <span class="arithmatex">\(f_{g_i}\)</span> and <span class="arithmatex">\(\alpha _{g_i}\)</span> , shall accumulate only the shape and alpha of the group elements, excluding the group backdrop. Their final values shall become the group results returned by the group compositing function. The complete alpha, αi , includes the backdrop contribution as well; its value is used in the colour compositing computations.</p>
<div class="admonition note">
<p class="admonition-title">NOTE 5</p>
<p>As a result of these corrections, the effect of compositing objects as a group is the same as that of compositing them separately (without grouping) if the following conditions hold:</p>
<p>The group is non-isolated and has the same knockout attribute as its parent group (see <a href="#1145-孤立团体">11.4.5</a>, "Isolated Groups," and “Knockout Groups”).</p>
<p>When compositing the group’s results with the group backdrop, the <strong>Normal</strong> blend mode is used, and the shape and opacity inputs are always 1.0.</p>
</div>
</div>
</div>
</div>
<h2 id="1145-孤立团体">11.4.5 孤立团体<a class="headerlink" href="#1145-孤立团体" title="Permanent link">&para;</a></h2>
<p><strong>Isolated Groups</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">中文</label><label for="__tabbed_5_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><em>隔离组</em> 是指其元素应合成为完全透明的初始背景，而不是组的背景。因此，组的最终源颜色、对象形状和对象不透明度应独立于组的背景。与组背景的唯一交互发生在将组计算出的颜色、形状和不透明度与其合成时。</p>
<p>特别是，组内对象的混合模式所产生的特殊效果仅考虑这些对象的固有颜色和不透明度；它们不应受组背景的影响。</p>
<div class="admonition info">
<p class="admonition-title">示例</p>
<p>在组中对某个对象应用 <strong>正片叠底</strong> 混合模式会对组堆栈中较低位置的其他对象产生变暗效果，但不会影响组的背景。</p>
<p>附录 L 中的图 L.17 展示了由四个重叠的浅灰色（C = M = Y = 0.0；K = 0.15）圆形组成的组的效果。这些圆形在组内以 <strong>正片叠底</strong> 混合模式绘制，不透明度为 1.0；组本身则以 <strong>正常</strong> 混合模式绘制到其背景上。在顶部行中，组是隔离的，因此不与彩虹背景交互。在底部行中，组是非隔离的，并与背景合成。该图还展示了隔离组和非隔离组之间的区别（见 “<a href="#1146-knockout-组">隔离组</a>”）。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注 1</p>
<p>从概念上讲，隔离组的效果可以通过一个简单对象来表示，该对象直接在每个点指定颜色、形状和不透明度。这种对隔离组的<em>扁平化</em>有时在应用程序中导入和导出完全合成的图稿时很有用。此外，指定显式混合颜色空间的组应为隔离组。</p>
</div>
<p>对于隔离组，组合成公式应通过在初始化时添加一条语句来修改：</p>
<p><span class="arithmatex">\(α_0 = 0.0\)</span>  如果组是隔离的</p>
<p>也就是说，组元素合成的初始背景应是透明的，而不是从组的背景继承而来。</p>
<div class="admonition note">
<p class="admonition-title">注 2</p>
<p>这种替换也使 <span class="arithmatex">\(C_0\)</span> 未定义，但正常的合成公式会处理这个问题。此外，C 的结果计算自动简化为 <span class="arithmatex">\(C = C_n\)</span> ，因为无需考虑背景的贡献 。</p>
</div>
</div>
<div class="tabbed-block">
<p>An <em>isolated group</em> is one whose elements shall be composited onto a fully transparent initial backdrop rather than onto the group’s backdrop. The resulting source colour, object shape, and object alpha for the group shall be therefore independent of the group backdrop. The only interaction with the group backdrop shall occur when the group’s computed colour, shape, and alpha are composited with it.</p>
<p>In particular, the special effects produced by the blend modes of objects within the group take into account only the intrinsic colours and opacities of those objects; they shall not be influenced by the group’s backdrop.</p>
<div class="admonition info">
<p class="admonition-title">EXAMPLE</p>
<p>Applying the <strong>Multiply</strong> blend mode to an object in the group produces a darkening effect on other objects lower in the group’s stack but not on the group’s backdrop.</p>
<p>Figure L.17 in Annex L illustrates this effect for a group consisting of four overlapping circles in a light gray colour(C = M = Y = 0.0; K = 0.15). The circles are painted within the group with opacity 1.0 in the <strong>Multiply</strong> blend mode; the group itself is painted against its backdrop in <strong>Normal</strong> blend mode. In the top row, the group is isolated and thus does not interact with the rainbow backdrop. In the bottom row, the group is non-isolated and composites with the backdrop. The figure also illustrates the difference between knockout and non-knockout groups (see “<a href="#1146-knockout-组">Knockout Groups</a>”).</p>
</div>
<div class="admonition note">
<p class="admonition-title">NOTE 1</p>
<p>Conceptually, the effect of an isolated group could be represented by a simple object that directly specifies a colour, shape, and opacity at each point. This <em>flattening</em> of an isolated group is sometimes useful for importing and exporting fully composited artwork in applications. Furthermore, a group that specifies an explicit blending colour space shall be an isolated group.</p>
</div>
<p>For an isolated group, the group compositing formulas shall be altered by adding one statement to the initialization:</p>
<p><span class="arithmatex">\(α_0 = 0.0\)</span>  if the group is isolated</p>
<p>That is, the initial backdrop on which the elements of the group are composited shall be transparent rather than inherited from the group’s backdrop.</p>
<div class="admonition note">
<p class="admonition-title">NOTE 2</p>
<p>This substitution also makes <span class="arithmatex">\(C_0\)</span> undefined, but the normal compositing formulas take care of that. Also, the result computation for C automatically simplifies to <span class="arithmatex">\(C = C_n\)</span> , since there is no backdrop contribution to be factored out.</p>
</div>
</div>
</div>
</div>
<h2 id="1146-knockout-组">11.4.6 Knockout 组<a class="headerlink" href="#1146-knockout-组" title="Permanent link">&para;</a></h2>
<p><strong>Knockout Groups</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">中文</label><label for="__tabbed_6_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>在挖空组中，每个单独的元素应与组的初始背景合成，而不是与该组中前面的元素堆叠合成。当对象具有二元形状（内部为 1.0，外部为 0.0）时，在同一组内，每个对象将覆盖（挖空）其重叠的任何前面元素的效果。在任何给定点，仅最上层包围该点的对象会对整个组的最终颜色和不透明度产生贡献。</p>
<div class="admonition info">
<p class="admonition-title">示例</p>
<p>关于 <a href="#1145-孤立团体">11.4.5</a>“隔离组”的[附件 L]中的图 L.17 阐述了挖空组与非挖空组之间的区别。在左列中，四个重叠的圆形被定义为挖空组，因此在该组内它们之间不会相互合成。在右列中，这些圆形形成一个非挖空组，因此它们之间会相互合成。在每一列中，上下两个图形分别表示隔离组和非隔离组。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注 1</p>
<p>这种模型类似于不透明成像模型，不同之处在于“最上层对象优先”规则同时适用于颜色和不透明度。挖空组在从一组重叠对象合成一幅图稿时很有用，在任何重叠部分，最上层的对象会完全遮挡下面的对象。同时，最上层的对象会以通常的方式与组的初始背景交互，适当应用其不透明度和混合模式。</p>
</div>
<p>挖空的概念被推广以适应分数形状值。在这种情况下，直接背景只会部分被挖空，并且仅用对象与初始背景合成的结果的一部分来替换。</p>
<p>重新表述的组合成公式通过引入一个新变量 b 来处理挖空组，b 是一个下标，用于指定在合成计算中使用哪个前面的结果作为背景：在挖空组中为 0，在非挖空组中为 i - 1。当 <span class="arithmatex">\(b = i - 1\)</span> 时，公式简化为 <a href="#1144-群组合成计算">11.4.4</a>“组合成计算”中给出的公式。</p>
<p>一般情况下，计算将分两个阶段进行：</p>
<p>a) 将源对象与组的初始背景合成，忽略对象的形状，并在所有地方使用源形状值 1.0。这将产生未归一化的临时不透明度和颜色结果，<span class="arithmatex">\(α_t\)</span> 和 <span class="arithmatex">\(C_t\)</span> 。</p>
<div class="admonition note">
<p class="admonition-title">注 2</p>
<p>对于颜色，此计算本质上与 <a href="../s3/#1136-alpha-的解释">11.3.6</a>“Alpha 的解释”中给出的未简化颜色合成公式相同，但使用源形状为 1.0。</p>
</div>
<p><span class="arithmatex">\(\begin{align} 
    &amp; \alpha _t = \text{并集}(\alpha_{g_b}, q_{s_i}) \\
    &amp; C_t = (1 - q_{s_i}) \times \alpha _b \times C_b + q_{s_i} \times ((1-\alpha _b) \times C_{s_i} + \alpha _b \times  B_i(C_b, S_{s_i})) 
\end{align}\)</span></p>
<p>b) 使用源形状作为加权因子，将此结果与对象的直接背景计算加权平均值。然后按结果不透明度对结果颜色进行归一化：</p>
<p><span class="arithmatex">\(\begin{align} 
    &amp; \alpha _{g_i} = (1 - f_{s_i}) \times \alpha _{g_{i-1}} + {f_{s_i}} \times \alpha_t \\
    &amp; \alpha_i = \text{并集}(\alpha_0, \alpha_{g_i}) \\
    &amp; C_i = \frac{(1 - f_{s_i}) \times \alpha_{i-1} \times C_{i-1} + f_{s_i} \times C_t}{\alpha _i}  
\end{align}\)</span></p>
<p>这种平均计算应同时针对颜色和不透明度进行。</p>
<div class="admonition note">
<p class="admonition-title">注 3</p>
<p>前面的公式直接展示了这种平均。 <a href="#1148-群组合成计算总结">11.4.8</a>“组合成计算总结”中的公式略有修改，使用源形状和不透明度而不是源形状和不透明度，避免了显式计算源不透明度值的需要。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注 4</p>
<p>组合成计算中的 <span class="arithmatex">\(C_t\)</span> 与前面的 <span class="arithmatex">\(C_t\)</span> 略有不同：它由 <span class="arithmatex">\(f_{s_i}\)</span> 预乘。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注 5</p>
<p>源形状的极值会产生直接的挖空效果。也就是说，形状值为 1.0（内部）会产生对象与初始背景合成的颜色和不透明度。形状值为 0.0（外部）会保留前一组的结果不变。</p>
</div>
<p>挖空功能的存在是保留单独形状值而不是仅使用结合形状和不透明度的单个不透明度的主要原因。在任何随后用作挖空组成员的组中，都应计算单独的形状值。</p>
<p>挖空组可以是隔离的或非隔离的；也就是说，隔离和挖空是独立的属性。非隔离挖空组将其最上层包围元素与组的背景合成。隔离挖空组将元素与透明背景合成。</p>
<div class="admonition note">
<p class="admonition-title">注 6</p>
<p>当非隔离组嵌套在挖空组内时，内部组的初始背景与外部组的初始背景相同；它不是内部组的直接背景。这种行为虽然可能出乎意料，但当 b = 0 时，这是组合成公式的结果 。</p>
</div>
</div>
<div class="tabbed-block">
<p>In a knockout group, each individual element shall be composited with the group’s initial backdrop rather than with the stack of preceding elements in the group. When objects have binary shapes (1.0 for inside, 0.0 for outside), each object shall overwrite (knocks out) the effects of any earlier elements it overlaps within the same group. At any given point, only the topmost object enclosing the point shall contribute to the result colour and opacity of the group as a whole.</p>
<div class="admonition info">
<p class="admonition-title">EXAMPLE</p>
<p>Figure L.17 in <a href="../../a12/">Annex L</a> about <a href="#1145-孤立团体">11.4.5</a>, "Isolated Groups," illustrates the difference between knockout and non-knockout groups. In the left column, the four overlapping circles are defined as a knockout group and therefore do not composite with each other within the group. In the right column, the circles form a non-knockout group and thus do composite with each other. In each column, the upper and lower figures depict an isolated and a non-isolated group, respectively.</p>
</div>
<div class="admonition note">
<p class="admonition-title">NOTE 1</p>
<p>This model is similar to the opaque imaging model, except that the “topmost object wins” rule applies to both the colour and the opacity. Knockout groups are useful in composing a piece of artwork from a collection of overlapping objects, where the topmost object in any overlap completely obscures those beneath. At the same time, the topmost object interacts with the group’s initial backdrop in the usual way, with its opacity and blend mode applied as appropriate.</p>
</div>
<p>The concept of knockout is generalized to accommodate fractional shape values. In that case, the immediate backdrop shall be only partially knocked out and shall be replaced by only a fraction of the result of compositing the object with the initial backdrop.</p>
<p>The restated group compositing formulas deal with knockout groups by introducing a new variable, b, which is a subscript that specifies which previous result to use as the backdrop in the compositing computations: 0 in a knockout group or i − 1 in a non-knockout group. When <span class="arithmatex">\(b = i − 1\)</span>, the formulas simplify to the ones given in <a href="#1144-群组合成计算">11.4.4</a>, "Group Compositing Computations."</p>
<p>In the general case, the computation shall proceed in two stages:</p>
<p>a) Composite the source object with the group’s initial backdrop, disregarding the object’s shape and using a source shape value of 1.0 everywhere. This produces unnormalized temporary alpha and colour results, <span class="arithmatex">\(α_t\)</span> and <span class="arithmatex">\(C_t\)</span> .</p>
<div class="admonition note">
<p class="admonition-title">NOTE 2</p>
<p>For colour, this computation is essentially the same as the unsimplified colour compositing formula given in <a href="../s3/#1136-alpha-的解释">11.3.6</a>, "Interpretation of Alpha," but using a source shape of 1.0.</p>
</div>
<p><span class="arithmatex">\(\begin{align} 
  &amp; \alpha _t = \text{Union}(\alpha_{g_b}, q_{s_i}) \\
  &amp; C_t = (1 - q_{s_i}) \times \alpha _b \times C_b + q_{s_i} \times ((1-\alpha _b) \times C_{s_i} + \alpha _b \times  B_i(C_b, S_{s_i})) 
\end{align}\)</span></p>
<p>b) Compute a weighted average of this result with the object’s immediate backdrop, using the source shape as the weighting factor. Then normalize the result colour by the result alpha:</p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; \alpha _{g_i} = (1 - f_{s_i}) \times \alpha _{g_{i-1}} + {f_{s_i}} \times \alpha_t \\
  &amp; \alpha_i = \text{Union}(\alpha_0, \alpha_{g_i}) \\
  &amp; C_i = \frac{(1 - f_{s_i}) \times \alpha_{i-1} \times C_{i-1} + f_{s_i} \times C_t}{\alpha _i}  
\end{align}\)</span></p>
<p>This averaging computation shall be performed for both colour and alpha.</p>
<div class="admonition note">
<p class="admonition-title">NOTE 3</p>
<p>The preceding formulas show this averaging directly. The formulas in <a href="#1148-群组合成计算总结">11.4.8</a>, "Summary of Group Compositing Computations," are slightly altered to use source shape and alpha rather than source shape and opacity, avoiding the need to compute a source opacity value explicitly.</p>
</div>
<div class="admonition note">
<p class="admonition-title">NOTE 4</p>
<p><span class="arithmatex">\(C_t\)</span> in Group Compositing Computations is slightly different from the preceding <span class="arithmatex">\(C_t\)</span>: it is premultiplied by <span class="arithmatex">\(f_{s_i}\)</span>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">NOTE 5</p>
<p>The extreme values of the source shape produce the straightforward knockout effect. That is, a shape value of 1.0 (inside) yields the colour and opacity that result from compositing the object with the initial backdrop. A shape value of 0.0 (outside) leaves the previous group results unchanged.</p>
</div>
<p>The existence of the knockout feature is the main reason for maintaining a separate shape value rather than only a single alpha that combines shape and opacity. The separate shape value shall be computed in any group that is subsequently used as an element of a knockout group.</p>
<p>A knockout group may be isolated or non-isolated; that is, isolated and knockout are independent attributes. A non-isolated knockout group composites its topmost enclosing element with the group’s backdrop. An isolated knockout group composites the element with a transparent backdrop.</p>
<div class="admonition note">
<p class="admonition-title">NOTE 6</p>
<p>When a non-isolated group is nested within a knockout group, the initial backdrop of the inner group is the same as that of the outer group; it is not the immediate backdrop of the inner group. This behaviour, although perhaps unexpected, is a consequence of the group compositing formulas when b = 0.</p>
</div>
</div>
</div>
</div>
<h2 id="1147-page组">11.4.7 Page组<a class="headerlink" href="#1147-page组" title="Permanent link">&para;</a></h2>
<p><strong>Page Group</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">中文</label><label for="__tabbed_7_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>页面上直接绘制的所有元素——包括顶级组和不属于任何组的顶级对象——都应视为包含在一个透明度组 P 中，该组随后将与依赖上下文的背景合成。这个组称为<em>页面组</em>。</p>
<p>页面组应以两种截然不同的方式之一进行处理：</p>
<ul>
<li>通常情况下，页面将直接输出到介质上，例如纸张或显示屏。页面组应被视为一个隔离组，其结果随后将与适合该介质的背景颜色合成。背景通常为白色，但会根据介质的实际属性有所不同。不过，一些符合标准的阅读器可能会选择提供不同的背景，例如棋盘格或网格，以帮助直观地查看图稿中的透明效果。</li>
<li>PDF 文件的“页面”可被视为用作其他文档某页面元素的图形对象。</li>
</ul>
<div class="admonition info">
<p class="admonition-title">示例</p>
<p>例如，当将包含由绘图程序制作的图稿的 PDF 文件放置到由排版程序生成的页面布局中时，就会出现这种情况。在这种情况下，PDF“页面”不会与介质颜色合成；相反，它被视为一个普通的透明度组，可以是隔离的或非隔离的，并以正常方式与其背景合成。</p>
</div>
<p>本小节的其余部分仅涉及页面组的第一种用途，即直接输出到介质上。</p>
<p>页面在给定点的颜色 C 应由通用组合成公式的简化形式定义：</p>
<p><span class="arithmatex">\(\begin{align} 
    \left \langle C_g,f_g,\alpha _g \right \rangle &amp;= \text{合成}(U, 0, P) \\
    C &amp;= (1 - \alpha _g) \times W + \alpha _g \times C_g
\end{align}\)</span></p>
<p>其中各变量的含义见表 143。第一个公式计算给定透明背景的组的颜色和不透明度——实际上是将 P 视为一个隔离组。第二个公式将结果与依赖上下文的背景合成（使用相当于<strong>正常</strong>混合模式的方式）。</p>
<p><table id="table143" markdown="span">
    <caption><strong>表 143 – 页面组合成公式中使用的变量</strong></caption>
    <thead>
        <tr>
            <th><strong>变量</strong></th>
            <th><strong>含义</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="arithmatex">\(P\)</span></td>
            <td>页面组，由页面顶级堆栈中的所有元素 <span class="arithmatex">\(E_1, … , E_n\)</span> 组成</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_g\)</span></td>
            <td>页面组的计算颜色</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_g\)</span></td>
            <td>页面组的计算形状</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha _g\)</span></td>
            <td>页面组的计算不透明度</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C\)</span></td>
            <td>页面的计算颜色</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(W\)</span></td>
            <td>页面的初始颜色（通常为白色，但可能根据介质的属性或应用程序的需求而有所不同）</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(U\)</span></td>
            <td>未定义的颜色（由于合成的 <span class="arithmatex">\(α_0\)</span> 参数为 0，因此不使用）</td>
        </tr>
    </tbody>
</table></p>
<p>如果未另行指定，页面组的颜色空间应从输出设备的本机颜色空间继承——即设备颜色空间，如<strong>DeviceRGB</strong>或<strong>DeviceCMYK</strong>。应指定明确的颜色空间，特别是基于 CIE 的空间，以确保页面组内合成计算的结果更具可预测性。在这种情况下，所有页面级合成都应在指定的颜色空间中进行，然后将整个结果转换为输出设备的本机颜色空间，再与依赖上下文的背景合成。</p>
<div class="admonition note">
<p class="admonition-title">注</p>
<p>当页面实际上并未被渲染，而是转换为不透明成像模型（如 PostScript）中的平面表示形式时，也会出现这种情况 。</p>
</div>
</div>
<div class="tabbed-block">
<p>All of the elements painted directly onto a page—both top-level groups and top-level objects that are not part of any group—shall be treated as if they were contained in a transparency group P, which in turn is composited with a context-dependent backdrop. This group is called the <em>page group</em>.</p>
<p>The page group shall be treated in one of two distinctly different ways:</p>
<ul>
<li>Ordinarily, the page shall be imposed directly on an output medium, such as paper or a display screen. The page group shall be treated as an isolated group, whose results shall then be composited with a backdrop colour appropriate for the medium. The backdrop is nominally white, although varying according to the actual properties of the medium. However, some conforming readers may choose to provide a different backdrop, such as a checker board or grid to aid in visualizing the effects of transparency in the artwork.</li>
<li>A “page” of a PDF file may be treated as a graphics object to be used as an element of a page of some other document.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">EXAMPLE</p>
<p>This case arises, for example, when placing a PDF file containing a piece of artwork produced by a drawing program into a page layout produced by a layout program. In this situation, the PDF “page” is not composited with the media colour; instead, it is treated as an ordinary transparency group, which can be either isolated or non-isolated and is composited with its backdrop in the normal way.</p>
</div>
<p>The remainder of this sub-clause pertains only to the first use of the page group, where it is to be imposed directly on the medium.</p>
<p>The colour C of the page at a given point shall be defined by a simplification of the general group compositing formula:</p>
<p><span class="arithmatex">\(\begin{align} 
  \left \langle C_g,f_g,\alpha _g \right \rangle &amp;= \text{Composite}(U, 0, P) \\
  C &amp;= (1 - \alpha _g) \times W + \alpha _g \times C_g
\end{align}\)</span></p>
<p>where the variables have the meanings shown in Table 143. The first formula computes the colour and alpha for the group given a transparent backdrop—in effect, treating P as an isolated group. The second formula composites the results with the context-dependent backdrop (using the equivalent of the <strong>Normal</strong> blend mode).</p>
<p><table id="table143" markdown="span">
    <caption><strong>Table 143 – Variables used in the page group compositing formulas</strong></caption>
    <thead>
        <tr>
            <th><strong>Variable</strong></th>
            <th><strong>Meaning</strong></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="arithmatex">\(P\)</span></td>
            <td>The page group, consisting of all elements <span class="arithmatex">\(E_1, … , E_n\)</span> in the page’s top-level stack</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C_g\)</span></td>
            <td>Computed colour of the page group</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(f_g\)</span></td>
            <td>Computed shape of the page group</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(\alpha _g\)</span></td>
            <td>Computed alpha of the page group</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(C\)</span></td>
            <td>Computed colour of the page</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(W\)</span></td>
            <td>Initial colour of the page (nominally white but may vary depending on the properties of the medium or the needs of the application)</td>
        </tr>
        <tr>
            <td><span class="arithmatex">\(U\)</span></td>
            <td>An undefined colour (which is not used, since the <span class="arithmatex">\(α_0\)</span> argument of Composite is 0)</td>
        </tr>
    </tbody>
</table></p>
<p>If not otherwise specified, the page group’s colour space shall be inherited from the native colour space of the output device—that is, a device colour space, such as <strong>DeviceRGB</strong> or <strong>DeviceCMYK</strong>. An explicit colour space should be specified, particularly a CIE-based space, to ensure more predictable results of the compositing computations within the page group. In this case, all page-level compositing shall be done in the specified colour space, and the entire result shall then be converted to the native colour space of the output device before being composited with the context-dependent backdrop.</p>
<div class="admonition note">
<p class="admonition-title">NOTE</p>
<p>This case also arises when the page is not actually being rendered but is converted to a flattened representation in an opaque imaging model, such as PostScript.</p>
</div>
</div>
</div>
</div>
<h2 id="1148-群组合成计算总结">11.4.8 群组合成计算总结<a class="headerlink" href="#1148-群组合成计算总结" title="Permanent link">&para;</a></h2>
<p><strong>Summary of Group Compositing Computations</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">中文</label><label for="__tabbed_8_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>本小节是对组合成公式的重新阐述，同时也考虑了隔离组和挖空组。有关变量的含义，请参见<a href="#1144-群组合成计算">11.4.4</a>“组合成计算”中的表<a href="#table141">141</a>和表<a href="#table142">142</a>。</p>
<p><span class="arithmatex">\(\left \langle C,f,\alpha \right \rangle = \text{合成}(C_0, \alpha _0, G)\)</span></p>
<p>初始化：</p>
<p><span class="arithmatex">\(\begin{align} 
    &amp; f_{g_0} = \alpha _{g_0} = 0 \\
    &amp; \alpha _0 = 0 \qquad \qquad \text{如果组是隔离的} 
\end{align}\)</span></p>
<p>对于组中的每个元素 <span class="arithmatex">\(E_i \in G\)</span>（<span class="arithmatex">\(i = 1, … , n\)</span>）：</p>
<p><span class="arithmatex">\(b = \begin{cases}
    0 &amp; \text{如果组是挖空组} \\
    i - 1 &amp; \text{否则} 
\end{cases}\)</span></p>
<p><span class="arithmatex">\(\left \langle C_{s_i}, f_{j_i}, \alpha _{j_i} \right \rangle  = \begin{cases}
    \text{合成}(C_b, \alpha _b, E_i)  &amp; \text{如果 } E_i \text{ 是一个组}  \\
    E_i \text{ 的固有颜色、形状和 } (\text{形状} \times \text{不透明度})  &amp; \text{否则} 
\end{cases}\)</span></p>
<p><span class="arithmatex">\(\begin{align} 
    &amp; f_{s_i} = f_{j_i} \times f_{m_i} \times f_{k_i} \\
    &amp; \alpha _{s_i} = \alpha _{j_i} \times (f_{m_i} \times q_{m_i}) \times (f_{k_i} \times q_{k_i}) \\\\
    &amp; f_{g_i} = \text{并集}(f_{g_{i-1}}, f_{s_i}) \\
    &amp; \alpha _{g_i} = (1 - f_{s_i}) \times \alpha _{g_{i-1}} + (f_{s_i} - \alpha _{s_i}) \times \alpha _{g_b} + \alpha _s \\
    &amp; \alpha _{i} = \text{并集}(\alpha _0, \alpha _{g_i}) \\\\
    &amp; C_t = (f_{s_i} - \alpha _{s_i}) \times \alpha _b \times C_b + \alpha _{s_i} \times ((1 - \alpha _b) \times C_{s_i} + \alpha _b \times B_i(C_b, C_{s_i})) \\\\
    &amp; C_i = \frac{(1 - f_{s_i} \times \alpha _{i-1} \times C_{i-1}) + C_t}{\alpha _i} 
\end{align}\)</span></p>
<p>结果：</p>
<p><span class="arithmatex">\(\begin{align} 
    &amp; C = C_n + (C_n - C_0) \times \left ( \frac{\alpha _0}{\alpha _{g_n}} - \alpha _0  \right ) \\
    &amp; f = f_{g_n} \\
    &amp; \alpha = \alpha _{g_n}
\end{align}\)</span></p>
<div class="admonition note">
<p class="admonition-title">注</p>
<p>再次提醒，要记住这些公式是最通用形式。当某些形状和不透明度的来源不存在，或者不需要分别维护形状和不透明度时，这些公式可以显著简化。此外，在每种特定类型的组（隔离与否，挖空与否）中，这些公式的一些项会相互抵消或消失。高效的实现应使用简化后的派生公式 。</p>
</div>
</div>
<div class="tabbed-block">
<p>This sub-clause is a restatement of the group compositing formulas that also takes isolated groups and knockout groups into account. See Tables <a href="#table141">141</a> and <a href="#table142">142</a> in <a href="#1144-群组合成计算">11.4.4</a>, "Group Compositing Computations," for the meanings of the variables.</p>
<p><span class="arithmatex">\(\left \langle C,f,\alpha \right \rangle = \text{Composite}(C_0, \alpha _0, G)\)</span></p>
<p>Initialization:</p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; f_{g_0} = \alpha _{g_0} = 0 \\
  &amp; \alpha _0 = 0 \qquad \qquad \text{if the group is isolated} 
\end{align}\)</span></p>
<p>For each group element <span class="arithmatex">\(E_i \in G(i = 1, … , n)\)</span>:</p>
<p><span class="arithmatex">\(b = \begin{cases}
 0 &amp; \text{ if the group is knockout } \\
 i-1 &amp; \text{ otherwise } 
\end{cases}\)</span></p>
<p><span class="arithmatex">\(\left \langle C_{s_i}, f_{j_i}, \alpha _{j_i} \right \rangle  = \begin{cases}
 \text{Composite}(C_b, \alpha _b, E_i)  &amp; \text{ if } E_i \text{ is a group }  \\
 \text{ intrinsic color, shape, and } (\text{shape} \times \text{opacity} ) \text{ of } E_i   &amp; \text{ otherwise } 
\end{cases}\)</span></p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; f_{s_i} = f_{j_i} \times f_{m_i} \times f_{k_i} \\
  &amp; \alpha _{s_i} = \alpha _{j_i} \times (f_{m_i} \times q_{m_i}) \times (f_{k_i} \times q_{k_i}) \\\\
  &amp; f_{g_i} = \text{Union}(f_{g_{i-1}}, f_{s_i}) \\
  &amp; \alpha _{g_i} = (1 - f_{s_i}) \times \alpha _{g_{i-1}} + (f_{s_i} - \alpha _{s_i}) \times \alpha _{g_b} + \alpha _s \\
  &amp; \alpha _{i} = \text{Union}(\alpha _0, \alpha _{g_i}) \\\\
  &amp; C_t = (f_{s_i} - \alpha _{s_i}) \times \alpha _b \times C_b + \alpha _{s_i} \times ((1 - \alpha _b) \times C_{s_i} + \alpha _b \times B_i(C_b, C_{s_i})) \\\\
  &amp; C_i = \frac{(1 -f_{s_i} \times \alpha _{i-1} \times C_{i-1} + C_t)}{\alpha _i} 
\end{align}\)</span></p>
<p>Result:</p>
<p><span class="arithmatex">\(\begin{align} 
  &amp; C = C_n + (C_n - C_0) \times \left ( \frac{\alpha _0}{\alpha _{g_n}} - \alpha _0  \right ) \\
  &amp; f = f_{g_n} \\
  &amp; \alpha = \alpha _{g_n}
\end{align}\)</span></p>
<div class="admonition note">
<p class="admonition-title">NOTE</p>
<p>Once again, keep in mind that these formulas are in their most general form. They can be significantly simplified when some sources of shape and opacity are not present or when shape and opacity need not be maintained separately. Furthermore, in each specific type of group (isolated or not, knockout or not), some terms of these formulas cancel or drop out. An efficient implementation should use the simplified derived formulas.</p>
</div>
</div>
</div>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年3月6日</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年1月21日</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["header.autohide", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "content.tabs.link", "content.code.copy", "content.tooltips", "navigation.indexes", "navigation.prune", "navigation.instant"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>