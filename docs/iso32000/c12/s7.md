# 12.7 交互式表格

**12.7 Interactive Forms**

## 12.7.1 概述

**12.7.1 General**

=== "中文"

    An *interactive form* (PDF 1.2)—sometimes referred to as an *AcroForm*—is a collection of fields for gathering information interactively from the user. A PDF document may contain any number of fields appearing on any combination of pages, all of which make up a single, global interactive form spanning the entire document. Arbitrary subsets of these fields can be imported or exported from the document; see [12.7.5], “Form Actions.”
    
    !!! note "NOTE 1"
    
        Interactive forms should not be confused with form XObjects (see [8.10], “Form XObjects”). Despite the similarity of names, the two are different, unrelated types of objects.
    
    Each field in a document’s interactive form shall be defined by a field dictionary (see [12.7.3], “Field Dictionaries”). For purposes of definition and naming, the fields can be organized hierarchically and can inherit attributes from their ancestors in the field hierarchy. A field’s children in the hierarchy may also include widget annotations (see [12.5.6.19], “Widget Annotations”) that define its appearance on the page. A field that has children that are fields is called a non-terminal field. A field that does not have children that are fields is called a terminal field.
    
    A terminal field may have children that are widget annotations (see [12.5.6.19], “Widget Annotations“) that define its appearance on the page. As a convenience, when a field has only a single associated widget annotation, the contents of the field dictionary and the annotation dictionary ([12.5.2], “Annotation Dictionaries”) may be merged into a single dictionary containing entries that pertain to both a field and an annotation. (This presents no ambiguity, since the contents of the two kinds of dictionaries do not conflict.) If such an object defines an appearance stream, the appearance shall be consistent with the object’s current value as a field.
    
    !!! note "NOTE 2"
    
        Fields containing text whose contents are not known in advance may need to construct their appearance streams dynamically instead of defining them statically in an appearance dictionary; see [12.7.3.3], “Variable Text.”

=== "英文"

    An *interactive form* (PDF 1.2)—sometimes referred to as an *AcroForm*—is a collection of fields for gathering information interactively from the user. A PDF document may contain any number of fields appearing on any combination of pages, all of which make up a single, global interactive form spanning the entire document. Arbitrary subsets of these fields can be imported or exported from the document; see [12.7.5], “Form Actions.”
    
    !!! note "NOTE 1"
    
        Interactive forms should not be confused with form XObjects (see [8.10], “Form XObjects”). Despite the similarity of names, the two are different, unrelated types of objects.
    
    Each field in a document’s interactive form shall be defined by a field dictionary (see [12.7.3], “Field Dictionaries”). For purposes of definition and naming, the fields can be organized hierarchically and can inherit attributes from their ancestors in the field hierarchy. A field’s children in the hierarchy may also include widget annotations (see [12.5.6.19], “Widget Annotations”) that define its appearance on the page. A field that has children that are fields is called a non-terminal field. A field that does not have children that are fields is called a terminal field.
    
    A terminal field may have children that are widget annotations (see [12.5.6.19], “Widget Annotations“) that define its appearance on the page. As a convenience, when a field has only a single associated widget annotation, the contents of the field dictionary and the annotation dictionary ([12.5.2], “Annotation Dictionaries”) may be merged into a single dictionary containing entries that pertain to both a field and an annotation. (This presents no ambiguity, since the contents of the two kinds of dictionaries do not conflict.) If such an object defines an appearance stream, the appearance shall be consistent with the object’s current value as a field.
    
    !!! note "NOTE 2"
    
        Fields containing text whose contents are not known in advance may need to construct their appearance streams dynamically instead of defining them statically in an appearance dictionary; see [12.7.3.3], “Variable Text.”

## 12.7.2 交互式表格词典

**12.7.2 Interactive Form Dictionary**

=== "中文"

    The contents and properties of a document’s interactive form shall be defined by an interactive form dictionary that shall be referenced from the **AcroForm** entry in the document catalogue (see [7.7.2], “Document Catalog”). Table 218 shows the contents of this dictionary.
    
    
    <table id="table218" markdown="span">
        <caption>**Table 218 – Entries in the interactive form dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Required) An array of references to the document’s root fields (those with no ancestors in the field hierarchy).
                </td>
            </tr>
            <tr>
                <td>**NeedAppearances**</td>
                <td>boolean</td>
                <td>(Optional) A flag specifying whether to construct appearance streams and appearance dictionaries for all widget annotations in the document (see [12.7.3.3], “Variable Text”). Default value: **false**.
                </td>
            </tr>
            <tr>
                <td>**SigFlags**</td>
                <td>integer</td>
                <td>(Optional; PDF 1.3) A set of flags specifying various document-level characteristics related to signature fields (see [Table 219](#table219), and [12.7.4.5], “Signature Fields”). Default value: 0.
                </td>
            </tr>
            <tr>
                <td>**CO**</td>
                <td>array</td>
                <td>(Required if any fields in the document have additional-actions dictionaries containing a **C** entry; PDF 1.3) An array of indirect references to field dictionaries with calculation actions, defining the calculation order in which their values will be recalculated when the value of any field changes (see [12.6.3], “Trigger Events”).
                </td>
            </tr>
            <tr>
                <td>**DR**</td>
                <td>dictionary</td>
                <td>(Optional) A resource dictionary (see [7.8.3], “Resource Dictionaries”) containing default resources (such as fonts, patterns, or colour spaces) that shall be used by form field appearance streams. At a minimum, this dictionary shall contain a **Font** entry specifying the resource name and font dictionary of the default font for displaying text.
                </td>
            </tr>
            <tr>
                <td>**DA**</td>
                <td>string</td>
                <td>(Optional) A document-wide default value for the DA attribute of variable text fields (see [12.7.3.3], “Variable Text”).
                </td>
            </tr>
            <tr>
                <td>**Q**</td>
                <td>integer</td>
                <td>(Optional) A document-wide default value for the Q attribute of variable text fields (see [12.7.3.3], “Variable Text”).
                </td>
            </tr>
            <tr>
                <td>**XFA**</td>
                <td>stream or array</td>
                <td>(Optional; PDF 1.5) A stream or array containing an XFA resource, whose format shall be described by the Data Package (XDP) Specification. (see the [Bibliography](../bibliography.md)). <br/> The value of this entry shall be either a stream representing the entire contents of the XML Data Package or an array of text string and stream pairs representing the individual packets comprising the XML Data Package. <br/> See [12.7.8], “XFA Forms,” for more information.
                </td>
            </tr>
        </tbody>
    </table>
    
    The value of the interactive form dictionary’s **SigFlags** entry is an unsigned 32-bit integer containing flags specifying various document-level characteristics related to signature fields (see [12.7.4.5], “Signature Fields”). Bit positions within the flag word shall be numbered from 1 (low-order) to 32 (high-order). Table 219 shows the meanings of the flags; all undefined flag bits shall be reserved and shall be set to 0.
    
    
    <table id="table219" markdown="span">
        <caption>**Table 219 – Signature flags**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**1**</td>
                <td>SignaturesExist</td>
                <td>If set, the document contains at least one signature field. This flag allows a conforming reader to enable user interface items (such as menu items or pushbuttons) related to signature processing without having to scan the entire document for the presence of signature fields.
                </td>
            </tr>
            <tr>
                <td>**2**</td>
                <td>AppendOnly</td>
                <td>If set, the document contains signatures that may be invalidated if the file is saved (written) in a way that alters its previous contents, as opposed to an incremental update. Merely updating the file by appending new information to the end of the previous version is safe (see [H.7](../a8.md#h7-更新示例), “Updating Example”). Conforming readers may use this flag to inform a user requesting a full save that signatures will be invalidated and require explicit confirmation before continuing with the operation.
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    The contents and properties of a document’s interactive form shall be defined by an interactive form dictionary that shall be referenced from the **AcroForm** entry in the document catalogue (see [7.7.2], “Document Catalog”). Table 218 shows the contents of this dictionary.
    
    
    <table id="table218" markdown="span">
        <caption>**Table 218 – Entries in the interactive form dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Required) An array of references to the document’s root fields (those with no ancestors in the field hierarchy).
                </td>
            </tr>
            <tr>
                <td>**NeedAppearances**</td>
                <td>boolean</td>
                <td>(Optional) A flag specifying whether to construct appearance streams and appearance dictionaries for all widget annotations in the document (see [12.7.3.3], “Variable Text”). Default value: **false**.
                </td>
            </tr>
            <tr>
                <td>**SigFlags**</td>
                <td>integer</td>
                <td>(Optional; PDF 1.3) A set of flags specifying various document-level characteristics related to signature fields (see [Table 219](#table219), and [12.7.4.5], “Signature Fields”). Default value: 0.
                </td>
            </tr>
            <tr>
                <td>**CO**</td>
                <td>array</td>
                <td>(Required if any fields in the document have additional-actions dictionaries containing a **C** entry; PDF 1.3) An array of indirect references to field dictionaries with calculation actions, defining the calculation order in which their values will be recalculated when the value of any field changes (see [12.6.3], “Trigger Events”).
                </td>
            </tr>
            <tr>
                <td>**DR**</td>
                <td>dictionary</td>
                <td>(Optional) A resource dictionary (see [7.8.3], “Resource Dictionaries”) containing default resources (such as fonts, patterns, or colour spaces) that shall be used by form field appearance streams. At a minimum, this dictionary shall contain a **Font** entry specifying the resource name and font dictionary of the default font for displaying text.
                </td>
            </tr>
            <tr>
                <td>**DA**</td>
                <td>string</td>
                <td>(Optional) A document-wide default value for the DA attribute of variable text fields (see [12.7.3.3], “Variable Text”).
                </td>
            </tr>
            <tr>
                <td>**Q**</td>
                <td>integer</td>
                <td>(Optional) A document-wide default value for the Q attribute of variable text fields (see [12.7.3.3], “Variable Text”).
                </td>
            </tr>
            <tr>
                <td>**XFA**</td>
                <td>stream or array</td>
                <td>(Optional; PDF 1.5) A stream or array containing an XFA resource, whose format shall be described by the Data Package (XDP) Specification. (see the [Bibliography](../bibliography.md)). <br/> The value of this entry shall be either a stream representing the entire contents of the XML Data Package or an array of text string and stream pairs representing the individual packets comprising the XML Data Package. <br/> See [12.7.8], “XFA Forms,” for more information.
                </td>
            </tr>
        </tbody>
    </table>
    
    The value of the interactive form dictionary’s **SigFlags** entry is an unsigned 32-bit integer containing flags specifying various document-level characteristics related to signature fields (see [12.7.4.5], “Signature Fields”). Bit positions within the flag word shall be numbered from 1 (low-order) to 32 (high-order). Table 219 shows the meanings of the flags; all undefined flag bits shall be reserved and shall be set to 0.

    <table id="table219" markdown="span">
        <caption>**Table 219 – Signature flags**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**1**</td>
                <td>SignaturesExist</td>
                <td>If set, the document contains at least one signature field. This flag allows a conforming reader to enable user interface items (such as menu items or pushbuttons) related to signature processing without having to scan the entire document for the presence of signature fields.
                </td>
            </tr>
            <tr>
                <td>**2**</td>
                <td>AppendOnly</td>
                <td>If set, the document contains signatures that may be invalidated if the file is saved (written) in a way that alters its previous contents, as opposed to an incremental update. Merely updating the file by appending new information to the end of the previous version is safe (see [H.7](../a8.md#h7-更新示例), “Updating Example”). Conforming readers may use this flag to inform a user requesting a full save that signatures will be invalidated and require explicit confirmation before continuing with the operation.
                </td>
            </tr>
        </tbody>
    </table>

## 12.7.3 领域词典

**12.7.3 Field Dictionaries**

### 12.7.3.1 概述

**12.7.3.1 General**

=== "中文"

    Each field in a document’s interactive form shall be defined by a field dictionary, which shall be an indirect object. The field dictionaries may be organized hierarchically into one or more tree structures. Many field attributes are *inheritable*, meaning that if they are not explicitly specified for a given field, their values are taken from those of its parent in the field hierarchy. Such inheritable attributes shall be designated as such in the Tables 220 and 221. The designation (Required; inheritable) means that an attribute shall be defined for every field, whether explicitly in its own field dictionary or by inheritance from an ancestor in the hierarchy. Table 220 shows those entries that are common to all field dictionaries, regardless of type. Entries that pertain only to a particular type of field are described in the relevant sub-clauses in Table 220.
    
    
    <table id="table220" markdown="span">
        <caption>**Table 220 – Entries common to all field dictionaries**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**FT**</td>
                <td>name</td>
                <td>(Required for terminal fields; inheritable) The type of field that this dictionary describes: <br/>
                Btn &emsp; Button (see [12.7.4.2], “Button Fields”) <br/>
                Tx &emsp; Text (see [12.7.4.3], “Text Fields”) <br/>
                Ch &emsp; Choice (see [12.7.4.4], “Choice Fields”) <br/>
                Sig &emsp; (PDF 1.3) Signature (see [12.7.4.5], “Signature Fields”) <br/>
                This entry may be present in a non-terminal field (one whose descendants are fields) to provide an inheritable FT value. However, a non-terminal field does not logically have a type of its own; it is merely a container for inheritable attributes that are intended for descendant terminal fields of any type.
                </td>
            </tr>
            <tr>
                <td>**Parent**</td>
                <td>dictionary</td>
                <td>(Required if this field is the child of another in the field hierarchy; absent otherwise) The field that is the immediate parent of this one (the field, if any, whose **Kids** array includes this field). A field can have at most one parent; that is, it can be included in the **Kids** array of at most one other field.
                </td>
            </tr>
            <tr>
                <td>**Kids**</td>
                <td>array</td>
                <td>(Sometimes required, as described below) An array of indirect references to the immediate children of this field. <br/> In a non-terminal field, the **Kids** array shall refer to field dictionaries that are immediate descendants of this field. In a terminal field, the **Kids** array ordinarily shall refer to one or more separate widget annotations that are associated with this field. However, if there is only one associated widget annotation, and its contents have been merged into the field dictionary, **Kids** shall be omitted.
                </td>
            </tr>
            <tr>
                <td>**T**</td>
                <td>text string</td>
                <td>(Optional) The partial field name (see [12.7.3.2], “Field Names”).
                </td>
            </tr>
            <tr>
                <td>**TU**</td>
                <td>text string</td>
                <td>(Optional; PDF 1.3) An alternate field name that shall be used in place of the actual field name wherever the field shall be identified in the user interface (such as in error or status messages referring to the field). This text is also useful when extracting the document’s contents in support of accessibility to users with disabilities or for other purposes (see [14.9.3], “Alternate Descriptions”).
                </td>
            </tr>
            <tr>
                <td>**TM**</td>
                <td>text string</td>
                <td>(Optional; PDF 1.3) The mapping name that shall be used when exporting interactive form field data from the document.
                </td>
            </tr>
            <tr>
                <td>**Ff**</td>
                <td>integer</td>
                <td>(Optional; inheritable) A set of flags specifying various characteristics of the field (see [Table 221](#table221)). Default value: 0.
                </td>
            </tr>
            <tr>
                <td>**V**</td>
                <td>(various)</td>
                <td>(Optional; inheritable) The field’s value, whose format varies depending on the field type. See the descriptions of individual field types for further information.
                </td>
            </tr>
            <tr>
                <td>**DV**</td>
                <td>(various)</td>
                <td>(Optional; inheritable) The default value to which the field reverts when a reset-form action is executed (see [12.7.5.3], “Reset-Form Action”). The format of this value is the same as that of V.
                </td>
            </tr>
            <tr>
                <td>**AA**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.2) An additional-actions dictionary defining the field’s behaviour in response to various trigger events (see [12.6.3], “Trigger Events”). This entry has exactly the same meaning as the AA entry in an annotation dictionary (see [12.5.2], “Annotation Dictionaries”).
                </td>
            </tr>
        </tbody>
    </table>
    
    The value of the field dictionary’s **Ff** entry is an unsigned 32-bit integer containing flags specifying various characteristics of the field. Bit positions within the flag word shall be numbered from 1 (low-order) to 32 (high- order). The flags shown in Table 221 are common to all types of fields. Flags that apply only to specific field types are discussed in the sub-clauses describing those types. All undefined flag bits shall be reserved and shall be set to 0.
    
    
    <table id="table221" markdown="span">
        <caption>**Table 221 – Field flags common to all field types**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**1**</td>
                <td>ReadOnly</td>
                <td>If set, the user may not change the value of the field. Any associated widget annotations will not interact with the user; that is, they will not respond to mouse clicks or change their appearance in response to mouse motions. This flag is useful for fields whose values are computed or imported from a database.
                </td>
            </tr>
            <tr>
                <td>**2**</td>
                <td>Required</td>
                <td>If set, the field shall have a value at the time it is exported by a submit-form action (see [12.7.5.2], “Submit-Form Action”).
                </td>
            </tr>
            <tr>
                <td>**3**</td>
                <td>NoExport</td>
                <td>If set, the field shall not be exported by a submit-form action (see [12.7.5.2], “Submit-Form Action”).
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    Each field in a document’s interactive form shall be defined by a field dictionary, which shall be an indirect object. The field dictionaries may be organized hierarchically into one or more tree structures. Many field attributes are *inheritable*, meaning that if they are not explicitly specified for a given field, their values are taken from those of its parent in the field hierarchy. Such inheritable attributes shall be designated as such in the Tables 220 and 221. The designation (Required; inheritable) means that an attribute shall be defined for every field, whether explicitly in its own field dictionary or by inheritance from an ancestor in the hierarchy. Table 220 shows those entries that are common to all field dictionaries, regardless of type. Entries that pertain only to a particular type of field are described in the relevant sub-clauses in Table 220.
    
    
    <table id="table220" markdown="span">
        <caption>**Table 220 – Entries common to all field dictionaries**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**FT**</td>
                <td>name</td>
                <td>(Required for terminal fields; inheritable) The type of field that this dictionary describes: <br/>
                Btn &emsp; Button (see [12.7.4.2], “Button Fields”) <br/>
                Tx &emsp; Text (see [12.7.4.3], “Text Fields”) <br/>
                Ch &emsp; Choice (see [12.7.4.4], “Choice Fields”) <br/>
                Sig &emsp; (PDF 1.3) Signature (see [12.7.4.5], “Signature Fields”) <br/>
                This entry may be present in a non-terminal field (one whose descendants are fields) to provide an inheritable FT value. However, a non-terminal field does not logically have a type of its own; it is merely a container for inheritable attributes that are intended for descendant terminal fields of any type.
                </td>
            </tr>
            <tr>
                <td>**Parent**</td>
                <td>dictionary</td>
                <td>(Required if this field is the child of another in the field hierarchy; absent otherwise) The field that is the immediate parent of this one (the field, if any, whose **Kids** array includes this field). A field can have at most one parent; that is, it can be included in the **Kids** array of at most one other field.
                </td>
            </tr>
            <tr>
                <td>**Kids**</td>
                <td>array</td>
                <td>(Sometimes required, as described below) An array of indirect references to the immediate children of this field. <br/> In a non-terminal field, the **Kids** array shall refer to field dictionaries that are immediate descendants of this field. In a terminal field, the **Kids** array ordinarily shall refer to one or more separate widget annotations that are associated with this field. However, if there is only one associated widget annotation, and its contents have been merged into the field dictionary, **Kids** shall be omitted.
                </td>
            </tr>
            <tr>
                <td>**T**</td>
                <td>text string</td>
                <td>(Optional) The partial field name (see [12.7.3.2], “Field Names”).
                </td>
            </tr>
            <tr>
                <td>**TU**</td>
                <td>text string</td>
                <td>(Optional; PDF 1.3) An alternate field name that shall be used in place of the actual field name wherever the field shall be identified in the user interface (such as in error or status messages referring to the field). This text is also useful when extracting the document’s contents in support of accessibility to users with disabilities or for other purposes (see [14.9.3], “Alternate Descriptions”).
                </td>
            </tr>
            <tr>
                <td>**TM**</td>
                <td>text string</td>
                <td>(Optional; PDF 1.3) The mapping name that shall be used when exporting interactive form field data from the document.
                </td>
            </tr>
            <tr>
                <td>**Ff**</td>
                <td>integer</td>
                <td>(Optional; inheritable) A set of flags specifying various characteristics of the field (see [Table 221](#table221)). Default value: 0.
                </td>
            </tr>
            <tr>
                <td>**V**</td>
                <td>(various)</td>
                <td>(Optional; inheritable) The field’s value, whose format varies depending on the field type. See the descriptions of individual field types for further information.
                </td>
            </tr>
            <tr>
                <td>**DV**</td>
                <td>(various)</td>
                <td>(Optional; inheritable) The default value to which the field reverts when a reset-form action is executed (see [12.7.5.3], “Reset-Form Action”). The format of this value is the same as that of V.
                </td>
            </tr>
            <tr>
                <td>**AA**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.2) An additional-actions dictionary defining the field’s behaviour in response to various trigger events (see [12.6.3], “Trigger Events”). This entry has exactly the same meaning as the AA entry in an annotation dictionary (see [12.5.2], “Annotation Dictionaries”).
                </td>
            </tr>
        </tbody>
    </table>
    
    The value of the field dictionary’s **Ff** entry is an unsigned 32-bit integer containing flags specifying various characteristics of the field. Bit positions within the flag word shall be numbered from 1 (low-order) to 32 (high- order). The flags shown in Table 221 are common to all types of fields. Flags that apply only to specific field types are discussed in the sub-clauses describing those types. All undefined flag bits shall be reserved and shall be set to 0.
    
    
    <table id="table221" markdown="span">
        <caption>**Table 221 – Field flags common to all field types**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**1**</td>
                <td>ReadOnly</td>
                <td>If set, the user may not change the value of the field. Any associated widget annotations will not interact with the user; that is, they will not respond to mouse clicks or change their appearance in response to mouse motions. This flag is useful for fields whose values are computed or imported from a database.
                </td>
            </tr>
            <tr>
                <td>**2**</td>
                <td>Required</td>
                <td>If set, the field shall have a value at the time it is exported by a submit-form action (see [12.7.5.2], “Submit-Form Action”).
                </td>
            </tr>
            <tr>
                <td>**3**</td>
                <td>NoExport</td>
                <td>If set, the field shall not be exported by a submit-form action (see [12.7.5.2], “Submit-Form Action”).
                </td>
            </tr>
        </tbody>
    </table>

### 12.7.3.2 字段名称

**12.7.3.2 Field Names**

=== "中文"

    The T entry in the field dictionary (see [Table 220](#table220)) holds a text string defining the field’s *partial field name*. The *fully qualified field name* is not explicitly defined but shall be constructed from the partial field names of the field and all of its ancestors. For a field with no parent, the partial and fully qualified names are the same. For a field that is the child of another field, the fully qualified name shall be formed by appending the child field’s partial name to the parent’s fully qualified name, separated by a PERIOD (2Eh) as shown:
    
        parent’s_full_name . child’s_partial_name
    
    !!! info "EXAMPLE"
    
        If a field with the partial field name PersonalData has a child whose partial name is Address, which in turn has a child with the partial name ZipCode, the fully qualified name of this last field is
        
        PersonalData . Address . ZipCode
    
    Because the PERIOD is used as a separator for fully qualified names, a partial name shall not contain a PERIOD character. Thus, all fields descended from a common ancestor share the ancestor’s fully qualified field name as a common prefix in their own fully qualified names.
    
    It is possible for different field dictionaries to have the same fully qualified field name if they are descendants of a common ancestor with that name and have no partial field names (**T** entries) of their own. Such field dictionaries are different representations of the same underlying field; they should differ only in properties that specify their visual appearance. In particular, field dictionaries with the same fully qualified field name shall have the same field type (**FT**), value (**V**), and default value (**DV**).

=== "英文"

    The T entry in the field dictionary (see [Table 220](#table220)) holds a text string defining the field’s *partial field name*. The *fully qualified field name* is not explicitly defined but shall be constructed from the partial field names of the field and all of its ancestors. For a field with no parent, the partial and fully qualified names are the same. For a field that is the child of another field, the fully qualified name shall be formed by appending the child field’s partial name to the parent’s fully qualified name, separated by a PERIOD (2Eh) as shown:
    
        parent’s_full_name . child’s_partial_name
    
    !!! info "EXAMPLE"
    
        If a field with the partial field name PersonalData has a child whose partial name is Address, which in turn has a child with the partial name ZipCode, the fully qualified name of this last field is
        
        PersonalData . Address . ZipCode
    
    Because the PERIOD is used as a separator for fully qualified names, a partial name shall not contain a PERIOD character. Thus, all fields descended from a common ancestor share the ancestor’s fully qualified field name as a common prefix in their own fully qualified names.
    
    It is possible for different field dictionaries to have the same fully qualified field name if they are descendants of a common ancestor with that name and have no partial field names (**T** entries) of their own. Such field dictionaries are different representations of the same underlying field; they should differ only in properties that specify their visual appearance. In particular, field dictionaries with the same fully qualified field name shall have the same field type (**FT**), value (**V**), and default value (**DV**).


### 12.7.3.3 变量文本

**12.7.3.3 Variable Text**

=== "中文"

    When the contents and properties of a field are known in advance, its visual appearance can be specified by an appearance stream defined in the PDF file (see [12.5.5], “Appearance Streams,” and [12.5.6.19], “Widget Annotations”). In some cases, however, the field may contain text whose value is not known until viewing time.
    
    !!! note "NOTE"
    
        Examples include text fields to be filled in with text typed by the user from the keyboard, scrollable list boxes whose contents are determined interactively at the time the document is displayed and fields containing current dates or values calculated by a JavaScript.
    
    In such cases, the PDF document cannot provide a statically defined appearance stream for displaying the field. Instead, the conforming reader shall construct an appearance stream dynamically at viewing time. The dictionary entries shown in Table 222 provide general information about the field’s appearance that can be combined with the specific text it contains to construct an appearance stream.
    
    <table id="table222" markdown="span">
        <caption>**Table 222 – Additional entries common to all fields containing variable text**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**DA**</td>
                <td>string</td>
                <td>(Required; inheritable) The default appearance string containing a sequence of valid page-content graphics or text state operators that define such properties as the field’s text size and colour.
                </td>
            </tr>
            <tr>
                <td>**Q**</td>
                <td>integer</td>
                <td>(Optional; inheritable) A code specifying the form of quadding (justification) that shall be used in displaying the text: <br/>
                    0 &emsp; Left-justified <br/>
                    1 &emsp; Centered <br/>
                    2 &emsp; Right-justified <br/>
                    Default value: 0 (left-justified).
                </td>
            </tr>
            <tr>
                <td>**DS**</td>
                <td>text string</td>
                <td>(Optional; PDF 1.5) A default style string, as described in [12.7.3.4], “Rich Text Strings.”
                </td>
            </tr>
            <tr>
                <td>**RV**</td>
                <td>text string or text stream</td>
                <td>(Optional; PDF 1.5) A rich text string, as described in [12.7.3.4], “Rich Text Strings.”
                </td>
            </tr>
        </tbody>
    </table>
    
    The new appearance stream becomes the normal appearance (**N**) in the appearance dictionary associated with the field’s widget annotation (see [Table 168](./s5.md#table168)). (If the widget annotation has no appearance dictionary, the conforming reader shall create one and store it in the annotation dictionary’s **AP** entry.)
    
    In PDF 1.5, form fields that have the RichText flag set (see Table 226) specify formatting information as described in [12.7.3.4], “Rich Text Strings.” For these fields, the following conventions are not used, and the entire annotation appearance shall be regenerated each time the value is changed.
    
    For non-rich text fields, the appearance stream—which, like all appearance streams, is a form XObject—has the contents of its form dictionary initialized as follows:
    
    - The resource dictionary (**Resources**) shall be created using resources from the interactive form dictionary’s **DR** entry (see [Table 218](#table218)).
    - The lower-left corner of the bounding box (**BBox**) is set to coordinates (0, 0) in the form coordinate system. The box’s top and right coordinates are taken from the dimensions of the annotation rectangle (the **Rect** entry in the widget annotation dictionary).
    - All other entries in the appearance stream’s form dictionary are set to their default values (see [8.10], “Form XObjects”).
    
    !!! info "EXAMPLE"
    
        The appearance stream includes the following section of marked content, which represents the portion of the stream that draws the text:
    
        ```text
        /Tx BMC                                  % Begin marked content with tag Tx
        q                                        % Save graphics state
        … Any required graphics state changes, such as clipping …
        BT                                     % Begin text object
        … Default appearance string ( DA ) …
        … Text-positioning and text-showing operators to show the variable text …
        ET                                     % End text object
        Q                                     % Restore graphics state
        EMC                                     % End marked content
        ```
    
        The BMC (begin marked content) and **EMC** (end marked content) operators are discussed in [14.6], “Marked Content.” **q** (save graphics state) and **Q** (restore graphics state) are discussed in [8.4.4], “Graphics State Operators.” **BT** (begin text object) and **ET** (end text object) are discussed in [9.4], “Text Objects.” See Example 1 in [12.7.8], “XFA Forms” for an example.
    
    The default appearance string (**DA**) contains any graphics state or text state operators needed to establish the graphics state parameters, such as text size and colour, for displaying the field’s variable text. Only operators that are allowed within text objects shall occur in this string (see [Figure 9](../c8/s2.md)). At a minimum, the string shall include a **Tf** (text font) operator along with its two operands, font and size. The specified font value shall match a resource name in the **Font** entry of the default resource dictionary (referenced from the **DR** entry of the interactive form dictionary; see [Table 218](#table218)). A zero value for size means that the font shall be auto-sized: its size shall be computed as a function of the height of the annotation rectangle.
    
    The default appearance string shall contain at most one **Tm** (text matrix) operator. If this operator is present, the conforming reader shall replace the horizontal and vertical translation components with positioning values it determines to be appropriate, based on the field value, the quadding (**Q**) attribute, and any layout rules it employs. If the default appearance string contains no **Tm** operator, the viewer shall insert one in the appearance stream (with appropriate horizontal and vertical translation components) after the default appearance string and before the text-positioning and text-showing operators for the variable text.
    
    To update an existing appearance stream to reflect a new field value, the conforming reader shall first copy any needed resources from the document’s **DR** dictionary (see Table 218) into the stream’s **Resources** dictionary. (If the **DR** and **Resources** dictionaries contain resources with the same name, the one already in the **Resources** dictionary shall be left intact, not replaced with the corresponding value from the DR dictionary.) The conforming reader shall then replace the existing contents of the appearance stream from /Tx BMC to the matching EMC with the corresponding new contents as shown in Example 1 in "Check Boxes," [12.7.4], “Field Types.” (If the existing appearance stream contains no marked content with tag Tx, the new contents shall be appended to the end of the original stream.)

=== "英文"

    When the contents and properties of a field are known in advance, its visual appearance can be specified by an appearance stream defined in the PDF file (see [12.5.5], “Appearance Streams,” and [12.5.6.19], “Widget Annotations”). In some cases, however, the field may contain text whose value is not known until viewing time.
    
    !!! note "NOTE"
    
        Examples include text fields to be filled in with text typed by the user from the keyboard, scrollable list boxes whose contents are determined interactively at the time the document is displayed and fields containing current dates or values calculated by a JavaScript.
    
    In such cases, the PDF document cannot provide a statically defined appearance stream for displaying the field. Instead, the conforming reader shall construct an appearance stream dynamically at viewing time. The dictionary entries shown in Table 222 provide general information about the field’s appearance that can be combined with the specific text it contains to construct an appearance stream.
    
    <table id="table222" markdown="span">
        <caption>**Table 222 – Additional entries common to all fields containing variable text**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**DA**</td>
                <td>string</td>
                <td>(Required; inheritable) The default appearance string containing a sequence of valid page-content graphics or text state operators that define such properties as the field’s text size and colour.
                </td>
            </tr>
            <tr>
                <td>**Q**</td>
                <td>integer</td>
                <td>(Optional; inheritable) A code specifying the form of quadding (justification) that shall be used in displaying the text: <br/>
                    0 &emsp; Left-justified <br/>
                    1 &emsp; Centered <br/>
                    2 &emsp; Right-justified <br/>
                    Default value: 0 (left-justified).
                </td>
            </tr>
            <tr>
                <td>**DS**</td>
                <td>text string</td>
                <td>(Optional; PDF 1.5) A default style string, as described in [12.7.3.4], “Rich Text Strings.”
                </td>
            </tr>
            <tr>
                <td>**RV**</td>
                <td>text string or text stream</td>
                <td>(Optional; PDF 1.5) A rich text string, as described in [12.7.3.4], “Rich Text Strings.”
                </td>
            </tr>
        </tbody>
    </table>
    
    The new appearance stream becomes the normal appearance (**N**) in the appearance dictionary associated with the field’s widget annotation (see [Table 168](./s5.md#table168)). (If the widget annotation has no appearance dictionary, the conforming reader shall create one and store it in the annotation dictionary’s **AP** entry.)
    
    In PDF 1.5, form fields that have the RichText flag set (see Table 226) specify formatting information as described in [12.7.3.4], “Rich Text Strings.” For these fields, the following conventions are not used, and the entire annotation appearance shall be regenerated each time the value is changed.
    
    For non-rich text fields, the appearance stream—which, like all appearance streams, is a form XObject—has the contents of its form dictionary initialized as follows:
    
    - The resource dictionary (**Resources**) shall be created using resources from the interactive form dictionary’s **DR** entry (see [Table 218](#table218)).
    - The lower-left corner of the bounding box (**BBox**) is set to coordinates (0, 0) in the form coordinate system. The box’s top and right coordinates are taken from the dimensions of the annotation rectangle (the **Rect** entry in the widget annotation dictionary).
    - All other entries in the appearance stream’s form dictionary are set to their default values (see [8.10], “Form XObjects”).
    
    !!! info "EXAMPLE"
    
        The appearance stream includes the following section of marked content, which represents the portion of the stream that draws the text:
    
        ```text
        /Tx BMC                                  % Begin marked content with tag Tx
        q                                        % Save graphics state
        … Any required graphics state changes, such as clipping …
        BT                                     % Begin text object
        … Default appearance string ( DA ) …
        … Text-positioning and text-showing operators to show the variable text …
        ET                                     % End text object
        Q                                     % Restore graphics state
        EMC                                     % End marked content
        ```
    
        The BMC (begin marked content) and **EMC** (end marked content) operators are discussed in [14.6], “Marked Content.” **q** (save graphics state) and **Q** (restore graphics state) are discussed in [8.4.4], “Graphics State Operators.” **BT** (begin text object) and **ET** (end text object) are discussed in [9.4], “Text Objects.” See Example 1 in [12.7.8], “XFA Forms” for an example.
    
    The default appearance string (**DA**) contains any graphics state or text state operators needed to establish the graphics state parameters, such as text size and colour, for displaying the field’s variable text. Only operators that are allowed within text objects shall occur in this string (see [Figure 9](../c8/s2.md)). At a minimum, the string shall include a **Tf** (text font) operator along with its two operands, font and size. The specified font value shall match a resource name in the **Font** entry of the default resource dictionary (referenced from the **DR** entry of the interactive form dictionary; see [Table 218](#table218)). A zero value for size means that the font shall be auto-sized: its size shall be computed as a function of the height of the annotation rectangle.
    
    The default appearance string shall contain at most one **Tm** (text matrix) operator. If this operator is present, the conforming reader shall replace the horizontal and vertical translation components with positioning values it determines to be appropriate, based on the field value, the quadding (**Q**) attribute, and any layout rules it employs. If the default appearance string contains no **Tm** operator, the viewer shall insert one in the appearance stream (with appropriate horizontal and vertical translation components) after the default appearance string and before the text-positioning and text-showing operators for the variable text.
    
    To update an existing appearance stream to reflect a new field value, the conforming reader shall first copy any needed resources from the document’s **DR** dictionary (see Table 218) into the stream’s **Resources** dictionary. (If the **DR** and **Resources** dictionaries contain resources with the same name, the one already in the **Resources** dictionary shall be left intact, not replaced with the corresponding value from the DR dictionary.) The conforming reader shall then replace the existing contents of the appearance stream from /Tx BMC to the matching EMC with the corresponding new contents as shown in Example 1 in "Check Boxes," [12.7.4], “Field Types.” (If the existing appearance stream contains no marked content with tag Tx, the new contents shall be appended to the end of the original stream.)

### 12.7.3.4 富文本字符串

**12.7.3.4 Rich Text Strings**

=== "中文"

    Beginning with PDF 1.5, the text contents of variable text form fields, as well as markup annotations, may include formatting (style) information. These *rich text strings* are fully-formed XML documents that conform to the rich text conventions specified for the XML Forms Architecture (XFA) specification, which is itself a subset of the XHTML 1.0 specification, augmented with a restricted set of CSS2 style attributes (see the Bibliography for references to all these standards).
    
    [Table 223](#table223) lists the XHTML elements that may appear in rich text strings. The &lt;body&gt; element is the root element; its required attributes are listed in Table 224. Other elements (&lt;p&gt; and &lt;span&gt;) contain enclosed text that may take style attributes, which are listed in Table 225. These style attributes are CSS inline style property declarations of the form ***name:value***, with each declaration separated by a SEMICOLON (3Bh), as illustrated in the Example in "[Radio Buttons](#127424-单选按钮)," [12.7.4], “Field Types.”
    
    In PDF 1.6, PDF supports the rich text elements and attributes specified in the *XML Forms Architecture (XFA) Specification*, 2.2 (see [Bibliography](../bibliography.md)). These rich text elements and attributes are a superset of those described in [Table 223](#table223), [Table 224](#table224) and [Table 225](#table225). In PDF 1.7, PDF supports the rich text elements and attributes specified in the *XML Forms Architecture (XFA) Specification*, 2.4 (see [Bibliography](../bibliography.md)).
        
    <table id="table223" markdown="span">
        <caption>**Table 223 – XHTML elements used in rich text strings**</caption>
        <thead>
            <tr>
                <th>**element**</th>
                <th>**Description**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**&lt;body&gt;**</td>
                <td>The element at the root of the XML document. Table 224 lists the required attributes for this element.</td>
            </tr>
            <tr>
                <td>**&lt;p&gt;**</td>
                <td>Encloses text that shall be interpreted as a paragraph. It may take the style attributes listed in [Table 225](#table225).</td>
            </tr>
            <tr>
                <td>**&lt;i&gt;**</td>
                <td>Encloses text that shall be displayed in an italic font.</td>
            </tr>
            <tr>
                <td>**&lt;b&gt;**</td>
                <td>Encloses text that shall be displayed in a bold font.</td>
            </tr>
            <tr>
                <td>**&lt;span&gt;**</td>
                <td>Groups text solely for the purpose of applying styles (using the attributes in [Table 225](#table225)).</td>
            </tr>
        </tbody>
    </table>
        
    <table id="table224" markdown="span">
        <caption>**Table 224 – Attributes of the &lt;body&gt; element**</caption>
        <thead>
            <tr>
                <th>**Attribute**</th>
                <th>**Description**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**xmlns**</td>
                <td>The default namespaces for elements within the rich text string. Shall be xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0".</td>
            </tr>
            <tr>
                <td>**xfa:contentType**</td>
                <td>Shall be "text/html".</td>
            </tr>
            <tr>
                <td>**xfa:APIVersion**</td>
                <td>A string that identifies the software used to generate the rich text string. It shall be of the form software_name:software_version, where software_name identifies the software by name. It shall not contain spaces. <br/>
                software_version identifies the version of the software. It consists of a series of integers separated by decimal points. Each integer is a version number, the leftmost value being a major version number, with values to the right increasingly minor. When comparing strings, the versions shall be compared in order.
    
    !!! info "NOTE"
    
        “5.2” is less than “5.13” because 2 is less than 13; the string is not treated as a decimal number. When comparing strings with different numbers of sections, the string with fewer sections is implicitly padded on the right with sections containing “0” to make the number of sections equivalent.
                </td>
            </tr>
            <tr>
                <td>**xfa:spec**</td>
                <td>The version of the *XML Forms Architecture* (XFA) specification to which the rich text string complies. If the file being written conforms to PDF 1.5, then the rich text string shall conform to XFA 2.0, and this attribute shall be XFA 2.0; if the file being written conforms to PDF 1.6, then the rich text string shall conform to XFA 2.2, and this attribute shall be XFA 2.2; and if the file being written conforms to PDF 1.7, then the rich text string shall conform to XFA 2.4, and this attribute shall be XFA 2.4.</td>
            </tr>
        </tbody>
    </table>
        
    <table id="table225" markdown="span">
        <caption>**Table 225 – CSS2 style attributes used in rich text strings**</caption>
        <thead>
            <tr>
                <th>**Attribute**</th>
                <th>**Value**</th>
                <th>**Description**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**text-align**</td>
                <td>keyword</td>
                <td>Horizontal alignment. Possible values: left, right, and center.</td>
            </tr>
            <tr>
                <td>**vertical-align**</td>
                <td>decimal</td>
                <td>An amount by which to adjust the baseline of the enclosed text. A positive value indicates a superscript; a negative value indicates a subscript. The value is of the form &lt;decimal number&gt;pt, optionally preceded by a sign, and followed by “pt”. <br/>
                EXAMPLE &emsp;-3pt, 4pt.</td>
            </tr>
            <tr>
                <td>**font-size**</td>
                <td>decimal</td>
                <td>The font size of the enclosed text. The value is of the form &lt;decimal number&gt;pt.</td>
            </tr>
            <tr>
                <td>**font-style**</td>
                <td>keyword</td>
                <td>Specifies the font style of the enclosed text. Possible values: normal, italic.</td>
            </tr>
            <tr>
                <td>**font-weight**</td>
                <td>keyword</td>
                <td>The weight of the font for the enclosed text. Possible values: normal, bold, 100, 200, 300, 400, 500, 600, 700, 800, 900. <br/>
                normal is equivalent to 400, and bold is equivalent to 700.</td>
            </tr>
            <tr>
                <td>**font-family**</td>
                <td>list</td>
                <td>A font name or list of font names that shall be used to display the enclosed text. (If a list is provided, the first one containing glyphs for the specified text shall be used.)</td>
            </tr>
            <tr>
                <td>**font**</td>
                <td>list</td>
                <td>A shorthand CSS font property of the form font:&lt;font-style&gt; &lt;font-weight&gt; &lt;font-size&gt; &lt;font-family&gt;</td>
            </tr>
            <tr>
                <td>**color**</td>
                <td>RGB value</td>
                <td>The colour of the enclosed text. It can be in one of two forms: #rrggbb with a 2-digit hexadecimal value for each component rgb(rrr,ggg,bbb) with a decimal value for each component.<br/>
                Although the values specified by the color property are interpreted as sRGB values, they shall be transformed into values in a non-ICC based colour space when used to generate the annotation’s appearance.</td>
            </tr>
            <tr>
                <td>**text-decoration**</td>
                <td>keyword</td>
                <td>One of the following keywords: <br/>
                    underline: The enclosed text shall be underlined. <br/>
                    line-through: The enclosed text shall have a line drawn through it.<br/></td>
            </tr>
            <tr>
                <td>**font-stretch**</td>
                <td>keyword</td>
                <td>Specifies a normal, condensed or extended face from a font family. Supported values from narrowest to widest are ultra-condensed, extra-condensed, condensed, semi-condensed, normal, semi-expanded, expanded, extra-expanded, and ultra-expanded.</td>
            </tr>
        </tbody>
    </table>
    
    Rich text strings shall be specified by the **RV** entry of variable text form field dictionaries (see [Table 222](#table222)) and the **RC** entry of markup annotation dictionaries (see [Table 170](./s5.md#table170)). Rich text strings may be packaged as text streams (see [7.9.3], “Text Streams”). Form fields using rich text streams should also have the RichText flag set (see [Table 228](#table228)).
    
    A default style string shall be specified by the **DS** entry for free text annotations (see [Table 174](./s5.md#table174)) or variable text form fields (see [Table 222](#table222)). This string specifies the default values for style attributes, which shall be used for any style attributes that are not explicitly specified for the annotation or field. All attributes listed in [Table 225](#table225) are legal in the default style string. This string, in addition to the **RV** or **RC** entry, shall be used to generate the appearance.
    
    !!! note "NOTE 1"
    
        Markup annotations other than free text annotations (see [12.5.6.2], “Markup Annotations”) do not use a default style string because their appearances are implemented using platform controls requiring the conforming reader to pick an appropriate system font for display.
    
    When a form field or annotation contains rich text strings, the *flat text* (character data) of the string should also be preserved (in the **V** entry for form fields and the **Contents** entry for annotations). This enables older readers to read and edit the data (although with loss of formatting information). The **DA** entry should be written out as well when the file is saved.
    
    When a rich text string specifies font attributes, the conforming reader shall use font name selection as described in Section 15.3 of the CSS2 specification (see the Bibliography). Precedence should be given to the fonts in the default resources dictionary, as specified by the **DR** entry in [Table 218](#table218).
    
    !!! info "EXAMPLE"
    
        The following example illustrates the entries in a widget annotation dictionary for rich text. The DS entry specifies the default font. The RV entry contains two paragraphs of rich text: the first paragraph specifies bold and italic text in the default font; the second paragraph changes the font size.
    
        ```text
        /DS (font: 18pt Arial)          % Default style string using an abbreviated font
                                        % descriptor to specify 18pt text using an Arial font
        
        /RV (<?xml version="1.0"?><body xmlns="http://www.w3.org/1999/xtml"
               xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"
               xfa:contentType="text/html" xfa:APIVersion="Acrobat:8.0.0" xfa:spec="2.4">
               <p style="text-align:left">
                   <b>
                       <i>
                           Here is some bold italic text
                       </i>
                   </b>
               </p>
               <p style= "font-size:16pt">
               This text uses default text state parameters but changes the font size to 16.
            </p>
        </body> ) 
        ```

=== "英文"

    Beginning with PDF 1.5, the text contents of variable text form fields, as well as markup annotations, may include formatting (style) information. These *rich text strings* are fully-formed XML documents that conform to the rich text conventions specified for the XML Forms Architecture (XFA) specification, which is itself a subset of the XHTML 1.0 specification, augmented with a restricted set of CSS2 style attributes (see the Bibliography for references to all these standards).
    
    [Table 223](#table223) lists the XHTML elements that may appear in rich text strings. The &lt;body&gt; element is the root element; its required attributes are listed in Table 224. Other elements (&lt;p&gt; and &lt;span&gt;) contain enclosed text that may take style attributes, which are listed in Table 225. These style attributes are CSS inline style property declarations of the form ***name:value***, with each declaration separated by a SEMICOLON (3Bh), as illustrated in the Example in "[Radio Buttons](#127424-单选按钮)," [12.7.4], “Field Types.”
    
    In PDF 1.6, PDF supports the rich text elements and attributes specified in the *XML Forms Architecture (XFA) Specification*, 2.2 (see [Bibliography](../bibliography.md)). These rich text elements and attributes are a superset of those described in [Table 223](#table223), [Table 224](#table224) and [Table 225](#table225). In PDF 1.7, PDF supports the rich text elements and attributes specified in the *XML Forms Architecture (XFA) Specification*, 2.4 (see [Bibliography](../bibliography.md)).
        
    <table id="table223" markdown="span">
        <caption>**Table 223 – XHTML elements used in rich text strings**</caption>
        <thead>
            <tr>
                <th>**element**</th>
                <th>**Description**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**&lt;body&gt;**</td>
                <td>The element at the root of the XML document. Table 224 lists the required attributes for this element.</td>
            </tr>
            <tr>
                <td>**&lt;p&gt;**</td>
                <td>Encloses text that shall be interpreted as a paragraph. It may take the style attributes listed in [Table 225](#table225).</td>
            </tr>
            <tr>
                <td>**&lt;i&gt;**</td>
                <td>Encloses text that shall be displayed in an italic font.</td>
            </tr>
            <tr>
                <td>**&lt;b&gt;**</td>
                <td>Encloses text that shall be displayed in a bold font.</td>
            </tr>
            <tr>
                <td>**&lt;span&gt;**</td>
                <td>Groups text solely for the purpose of applying styles (using the attributes in [Table 225](#table225)).</td>
            </tr>
        </tbody>
    </table>
        
    <table id="table224" markdown="span">
        <caption>**Table 224 – Attributes of the &lt;body&gt; element**</caption>
        <thead>
            <tr>
                <th>**Attribute**</th>
                <th>**Description**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**xmlns**</td>
                <td>The default namespaces for elements within the rich text string. Shall be xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0".</td>
            </tr>
            <tr>
                <td>**xfa:contentType**</td>
                <td>Shall be "text/html".</td>
            </tr>
            <tr>
                <td>**xfa:APIVersion**</td>
                <td>A string that identifies the software used to generate the rich text string. It shall be of the form software_name:software_version, where software_name identifies the software by name. It shall not contain spaces. <br/>
                software_version identifies the version of the software. It consists of a series of integers separated by decimal points. Each integer is a version number, the leftmost value being a major version number, with values to the right increasingly minor. When comparing strings, the versions shall be compared in order.
    
    !!! info "NOTE"
    
        “5.2” is less than “5.13” because 2 is less than 13; the string is not treated as a decimal number. When comparing strings with different numbers of sections, the string with fewer sections is implicitly padded on the right with sections containing “0” to make the number of sections equivalent.
                </td>
            </tr>
            <tr>
                <td>**xfa:spec**</td>
                <td>The version of the *XML Forms Architecture* (XFA) specification to which the rich text string complies. If the file being written conforms to PDF 1.5, then the rich text string shall conform to XFA 2.0, and this attribute shall be XFA 2.0; if the file being written conforms to PDF 1.6, then the rich text string shall conform to XFA 2.2, and this attribute shall be XFA 2.2; and if the file being written conforms to PDF 1.7, then the rich text string shall conform to XFA 2.4, and this attribute shall be XFA 2.4.</td>
            </tr>
        </tbody>
    </table>
        
    <table id="table225" markdown="span">
        <caption>**Table 225 – CSS2 style attributes used in rich text strings**</caption>
        <thead>
            <tr>
                <th>**Attribute**</th>
                <th>**Value**</th>
                <th>**Description**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**text-align**</td>
                <td>keyword</td>
                <td>Horizontal alignment. Possible values: left, right, and center.</td>
            </tr>
            <tr>
                <td>**vertical-align**</td>
                <td>decimal</td>
                <td>An amount by which to adjust the baseline of the enclosed text. A positive value indicates a superscript; a negative value indicates a subscript. The value is of the form &lt;decimal number&gt;pt, optionally preceded by a sign, and followed by “pt”. <br/>
                EXAMPLE &emsp;-3pt, 4pt.</td>
            </tr>
            <tr>
                <td>**font-size**</td>
                <td>decimal</td>
                <td>The font size of the enclosed text. The value is of the form &lt;decimal number&gt;pt.</td>
            </tr>
            <tr>
                <td>**font-style**</td>
                <td>keyword</td>
                <td>Specifies the font style of the enclosed text. Possible values: normal, italic.</td>
            </tr>
            <tr>
                <td>**font-weight**</td>
                <td>keyword</td>
                <td>The weight of the font for the enclosed text. Possible values: normal, bold, 100, 200, 300, 400, 500, 600, 700, 800, 900. <br/>
                normal is equivalent to 400, and bold is equivalent to 700.</td>
            </tr>
            <tr>
                <td>**font-family**</td>
                <td>list</td>
                <td>A font name or list of font names that shall be used to display the enclosed text. (If a list is provided, the first one containing glyphs for the specified text shall be used.)</td>
            </tr>
            <tr>
                <td>**font**</td>
                <td>list</td>
                <td>A shorthand CSS font property of the form font:&lt;font-style&gt; &lt;font-weight&gt; &lt;font-size&gt; &lt;font-family&gt;</td>
            </tr>
            <tr>
                <td>**color**</td>
                <td>RGB value</td>
                <td>The colour of the enclosed text. It can be in one of two forms: #rrggbb with a 2-digit hexadecimal value for each component rgb(rrr,ggg,bbb) with a decimal value for each component.<br/>
                Although the values specified by the color property are interpreted as sRGB values, they shall be transformed into values in a non-ICC based colour space when used to generate the annotation’s appearance.</td>
            </tr>
            <tr>
                <td>**text-decoration**</td>
                <td>keyword</td>
                <td>One of the following keywords: <br/>
                    underline: The enclosed text shall be underlined. <br/>
                    line-through: The enclosed text shall have a line drawn through it.<br/></td>
            </tr>
            <tr>
                <td>**font-stretch**</td>
                <td>keyword</td>
                <td>Specifies a normal, condensed or extended face from a font family. Supported values from narrowest to widest are ultra-condensed, extra-condensed, condensed, semi-condensed, normal, semi-expanded, expanded, extra-expanded, and ultra-expanded.</td>
            </tr>
        </tbody>
    </table>
    
    Rich text strings shall be specified by the **RV** entry of variable text form field dictionaries (see [Table 222](#table222)) and the **RC** entry of markup annotation dictionaries (see [Table 170](./s5.md#table170)). Rich text strings may be packaged as text streams (see [7.9.3], “Text Streams”). Form fields using rich text streams should also have the RichText flag set (see [Table 228](#table228)).
    
    A default style string shall be specified by the **DS** entry for free text annotations (see [Table 174](./s5.md#table174)) or variable text form fields (see [Table 222](#table222)). This string specifies the default values for style attributes, which shall be used for any style attributes that are not explicitly specified for the annotation or field. All attributes listed in [Table 225](#table225) are legal in the default style string. This string, in addition to the **RV** or **RC** entry, shall be used to generate the appearance.
    
    !!! note "NOTE 1"
    
        Markup annotations other than free text annotations (see [12.5.6.2], “Markup Annotations”) do not use a default style string because their appearances are implemented using platform controls requiring the conforming reader to pick an appropriate system font for display.
    
    When a form field or annotation contains rich text strings, the *flat text* (character data) of the string should also be preserved (in the **V** entry for form fields and the **Contents** entry for annotations). This enables older readers to read and edit the data (although with loss of formatting information). The **DA** entry should be written out as well when the file is saved.
    
    When a rich text string specifies font attributes, the conforming reader shall use font name selection as described in Section 15.3 of the CSS2 specification (see the Bibliography). Precedence should be given to the fonts in the default resources dictionary, as specified by the **DR** entry in [Table 218](#table218).
    
    !!! info "EXAMPLE"
    
        The following example illustrates the entries in a widget annotation dictionary for rich text. The DS entry specifies the default font. The RV entry contains two paragraphs of rich text: the first paragraph specifies bold and italic text in the default font; the second paragraph changes the font size.
    
        ```text
        /DS (font: 18pt Arial)          % Default style string using an abbreviated font
                                        % descriptor to specify 18pt text using an Arial font
        
        /RV (<?xml version="1.0"?><body xmlns="http://www.w3.org/1999/xtml"
               xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"
               xfa:contentType="text/html" xfa:APIVersion="Acrobat:8.0.0" xfa:spec="2.4">
               <p style="text-align:left">
                   <b>
                       <i>
                           Here is some bold italic text
                       </i>
                   </b>
               </p>
               <p style= "font-size:16pt">
               This text uses default text state parameters but changes the font size to 16.
            </p>
        </body> ) 
        ```

## 12.7.4 字段类型

**12.7.4 Field Types**

### 12.7.4.1 概述

**12.7.4.1 General**

=== "中文"

    Interactive forms support the following field types:
    
    - *Button fields* represent interactive controls on the screen that the user can manipulate with the mouse. They include pushbuttons, check boxes, and radio buttons.
    - *Text fields* are boxes or spaces in which the user can enter text from the keyboard.
    - *Choice fields* contain several text items, at most one of which may be selected as the field value. They include *scrollable list boxes* and *combo boxes*.
    - *Signature fields* represent digital signatures and optional data for authenticating the name of the signer and the document’s contents.
    
    The following sub-clauses describe each of these field types in detail. Further types may be added in the future.

=== "英文"

    Interactive forms support the following field types:
    
    - *Button fields* represent interactive controls on the screen that the user can manipulate with the mouse. They include pushbuttons, check boxes, and radio buttons.
    - *Text fields* are boxes or spaces in which the user can enter text from the keyboard.
    - *Choice fields* contain several text items, at most one of which may be selected as the field value. They include *scrollable list boxes* and *combo boxes*.
    - *Signature fields* represent digital signatures and optional data for authenticating the name of the signer and the document’s contents.
    
    The following sub-clauses describe each of these field types in detail. Further types may be added in the future.


### 12.7.4.2 按钮字段

**12.7.4.2 Button Fields**

#### 12.7.4.2.1 概述

**12.7.4.2.1 General**

=== "中文"

    A button field (field type Btn) represents an interactive control on the screen that the user can manipulate with the mouse. There are three types of button fields:
    
    - A *pushbutton* is a purely interactive control that responds immediately to user input without retaining a permanent value (see [12.7.4.2.2], “Pushbuttons”).
    - A *check box toggles* between two states, on and off (see [12.7.4.2.3], “Check Boxes”).
    - *Radio button fields* contain a set of related buttons that can each be on or off. Typically, at most one radio button in a set may be on at any given time, and selecting any one of the buttons automatically deselects all the others. (There are exceptions to this rule, as noted in "[Radio Buttons](#127422-按钮).")
    
    For button fields, bits 15, 16, 17, and 26 shall indicate the intended behaviour of the button field. A conforming reader shall follow the intended behaviour, as defined in [Table 226](#table226) and clauses [12.7.4.2.2], "Pushbuttons", [12.7.4.2.3], "Check Boxes" and [12.7.4.2.4], "Radio Buttons".
        
    <table id="table226" markdown="span">
        <caption>**Table 226 – Field flags specific to button fields**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**15**</td>
                <td>NoToggleToOff</td>
                <td>(Radio buttons only) If set, exactly one radio button shall be selected at all times; selecting the currently selected button has no effect. If clear, clicking the selected button deselects it, leaving no button selected.
                </td>
            </tr>
            <tr>
                <td>**16**</td>
                <td>Radio</td>
                <td>If set, the field is a set of radio buttons; if clear, the field is a check box. This flag may be set only if the Pushbutton flag is clear.</td>
            </tr>
            <tr>
                <td>**17**</td>
                <td>Pushbutton</td>
                <td>If set, the field is a pushbutton that does not retain a permanent value.</td>
            </tr>
            <tr>
                <td>**26**</td>
                <td>RadiosInUnison</td>
                <td>(PDF 1.5) If set, a group of radio buttons within a radio button field that use the same value for the on state will turn on and off in unison; that is if one is checked, they are all checked. If clear, the buttons are mutually exclusive (the same behavior as HTML radio buttons).</td>
            </tr>
        </tbody>
    </table>

=== "英文"

    A button field (field type Btn) represents an interactive control on the screen that the user can manipulate with the mouse. There are three types of button fields:
    
    - A *pushbutton* is a purely interactive control that responds immediately to user input without retaining a permanent value (see [12.7.4.2.2], “Pushbuttons”).
    - A *check box toggles* between two states, on and off (see [12.7.4.2.3], “Check Boxes”).
    - *Radio button fields* contain a set of related buttons that can each be on or off. Typically, at most one radio button in a set may be on at any given time, and selecting any one of the buttons automatically deselects all the others. (There are exceptions to this rule, as noted in "[Radio Buttons](#127422-按钮).")
    
    For button fields, bits 15, 16, 17, and 26 shall indicate the intended behaviour of the button field. A conforming reader shall follow the intended behaviour, as defined in [Table 226](#table226) and clauses [12.7.4.2.2], "Pushbuttons", [12.7.4.2.3], "Check Boxes" and [12.7.4.2.4], "Radio Buttons".
        
    <table id="table226" markdown="span">
        <caption>**Table 226 – Field flags specific to button fields**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**15**</td>
                <td>NoToggleToOff</td>
                <td>(Radio buttons only) If set, exactly one radio button shall be selected at all times; selecting the currently selected button has no effect. If clear, clicking the selected button deselects it, leaving no button selected.
                </td>
            </tr>
            <tr>
                <td>**16**</td>
                <td>Radio</td>
                <td>If set, the field is a set of radio buttons; if clear, the field is a check box. This flag may be set only if the Pushbutton flag is clear.</td>
            </tr>
            <tr>
                <td>**17**</td>
                <td>Pushbutton</td>
                <td>If set, the field is a pushbutton that does not retain a permanent value.</td>
            </tr>
            <tr>
                <td>**26**</td>
                <td>RadiosInUnison</td>
                <td>(PDF 1.5) If set, a group of radio buttons within a radio button field that use the same value for the on state will turn on and off in unison; that is if one is checked, they are all checked. If clear, the buttons are mutually exclusive (the same behavior as HTML radio buttons).</td>
            </tr>
        </tbody>
    </table>


#### 12.7.4.2.2 按钮

**12.7.4.2.2 Pushbuttons**

=== "中文"
    
    A pushbutton field shall have a field type of **Btn** and the Pushbutton flag (see [Table 226](#table226)) set to one. Because this type of button retains no permanent value, it shall not use the **V** and **DV** entries in the field dictionary (see [Table 220](#table220)).

=== "英文"
    
    A pushbutton field shall have a field type of **Btn** and the Pushbutton flag (see [Table 226](#table226)) set to one. Because this type of button retains no permanent value, it shall not use the **V** and **DV** entries in the field dictionary (see [Table 220](#table220)).


#### 12.7.4.2.3 复选框

**12.7.4.2.3 Check Boxes**

=== "中文"

    A check box field represents one or more check boxes that toggle between two states, on and off, when manipulated by the user with the mouse or keyboard. Its field type shall be **Btn** and its Pushbutton and Radio flags (see [Table 226](#table226)) shall both be clear. Each state can have a separate appearance, which shall be defined by an appearance stream in the appearance dictionary of the field’s widget annotation (see [12.5.5], “Appearance Streams”). The appearance for the off state is optional but, if present, shall be stored in the appearance dictionary under the name **Off**. **Yes** should be used as the name for the on state.
    
    The **V** entry in the field dictionary (see [Table 220](#table220)) holds a name object representing the check box’s appearance state, which shall be used to select the appropriate appearance from the appearance dictionary.
    
    
    !!! info "EXAMPLE1"
    
        This example shows a typical check box definition.
    
    ```text
    1 0 obj
        << /FT /Btn
           /T ( Urgent )
           /V /Yes
           /AS /Yes
           /AP << /N << /Yes 2 0 R /Off 3 0 R>>
        >>
    endobj
    
    2 0 obj
        << /Resources 20 0 R
           /Length 104
        >>
    
    stream
        q
            0 0 1 rg
            BT
                /ZaDb 12 Tf
                0 0 Td
                ( 8 ) Tj
            ET
        Q
    endstream
    endobj
    
    3 0 obj
        << /Resources 20 0 R
           /Length 104
        >>
    
    stream
        q
            0 0 1 rg
            BT
                /ZaDb 12 Tf
                0 0 Td
                ( 8 ) Tj
            ET
        Q
    endstream
    endobj
    ```
    
    Beginning with PDF 1.4, the field dictionary for check boxes and radio buttons may contain an optional **Opt** entry (see [Table 227](#table227)). If present, the **Opt** entry shall be an array of text strings representing the export value of each annotation in the field. It may be used for the following purposes:
    
    - To represent the export values of check box and radio button fields in non-Latin writing systems. Because name objects in the appearance dictionary are limited to **PDFDocEncoding**, they cannot represent non- Latin text.
    - To allow radio buttons or check boxes to be checked independently, even if they have the same export value.
    
    !!! info "EXAMPLE 2"
    
        A group of check boxes may be duplicated on more than one page such that the desired behavior is that when a user checks a box, the corresponding boxes on each of the other pages are also checked. In this case, each of the corresponding check boxes is a widget in the **Kids** array of a check box field.
    
    !!! note "NOTE"
    
        For radio buttons, the same behavior shall occur only if the *RadiosInUnison* flag is set. If it is not set, at most one radio button in a field shall be set at a time.
            
    <table id="table227" markdown="span">
        <caption>**Table 227 – Additional entry specific to check box and radio button fields**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Opt**</td>
                <td>array of text strings</td>
                <td>(Optional; inheritable; PDF 1.4) An array containing one entry for each widget annotation in the **Kids** array of the radio button or check box field. Each entry shall be a text string representing the on state of the corresponding widget annotation. <br/>
                    When this entry is present, the names used to represent the on state in the **AP** dictionary of each annotation (for example, /1, /2) numerical position (starting with **0**) of the annotation in the **Kids** array, encoded as a name object. This allows distinguishing between the annotations even if two or more of them have the same value in the **Opt** array.
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    A check box field represents one or more check boxes that toggle between two states, on and off, when manipulated by the user with the mouse or keyboard. Its field type shall be **Btn** and its Pushbutton and Radio flags (see [Table 226](#table226)) shall both be clear. Each state can have a separate appearance, which shall be defined by an appearance stream in the appearance dictionary of the field’s widget annotation (see [12.5.5], “Appearance Streams”). The appearance for the off state is optional but, if present, shall be stored in the appearance dictionary under the name **Off**. **Yes** should be used as the name for the on state.
    
    The **V** entry in the field dictionary (see [Table 220](#table220)) holds a name object representing the check box’s appearance state, which shall be used to select the appropriate appearance from the appearance dictionary.
    
    
    !!! info "EXAMPLE1"
    
        This example shows a typical check box definition.
    
    ```text
    1 0 obj
        << /FT /Btn
           /T ( Urgent )
           /V /Yes
           /AS /Yes
           /AP << /N << /Yes 2 0 R /Off 3 0 R>>
        >>
    endobj
    
    2 0 obj
        << /Resources 20 0 R
           /Length 104
        >>
    
    stream
        q
            0 0 1 rg
            BT
                /ZaDb 12 Tf
                0 0 Td
                ( 8 ) Tj
            ET
        Q
    endstream
    endobj
    
    3 0 obj
        << /Resources 20 0 R
           /Length 104
        >>
    
    stream
        q
            0 0 1 rg
            BT
                /ZaDb 12 Tf
                0 0 Td
                ( 8 ) Tj
            ET
        Q
    endstream
    endobj
    ```
    
    Beginning with PDF 1.4, the field dictionary for check boxes and radio buttons may contain an optional **Opt** entry (see [Table 227](#table227)). If present, the **Opt** entry shall be an array of text strings representing the export value of each annotation in the field. It may be used for the following purposes:
    
    - To represent the export values of check box and radio button fields in non-Latin writing systems. Because name objects in the appearance dictionary are limited to **PDFDocEncoding**, they cannot represent non- Latin text.
    - To allow radio buttons or check boxes to be checked independently, even if they have the same export value.
    
    !!! info "EXAMPLE 2"
    
        A group of check boxes may be duplicated on more than one page such that the desired behavior is that when a user checks a box, the corresponding boxes on each of the other pages are also checked. In this case, each of the corresponding check boxes is a widget in the **Kids** array of a check box field.
    
    !!! note "NOTE"
    
        For radio buttons, the same behavior shall occur only if the *RadiosInUnison* flag is set. If it is not set, at most one radio button in a field shall be set at a time.
            
    <table id="table227" markdown="span">
        <caption>**Table 227 – Additional entry specific to check box and radio button fields**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Opt**</td>
                <td>array of text strings</td>
                <td>(Optional; inheritable; PDF 1.4) An array containing one entry for each widget annotation in the **Kids** array of the radio button or check box field. Each entry shall be a text string representing the on state of the corresponding widget annotation. <br/>
                    When this entry is present, the names used to represent the on state in the **AP** dictionary of each annotation (for example, /1, /2) numerical position (starting with **0**) of the annotation in the **Kids** array, encoded as a name object. This allows distinguishing between the annotations even if two or more of them have the same value in the **Opt** array.
                </td>
            </tr>
        </tbody>
    </table>

#### 12.7.4.2.4 单选按钮 

**12.7.4.2.4 Radio Buttons**

=== "中文"

    A radio button field is a set of related buttons. Like check boxes, individual radio buttons have two states, on and off. A single radio button may not be turned off directly but only as a result of another button being turned on. Typically, a set of radio buttons (annotations that are children of a single radio button field) have at most one button in the on state at any given time; selecting any of the buttons automatically deselects all the others.
    
    !!! note "NOTE"
    
        An exception occurs when multiple radio buttons in a field have the same on state and the RadiosInUnison flag is set. In that case, turning on one of the buttons turns on all of them.
    
    The field type is **Btn**, the Pushbutton flag (see [Table 226](#table226)) is clear, and the Radio flag is set. This type of button field has an additional flag, NoToggleToOff, which specifies, if set, that exactly one of the radio buttons shall be selected at all times. In this case, clicking the currently selected button has no effect; if the NoToggleToOff flag is clear, clicking the selected button deselects it, leaving no button selected.
    
    The **Kids** entry in the radio button field’s field dictionary (see [Table 220](#table220)) holds an array of widget annotations representing the individual buttons in the set. The parent field’s **V** entry holds a name object corresponding to the appearance state of whichever child field is currently in the on state; the default value for this entry is Off.
    
    !!! info "EXAMPLE"
    
        This example shows the object definitions for a set of radio buttons.
    
    ```text
    10 0 obj                        % Radio button field
        << /FT /Btn
           /Ff …                    % … Radio flag = 1, Pushbutton = 0 …
           /T ( Credit card )
           /V /cardbrand1
           /Kids [ 11 0 R
           12 0 R
           ]
        >>
    endobj
    
    11 0 obj                        % First radio button
        << /Parent 10 0 R
           /AS /cardbrand1
           /AP << /N << /cardbrand1 8 0 R
                        /Off 9 0 R
                     >>
               >>
        >>
    endobj
    
    12 0 obj                        % Second radio button
        << /Parent 10 0 R
           /AS /Off
           /AP << /N << /cardbrand2 8 0 R
                        /Off 9 0 R
                     >>
               >>
        >>
    endobj
    
    8 0 obj                        % Appearance stream for “on” state
        << /Resources 20 0 R
           /Length 104
        >>
    
    stream
        q
            0 0 1 rg
            BT
                /ZaDb 12 Tf
                0 0 Td
                ( 8 ) Tj
            ET
        Q
    endstream
    endobj
    
    9 0 obj                        % Appearance stream for “off” state
        << /Resources 20 0 R
           /Length 104
        >>
    
    stream
        q
            0 0 1 rg
            BT
                /ZaDb 12 Tf
                0 0 Td
                ( 4 ) Tj
            ET
        Q
    endstream
    endobj
    ```
    
    Like a check box field, a radio button field may use the optional **Opt** entry in the field dictionary (PDF 1.4) to define export values for its constituent radio buttons, using Unicode (UTF-16BE) encoding for non-Latin characters (see [Table 227](#table227)).

=== "英文"

    A radio button field is a set of related buttons. Like check boxes, individual radio buttons have two states, on and off. A single radio button may not be turned off directly but only as a result of another button being turned on. Typically, a set of radio buttons (annotations that are children of a single radio button field) have at most one button in the on state at any given time; selecting any of the buttons automatically deselects all the others.
    
    !!! note "NOTE"
    
        An exception occurs when multiple radio buttons in a field have the same on state and the RadiosInUnison flag is set. In that case, turning on one of the buttons turns on all of them.
    
    The field type is **Btn**, the Pushbutton flag (see [Table 226](#table226)) is clear, and the Radio flag is set. This type of button field has an additional flag, NoToggleToOff, which specifies, if set, that exactly one of the radio buttons shall be selected at all times. In this case, clicking the currently selected button has no effect; if the NoToggleToOff flag is clear, clicking the selected button deselects it, leaving no button selected.
    
    The **Kids** entry in the radio button field’s field dictionary (see [Table 220](#table220)) holds an array of widget annotations representing the individual buttons in the set. The parent field’s **V** entry holds a name object corresponding to the appearance state of whichever child field is currently in the on state; the default value for this entry is Off.
    
    !!! info "EXAMPLE"
    
        This example shows the object definitions for a set of radio buttons.
    
    ```text
    10 0 obj                        % Radio button field
        << /FT /Btn
           /Ff …                    % … Radio flag = 1, Pushbutton = 0 …
           /T ( Credit card )
           /V /cardbrand1
           /Kids [ 11 0 R
           12 0 R
           ]
        >>
    endobj
    
    11 0 obj                        % First radio button
        << /Parent 10 0 R
           /AS /cardbrand1
           /AP << /N << /cardbrand1 8 0 R
                        /Off 9 0 R
                     >>
               >>
        >>
    endobj
    
    12 0 obj                        % Second radio button
        << /Parent 10 0 R
           /AS /Off
           /AP << /N << /cardbrand2 8 0 R
                        /Off 9 0 R
                     >>
               >>
        >>
    endobj
    
    8 0 obj                        % Appearance stream for “on” state
        << /Resources 20 0 R
           /Length 104
        >>
    
    stream
        q
            0 0 1 rg
            BT
                /ZaDb 12 Tf
                0 0 Td
                ( 8 ) Tj
            ET
        Q
    endstream
    endobj
    
    9 0 obj                        % Appearance stream for “off” state
        << /Resources 20 0 R
           /Length 104
        >>
    
    stream
        q
            0 0 1 rg
            BT
                /ZaDb 12 Tf
                0 0 Td
                ( 4 ) Tj
            ET
        Q
    endstream
    endobj
    ```
    
    Like a check box field, a radio button field may use the optional **Opt** entry in the field dictionary (PDF 1.4) to define export values for its constituent radio buttons, using Unicode (UTF-16BE) encoding for non-Latin characters (see [Table 227](#table227)).

### 12.7.4.3 文本字段

**12.7.4.3 Text Fields**

=== "中文"

    A *text field* (field type **Tx**) is a box or space for text fill-in data typically entered from a keyboard. The text may be restricted to a single line or may be permitted to span multiple lines, depending on the setting of the Multiline flag in the field dictionary’s **Ff** entry. Table 228 shows the flags pertaining to this type of field. A text field shall have a field type of **Tx**. A conforming PDF file, and a conforming processor shall obey the usage guidelines in Table 228.
    
    <table id="table228" markdown="span">
        <caption>**Table 228 – Field flags specific to text fields**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>13</td>
                <td>Multiline</td>
                <td>If set, the field may contain multiple lines of text; if clear, the field’s text shall be restricted to a single line.</td>
            </tr>
            <tr>
                <td>14</td>
                <td>Password</td>
                <td>If set, the field is intended for entering a secure password that should not be echoed visibly to the screen. Characters typed from the keyboard shall instead be echoed in some unreadable form, such as asterisks or bullet characters.
        
        !!! note "NOTE"
        
            To protect password confidentiality, readers should never store the value of the text field in the PDF file if this flag is set.</td>
            </tr>
            <tr>
                <td>21</td>
                <td>FileSelect</td>
                <td>(PDF 1.4) If set, the text entered in the field represents the pathname of a file whose contents shall be submitted as the value of the field.</td>
            </tr>
            <tr>
                <td>23</td>
                <td>DoNotScroll</td>
                <td>(PDF 1.4) If set, text entered in the field shall not be spell-checked.</td>
            </tr>
            <tr>
                <td>24</td>
                <td>Multiline</td>
                <td>(PDF 1.4) If set, the field shall not scroll (horizontally for single-line fields, vertically for multiple-line fields) to accommodate more text than fits within its annotation rectangle. Once the field is full, no further text shall be accepted for interactive form filling; for non- interactive form filling, the filler should take care not to add more character than will visibly fit in the defined area.</td>
            </tr>
            <tr>
                <td>25</td>
                <td>Comb</td>
                <td>(PDF 1.5) May be set only if the **MaxLen** entry is present in the text field dictionary (see [Table 229](#table229)) and if the Multiline, Password, and FileSelect flags are clear. If set, the field shall be automatically divided into as many equally spaced positions, or combs, as the value of **MaxLen**, and the text is laid out into those combs.</td>
            </tr>
            <tr>
                <td>26</td>
                <td>RichText</td>
                <td>(PDF 1.5) If set, the value of this field shall be a rich text string (see [12.7.3.4], “Rich Text Strings”). If the field has a value, the RV entry of the field dictionary ([Table 222](#table222)) shall specify the rich text string.</td>
            </tr>
        </tbody>
    </table>
    
    The field’s text shall be held in a text string (or, beginning with PDF 1.5, a stream) in the **V** (value) entry of the field dictionary. The contents of this text string or stream shall be used to construct an appearance stream for displaying the field, as described under [12.7.3.3], “Variable Text.” The text shall be presented in a single style (font, size, colour, and so forth), as specified by the **DA** (default appearance) string.
    
    If the FileSelect flag (PDF 1.4) is set, the field shall function as a *file-select control*. In this case, the field’s text represents the pathname of a file whose contents shall be submitted as the field’s value:
    
    - For fields submitted in HTML Form format, the submission shall use the MIME content type multipart/form-data, as described in Internet RFC 2045, Multipurpose Internet Mail Extensions (MIME), Part One: Format of Internet Message Bodies (see the [Bibliography](../bibliography.md)).
    - For Forms Data Format (FDF) submission, the value of the V entry in the FDF field dictionary (see FDF Fields in [12.7.7.3], “FDF Catalog”) shall be a file specification ([7.11], “File Specifications”) identifying the selected file. 
    - XML format is not supported for file-select controls; therefore, no value shall be submitted in this case.
    
    Besides the usual entries common to all fields (see [Table 220](#table220)) and to fields containing variable text (see [Table 222](#table222)), the field dictionary for a text field may contain the additional entry shown in [Table 229](#table229).
    
    
    <table id="table229" markdown="span">
        <caption>**Table 229 – Additional entry specific to a text field**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>MaxLen</td>
                <td>integer</td>
                <td>(Optional; inheritable) The maximum length of the field’s text, in characters.</td>
            </tr>
        </tbody>
    </table>
    
    !!! info "EXAMPLE"
    
        The following example shows the object definitions for a typical text field.
    
        ```text
        6 0 obj
            << /FT /Tx
               /Ff …                                            % Set Multiline flag
               /T ( Silly prose )
               /DA ( 0 0 1 rg /Ti 12 Tf )
               /V ( The quick brown fox ate the lazy mouse )
               /AP << /N 5 0 R >>
            >>
        endobj
        
        5 0 obj
            << /Resources 21 0 R
               /Length 172
            >>    
        
        stream
            /Tx BMC
                q
                    BT
                        0 0 1 rg
                        /Ti 12 Tf
                        1 0 0 1 100 100 Tm
                        0 0 Td
                        ( The quick brown fox ) Tj
                        0 -13 Td
                        ( ate the lazy mouse. ) Tj
                    ET
                Q
            EMC
        endstream
        endobj
        ```

=== "英文"

    A *text field* (field type **Tx**) is a box or space for text fill-in data typically entered from a keyboard. The text may be restricted to a single line or may be permitted to span multiple lines, depending on the setting of the Multiline flag in the field dictionary’s **Ff** entry. Table 228 shows the flags pertaining to this type of field. A text field shall have a field type of **Tx**. A conforming PDF file, and a conforming processor shall obey the usage guidelines in Table 228.
    
    <table id="table228" markdown="span">
        <caption>**Table 228 – Field flags specific to text fields**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>13</td>
                <td>Multiline</td>
                <td>If set, the field may contain multiple lines of text; if clear, the field’s text shall be restricted to a single line.</td>
            </tr>
            <tr>
                <td>14</td>
                <td>Password</td>
                <td>If set, the field is intended for entering a secure password that should not be echoed visibly to the screen. Characters typed from the keyboard shall instead be echoed in some unreadable form, such as asterisks or bullet characters.
        
        !!! note "NOTE"
        
            To protect password confidentiality, readers should never store the value of the text field in the PDF file if this flag is set.</td>
            </tr>
            <tr>
                <td>21</td>
                <td>FileSelect</td>
                <td>(PDF 1.4) If set, the text entered in the field represents the pathname of a file whose contents shall be submitted as the value of the field.</td>
            </tr>
            <tr>
                <td>23</td>
                <td>DoNotScroll</td>
                <td>(PDF 1.4) If set, text entered in the field shall not be spell-checked.</td>
            </tr>
            <tr>
                <td>24</td>
                <td>Multiline</td>
                <td>(PDF 1.4) If set, the field shall not scroll (horizontally for single-line fields, vertically for multiple-line fields) to accommodate more text than fits within its annotation rectangle. Once the field is full, no further text shall be accepted for interactive form filling; for non- interactive form filling, the filler should take care not to add more character than will visibly fit in the defined area.</td>
            </tr>
            <tr>
                <td>25</td>
                <td>Comb</td>
                <td>(PDF 1.5) May be set only if the **MaxLen** entry is present in the text field dictionary (see [Table 229](#table229)) and if the Multiline, Password, and FileSelect flags are clear. If set, the field shall be automatically divided into as many equally spaced positions, or combs, as the value of **MaxLen**, and the text is laid out into those combs.</td>
            </tr>
            <tr>
                <td>26</td>
                <td>RichText</td>
                <td>(PDF 1.5) If set, the value of this field shall be a rich text string (see [12.7.3.4], “Rich Text Strings”). If the field has a value, the RV entry of the field dictionary ([Table 222](#table222)) shall specify the rich text string.</td>
            </tr>
        </tbody>
    </table>
    
    The field’s text shall be held in a text string (or, beginning with PDF 1.5, a stream) in the **V** (value) entry of the field dictionary. The contents of this text string or stream shall be used to construct an appearance stream for displaying the field, as described under [12.7.3.3], “Variable Text.” The text shall be presented in a single style (font, size, colour, and so forth), as specified by the **DA** (default appearance) string.
    
    If the FileSelect flag (PDF 1.4) is set, the field shall function as a *file-select control*. In this case, the field’s text represents the pathname of a file whose contents shall be submitted as the field’s value:
    
    - For fields submitted in HTML Form format, the submission shall use the MIME content type multipart/form-data, as described in Internet RFC 2045, Multipurpose Internet Mail Extensions (MIME), Part One: Format of Internet Message Bodies (see the [Bibliography](../bibliography.md)).
    - For Forms Data Format (FDF) submission, the value of the V entry in the FDF field dictionary (see FDF Fields in [12.7.7.3], “FDF Catalog”) shall be a file specification ([7.11], “File Specifications”) identifying the selected file. 
    - XML format is not supported for file-select controls; therefore, no value shall be submitted in this case.
    
    Besides the usual entries common to all fields (see [Table 220](#table220)) and to fields containing variable text (see [Table 222](#table222)), the field dictionary for a text field may contain the additional entry shown in [Table 229](#table229).
    
    
    <table id="table229" markdown="span">
        <caption>**Table 229 – Additional entry specific to a text field**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>MaxLen</td>
                <td>integer</td>
                <td>(Optional; inheritable) The maximum length of the field’s text, in characters.</td>
            </tr>
        </tbody>
    </table>
    
    !!! info "EXAMPLE"
    
        The following example shows the object definitions for a typical text field.
    
        ```text
        6 0 obj
            << /FT /Tx
               /Ff …                                            % Set Multiline flag
               /T ( Silly prose )
               /DA ( 0 0 1 rg /Ti 12 Tf )
               /V ( The quick brown fox ate the lazy mouse )
               /AP << /N 5 0 R >>
            >>
        endobj
        
        5 0 obj
            << /Resources 21 0 R
               /Length 172
            >>    
        
        stream
            /Tx BMC
                q
                    BT
                        0 0 1 rg
                        /Ti 12 Tf
                        1 0 0 1 100 100 Tm
                        0 0 Td
                        ( The quick brown fox ) Tj
                        0 -13 Td
                        ( ate the lazy mouse. ) Tj
                    ET
                Q
            EMC
        endstream
        endobj
        ```

### 12.7.4.4 选择字段 

**12.7.4.4 Choice Fields**

=== "中文"

    A *choice field* shall have a field type of **Ch** that contains several text items, one or more of which shall be selected as the field value. The items may be presented to the user in one of the following two forms:
    
    - A scrollable *list box*
    - A combo box consisting of a drop-down list. The combo box may be accompanied by an editable text box in which the user can type a value other than the predefined choices, as directed by the value of the Edit bit in the **Ff** entry.
    
    <table id="table230" markdown="span">
        <caption>**Table 226 – Field flags specific to button fields**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**18**</td>
                <td>Combo</td>
                <td>If set, the field is a combo box; if clear, the field is a list box.
                </td>
            </tr>
            <tr>
                <td>**19**</td>
                <td>Radio</td>
                <td>If set, the combo box shall include an editable text box as well as a drop-down list; if clear, it shall include only a drop-down list. This flag shall be used only if the Combo flag is set.</td>
            </tr>
            <tr>
                <td>**20**</td>
                <td>Sort</td>
                <td>If set, the field’s option items shall be sorted alphabetically. This flag is intended for use by writers, not by readers. Conforming readers shall display the options in the order in which they occur in the **Opt** array (see [Table 231](#table231)).</td>
            </tr>
            <tr>
                <td>**22**</td>
                <td>MultiSelect</td>
                <td>(PDF 1.4) If set, more than one of the field’s option items may be selected simultaneously; if clear, at most one item shall be selected.</td>
            </tr>
            <tr>
                <td>**23**</td>
                <td>DoNotSpellCheck</td>
                <td>(PDF 1.4) If set, text entered in the field shall not be spell-checked. This flag shall not be used unless the Combo and Edit flags are both set.</td>
            </tr>
            <tr>
                <td>**27**</td>
                <td>CommitOnSelChange</td>
                <td>(PDF 1.5) If set, the new value shall be committed as soon as a selection is made (commonly with the pointing device). In this case, supplying a value for a field involves three actions: selecting the field for fill-in, selecting a choice for the fill-in value, and leaving that field, which finalizes or “commits” the data choice and triggers any actions associated with the entry or changing of this data. If this flag is on, then processing does not wait for leaving the field action to occur, but immediately proceeds to the third step. <br/>
                This option enables applications to perform an action once a selection is made, without requiring the user to exit the field. If clear, the new value is not committed until the user exits the field.</td>
            </tr>
        </tbody>
    </table>
    
    The various types of choice fields are distinguished by flags in the Ff entry, as shown in Table 230. Table 231 shows the field dictionary entries specific to choice fields.
    
    <table id="table231" markdown="span">
        <caption>**Table 231 – Additional entries specific to a choice field**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Opt**</td>
                <td>array</td>
                <td>(Optional) An array of options that shall be presented to the user. Each element of the array is either a text string representing one of the available options or an array consisting of two text strings: the option’s export value and the text that shall be displayed as the name of the option. <br/>
                    If this entry is not present, no choices should be presented to the user.
                </td>
            </tr>
            <tr>
                <td>**TI**</td>
                <td>integer</td>
                <td>(Optional) For scrollable list boxes, the top index (the index in the **Opt** array of the first option visible in the list). Default value: 0.</td>
            </tr>
            <tr>
                <td>**I**</td>
                <td>array</td>
                <td>(Sometimes required, otherwise optional; PDF 1.4) For choice fields that allow multiple selection (MultiSelect flag set), an array of integers, sorted in ascending order, representing the zero-based indices in the **Opt** array of the currently selected option items. This entry shall be used when two or more elements in the **Opt** array have different names but the same export value or when the value of the choice field is an array. This entry should not be used for choice fields that do not allow multiple selection. If the items identified by this entry differ from those in the **V** entry of the field dictionary (see discussion following this Table), the **V** entry shall be used.</td>
            </tr>
        </tbody>
    </table>
    
    The **Opt** array specifies the list of options in the choice field, each of which shall be represented by a text string that shall be displayed on the screen. Each element of the **Opt** array contains either this text string by itself or a two-element array, whose second element is the text string and whose first element is a text string representing the export value that shall be used when exporting interactive form field data from the document.
    
    The field dictionary’s **V** (value) entry (see [Table 220](#table220)) identifies the item or items currently selected in the choice field. If the field does not allow multiple selection—that is, if the MultiSelect flag (PDF 1.4) is not set—or if multiple selection is supported but only one item is currently selected, **V** is a text string representing the name of the selected item, as given in the field dictionary’s **Opt** array. If multiple items are selected, **V** is an array of such strings. (For items represented in the **Opt** array by a two-element array, the name string is the second of the two array elements.) The default value of **V** is null, indicating that no item is currently selected.
    
    !!! info "EXAMPLE"
    
        The following example shows a typical choice field definition.
    
        ```text
        << /FT /Ch
           /Ff …
           /T ( Body Color )
           /V ( Blue )
           /Opt [ ( Red )
                ( My favorite color )
                ( Blue )
                ]
        >>
        ```

=== "英文"

    A *choice field* shall have a field type of **Ch** that contains several text items, one or more of which shall be selected as the field value. The items may be presented to the user in one of the following two forms:
    
    - A scrollable *list box*
    - A combo box consisting of a drop-down list. The combo box may be accompanied by an editable text box in which the user can type a value other than the predefined choices, as directed by the value of the Edit bit in the **Ff** entry.
    
    <table id="table230" markdown="span">
        <caption>**Table 226 – Field flags specific to button fields**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**18**</td>
                <td>Combo</td>
                <td>If set, the field is a combo box; if clear, the field is a list box.
                </td>
            </tr>
            <tr>
                <td>**19**</td>
                <td>Radio</td>
                <td>If set, the combo box shall include an editable text box as well as a drop-down list; if clear, it shall include only a drop-down list. This flag shall be used only if the Combo flag is set.</td>
            </tr>
            <tr>
                <td>**20**</td>
                <td>Sort</td>
                <td>If set, the field’s option items shall be sorted alphabetically. This flag is intended for use by writers, not by readers. Conforming readers shall display the options in the order in which they occur in the **Opt** array (see [Table 231](#table231)).</td>
            </tr>
            <tr>
                <td>**22**</td>
                <td>MultiSelect</td>
                <td>(PDF 1.4) If set, more than one of the field’s option items may be selected simultaneously; if clear, at most one item shall be selected.</td>
            </tr>
            <tr>
                <td>**23**</td>
                <td>DoNotSpellCheck</td>
                <td>(PDF 1.4) If set, text entered in the field shall not be spell-checked. This flag shall not be used unless the Combo and Edit flags are both set.</td>
            </tr>
            <tr>
                <td>**27**</td>
                <td>CommitOnSelChange</td>
                <td>(PDF 1.5) If set, the new value shall be committed as soon as a selection is made (commonly with the pointing device). In this case, supplying a value for a field involves three actions: selecting the field for fill-in, selecting a choice for the fill-in value, and leaving that field, which finalizes or “commits” the data choice and triggers any actions associated with the entry or changing of this data. If this flag is on, then processing does not wait for leaving the field action to occur, but immediately proceeds to the third step. <br/>
                This option enables applications to perform an action once a selection is made, without requiring the user to exit the field. If clear, the new value is not committed until the user exits the field.</td>
            </tr>
        </tbody>
    </table>
    
    The various types of choice fields are distinguished by flags in the Ff entry, as shown in Table 230. Table 231 shows the field dictionary entries specific to choice fields.
    
    <table id="table231" markdown="span">
        <caption>**Table 231 – Additional entries specific to a choice field**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Opt**</td>
                <td>array</td>
                <td>(Optional) An array of options that shall be presented to the user. Each element of the array is either a text string representing one of the available options or an array consisting of two text strings: the option’s export value and the text that shall be displayed as the name of the option. <br/>
                    If this entry is not present, no choices should be presented to the user.
                </td>
            </tr>
            <tr>
                <td>**TI**</td>
                <td>integer</td>
                <td>(Optional) For scrollable list boxes, the top index (the index in the **Opt** array of the first option visible in the list). Default value: 0.</td>
            </tr>
            <tr>
                <td>**I**</td>
                <td>array</td>
                <td>(Sometimes required, otherwise optional; PDF 1.4) For choice fields that allow multiple selection (MultiSelect flag set), an array of integers, sorted in ascending order, representing the zero-based indices in the **Opt** array of the currently selected option items. This entry shall be used when two or more elements in the **Opt** array have different names but the same export value or when the value of the choice field is an array. This entry should not be used for choice fields that do not allow multiple selection. If the items identified by this entry differ from those in the **V** entry of the field dictionary (see discussion following this Table), the **V** entry shall be used.</td>
            </tr>
        </tbody>
    </table>
    
    The **Opt** array specifies the list of options in the choice field, each of which shall be represented by a text string that shall be displayed on the screen. Each element of the **Opt** array contains either this text string by itself or a two-element array, whose second element is the text string and whose first element is a text string representing the export value that shall be used when exporting interactive form field data from the document.
    
    The field dictionary’s **V** (value) entry (see [Table 220](#table220)) identifies the item or items currently selected in the choice field. If the field does not allow multiple selection—that is, if the MultiSelect flag (PDF 1.4) is not set—or if multiple selection is supported but only one item is currently selected, **V** is a text string representing the name of the selected item, as given in the field dictionary’s **Opt** array. If multiple items are selected, **V** is an array of such strings. (For items represented in the **Opt** array by a two-element array, the name string is the second of the two array elements.) The default value of **V** is null, indicating that no item is currently selected.
    
    !!! info "EXAMPLE"
    
        The following example shows a typical choice field definition.
    
        ```text
        << /FT /Ch
           /Ff …
           /T ( Body Color )
           /V ( Blue )
           /Opt [ ( Red )
                ( My favorite color )
                ( Blue )
                ]
        >>
        ```

### 12.7.4.5 签名字段

**12.7.4.5 Signature Fields**

=== "中文"

    A *signature field* (PDF 1.3) is a form field that contains a digital signature (see [12.8], “Digital Signatures”). The field dictionary representing a signature field may contain the additional entries listed in [Table 232](#table232), as well as the standard entries described in [Table 220](#table220). The field type (**FT**) shall be **Sig**, and the field value (**V**), if present, shall be a *signature dictionary* containing the signature and specifying various attributes of the signature field (see [Table 252](#table252)).
    
    !!! note "NOTE 1"
    
        This signature form field serves two primary purposes. The first is to define the form field that will provide the visual signing properties for display but it also may hold information needed later when the actual signing takes place, such as the signature technology to use. This carries information from the author of the document to the software that later does the signing.
    
    !!! note "NOTE 2"
    
        Filling in (signing) the signature field entails updating at least the **V** entry and usually also the **AP** entry of the associated widget annotation. Exporting a signature field typically exports the **T**, **V**, and **AP** entries.
    
    Like any other field, a signature field may be described by a widget annotation dictionary containing entries pertaining to an annotation as well as a field (see [12.5.6.19], “Widget Annotations”). The annotation rectangle (**Rect**) in such a dictionary shall give the position of the field on its page. Signature fields that are not intended to be visible shall have an annotation rectangle that has zero height and width. Conforming readers shall treat such signatures as not visible. Conforming readers shall also treat signatures as not visible if either the **Hidden** bit or the **NoView** bit of the **F** entry is **true**. The **F** entry is described in [Table 164](./s5.md#table164), and annotation flags are described in [Table 165](./s5.md#table165).
    
    The appearance dictionary (AP) of a signature field’s widget annotation defines the field’s visual appearance on the page (see [12.5.5], “Appearance Streams”).
        
    <table id="table232" markdown="span">
        <caption>**Table 232 – Additional entries specific to a signature field**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Lock**</td>
                <td>dictionary</td>
                <td>(Optional; shall be an indirect reference; PDF 1.5) A signature field lock dictionary that specifies a set of form fields that shall be locked when this signature field is signed. Table 233 lists the entries in this dictionary.
                </td>
            </tr>
            <tr>
                <td>**SV**</td>
                <td>dictionary</td>
                <td>(Optional; shall be an indirect reference; PDF 1.5) A seed value dictionary (see [Table 234](#table234)) containing information that constrains the properties of a signature that is applied to this field.</td>
            </tr>
        </tbody>
    </table>
    
    The signature field lock dictionary (described in [Table 233](#table233)) contains field names from the signature seed value dictionary (described in [Table 234](#table234)) that cannot be changed through the user interface of a conforming reader.
        
    <table id="table233" markdown="span">
        <caption>**Table 233 – Entries in a signature field lock dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td>
                <td>name</td>
                <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **SigFieldLock** for a signature field lock dictionary.
                </td>
            </tr>
            <tr>
                <td>**Action**</td>
                <td>name</td>
                <td>(Required) A name which, in conjunction with **Fields**, indicates the set of fields that should be locked. The value shall be one of the following: <br/>
                All &emsp; All fields in the document <br/>
                Include &emsp; All fields specified in Fields <br/>
                Exclude &emsp; All fields except those specified in Fields</td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Required if the value of **Action** is Include or Exclude) An array of text strings containing field names.</td>
            </tr>
        </tbody>
    </table>
    
    The value of the **SV** entry in the field dictionary is a seed value dictionary whose entries (see [Table 234](#table234)) provide constraining information that shall be used at the time the signature is applied. Its **Ff** entry specifies whether the other entries in the dictionary shall be honoured or whether they are merely recommendations.
    
    The seed value dictionary may include seed values for private entries belonging to multiple handlers. A given handler shall use only those entries that are pertinent to itself and ignore the others.
        
    <table id="table234" markdown="span">
        <caption>**Table 234 – Entries in a signature field seed value dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td>
                <td>name</td>
                <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **SV** for a seed value dictionary.
                </td>
            </tr>
            <tr>
                <td>**Ff**</td>
                <td>integer</td>
                <td>(Optional) A set of bit flags specifying the interpretation of specific entries in this dictionary. A value of 1 for the flag indicates that the associated entry is a required constraint. A value of 0 indicates that the associated entry is an optional constraint. Bit positions are 1 (**Filter**); 2 (**SubFilter**); 3 (**V**); 4 (**Reasons**); 5 (**LegalAttestation**); 6 (**AddRevInfo**); and 7 (**DigestMethod**). Default value: 0.
                </td>
            </tr>
            <tr>
                <td>**Filter**</td>
                <td>name</td>
                <td>(Optional) The signature handler that shall be used to sign the signature field. Beginning with PDF 1.7, if **Filter** is specified and the **Ff** entry indicates this entry is a required constraint, then the signature handler specified by this entry shall be used when signing; otherwise, signing shall not take place. **If** Ff indicates that this is an optional constraint, this handler may be used if it is available. If it is not available, a different handler may be used instead.
                </td>
            </tr>
            <tr>
                <td>**SubFilter**</td>
                <td>array</td>
                <td>(Optional) An array of names indicating encodings to use when signing. The first name in the array that matches an encoding supported by the signature handler shall be the encoding that is actually used for signing. If **SubFilter** is specified and the **Ff** entry indicates that this entry is a required constraint, then the first matching encodings shall be used when signing; otherwise, signing shall not take place. If **Ff** indicates that this is an optional constraint, then the first matching encoding shall be used if it is available. If none is available, a different encoding may be used.
                </td>
            </tr>
            <tr>
                <td>**DigestMethod**</td>
                <td>array</td>
                <td>(Optional; PDF 1.7) An array of names indicating acceptable digest algorithms to use while signing. The value shall be one of **SHA1**, **SHA256**, **SHA384**, **SHA512** and **RIPEMD160**. The default value is implementation-specific. <br/>
                    This property is only applicable if the digital credential signing contains RSA public/private keys. If it contains DSA public/ private keys, the digest algorithm is always **SHA1** and this attribute shall be ignored.
                </td>
            </tr>
            <tr>
                <td>**V**</td>
                <td>real</td>
                <td>(Optional) The minimum required capability of the signature field seed value dictionary parser. A value of 1 specifies that the parser shall be able to recognize all seed value dictionary entries in a PDF 1.5 file. A value of 2 specifies that it shall be able to recognize all seed value dictionary entries specified. <br/>
                    The **Ff** entry indicates whether this shall be treated as a required constraint.
                </td>
            </tr>
            <tr>
                <td>**Cert**</td>
                <td>dictionary</td>
                <td>(Optional) A certificate seed value dictionary (see [Table 235](#table235)) containing information about the characteristics of the certificate that shall be used when signing.
                </td>
            </tr>
            <tr>
                <td>**Reasons**</td>
                <td>array</td>
                <td>(Optional) An array of text strings that specifying possible reasons for signing a document. If specified, the reasons supplied in this entry replace those used by conforming products. <br/>
                    If the **Reasons** array is provided and the **Ff** entry indicates that **Reasons** is a required constraint, one of the reasons in the array shall be used for the signature dictionary; otherwise, signing shall not take place. If the **Ff** entry indicates **Reasons** is an optional constraint, one of the reasons in the array may be chosen or a custom reason can be provided. <br/>
                    If the **Reasons** array is omitted or contains a single entry with the value PERIOD (2Eh) and the Ff entry indicates that **Reasons** is a required constraint, the Reason entry shall be omitted from the signature dictionary (see [Table 252](./s8.md#table252)).
                </td>
            </tr>
            <tr>
                <td>**MDP**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.6) A dictionary containing a single entry whose key is **P** and whose value is an integer between 0 and 3. A value of 0 defines the signature as an author signature (see [12.8], “Digital Signatures”). The values 1 through 3 shall be used for certification signatures and correspond to the value of **P** in a **DocMDP** transform parameters dictionary (see [Table 254](./s8.md#table254)). <br/>
                    If this **MDP** key is not present or the **MDP** dictionary does not contain a **P** entry, no rules shall be defined regarding the type of signature or its permissions.
                </td>
            </tr>
            <tr>
                <td>**TimeStamp**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.6) A time stamp dictionary containing two entries:
                    URL  &emsp;  An ASCII string specifying the URL of a time-stamping server, providing a time stamp that is compliant with RFC 3161, Internet X.509 Public Key Infrastructure Time-Stamp Protocol (see the Bibliography). <br/>
                    Ff &emsp; An integer whose value is 1 (the signature shall have a time stamp) or 0 (the signature need not have a time stamp). Default value: 0. <br/>
                    NOTE &emsp; Please see [12.8.3.3], "PKCS#7 Signatures as used in ISO 32000" for more details about hashing.
                </td>
            </tr>
            <tr>
                <td>**LegalAttestation**</td>
                <td>array</td>
                <td>(Optional; PDF 1.6) An array of text strings specifying possible legal attestations (see [12.8.5], “Legal Content Attestations”). The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint.
                </td>
            </tr>
            <tr>
                <td>**AddRevInfo**</td>
                <td>boolean</td>
                <td>(Optional; PDF 1.7) A flag indicating whether revocation checking shall be carried out. If **AddRevInfo** is **true**, the conforming processor shall perform the following additional tasks when signing the signature field: <br/> 
                    Perform revocation checking of the certificate (and the corresponding issuing certificates) used to sign. <br/>
                    Include the revocation information within the signature value. <br/>
                    Three SubFilter values have been defined for ISO 32000. For those values the AddRevInfo value shall be true only if SubFilter is adbe.pkcs7.detached or adbe.pkcs7.sha1. If SubFilter is x509.rsa_sha1, this entry shall be omitted or set to false. Additional SubFilters may be defined that also use AddRevInfo values. <br/>
                    If AddRevInfo is true and the Ff entry indicates this is a required constraint, then the preceding tasks shall be performed. If they cannot be performed, then signing shall fail. <br/>
                    Default value: false <br/>
                    NOTE 1 <br/>
                    &emsp; Revocation information is carried in the signature data as specified by PCKS#7. See [12.8.3.3], "PKCS#7 Signatures as used in ISO 32000". <br/>
                    NOTE 2 <br/>
                    &emsp; The trust anchors used are determined by the signature handlers for both creation and validation.
                </td>
            </tr>
        </tbody>
    </table>
    
    For optional keys that are not present, no constraint shall be placed upon the signature handler for that property when signing.
        
    <table id="table235" markdown="span">
        <caption>**Table 235 – Entries in a certificate seed value dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td>
                <td>name</td>
                <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **SVCert** for a certificate seed value dictionary.
                </td>
            </tr>
            <tr>
                <td>**Ff**</td>
                <td>integer</td>
                <td>(Optional) A set of bit flags specifying the interpretation of specific entries in this dictionary. A value of 1 for the flag means that a signer shall be required to use only the specified values for the entry. A value of 0 means that other values are permissible. Bit positions are 1 (**Subject**); 2 (**Issuer**); 3 (**OID**); 4 (**SubjectDN**); 5 (**Reserved**); 6 (**KeyUsage**); 7 (**URL**). <br/> Default value: 0.</td>
            </tr>
            <tr>
                <td>**Subject**</td>
                <td>array</td>
                <td>(Optional) An array of byte strings containing DER-encoded X.509v3 certificates that are acceptable for signing. X.509v3 certificates are described in RFC 3280, Internet X.509 Public Key Infrastructure, Certificate and Certificate Revocation List (CRL) Profile (see the Bibliography). The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint.</td>
            </tr>
            <tr>
                <td>**SubjectDN**</td>
                <td>array of dictionaries</td>
                <td>(Optional; PDF 1.7) An array of dictionaries, each specifying a Subject Distinguished Name (DN) that shall be present within the certificate for it to be acceptable for signing. The certificate ultimately used for the digital signature shall contain all the attributes specified in each of the dictionaries in this array. (PDF keys and values are mapped to certificate attributes and values.) The certificate is not constrained to use only attribute entries from these dictionaries but may contain additional attributes.The Subject Distinguished Name is described in RFC 3280 (see the Bibliography). The key can be any legal attribute identifier (OID). Attribute names shall contain characters in the set a-z A-Z 0-9 and PERIOD. <br/> Certificate attribute names are used as key names in the dictionaries in this array. Values of the attributes are used as values of the keys. Values shall be text strings. <br/> The value of the corresponding flag in the **Ff** entry indicates whether this entry is a required constraint.</td>
            </tr>
            <tr>
                <td>**KeyUsage**</td>
                <td>array of ASCII strings</td>
                <td>(Optional; PDF 1.7) An array of ASCII strings, where each string specifies an acceptable key-usage extension that shall be present in the signing certificate. Multiple strings specify a range of acceptable key- usage extensions. The key-usage extension is described in RFC 3280. <br/>
                Each character in a string represents a key-usage type, where the order of the characters indicates the key-usage extension it represents. The first through ninth characters in the string, from left to right, represent the required value for the following key-usage extensions: <br/>
                <ol>
                <li>1 digitalSignature</li>
                <li>2 non-Repudiation</li>
                <li>3 keyEncipherment</li>
                <li>4 dataEncipherment</li>
                <li>5 keyAgreement</li>
                <li>6 keyCertSign</li>
                <li>7 cRLSign</li>
                <li>8 encipherOnly</li>
                <li>9 decipherOnly</li>
                </ol>            
                Any additional characters shall be ignored. Any missing characters or characters that are not one of the following values, shall be treated as ‘X’. The following character values shall be supported: <br/>
                <ol>
                <li> 0 Corresponding key-usage shall not be set. </li>
                <li> 1 Corresponding key-usage shall be set. </li>
                <li> X State of the corresponding key-usage does not matter. </li>
                </ol>            
                EXAMPLE 1 <br/>            
                &emsp; The string values ‘1’ and ‘1XXXXXXXX’ represent settings where the key-usage type digitalSignature is set and the state of all other key-usage types do not matter. <br/>
                The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint.</td>
            </tr>
            <tr>
                <td>**Issuer**</td>
                <td>array</td>
                <td>(Optional) An array of byte strings containing DER-encoded X.509v3 certificates of acceptable issuers. If the signer’s certificate refers to any of the specified issuers (either directly or indirectly), the certificate shall be considered acceptable for signing. The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint. <br/>
                    This array may contain self-signed certificates.</td>
            </tr>
            <tr>
                <td>**OID**</td>
                <td>array</td>
                <td>(Optional) An array of byte strings that contain Object Identifiers (OIDs) of the certificate policies that shall be present in the signing certificate. <br/>
                EXAMPLE 2 <br/>
                &emsp; An example of such a string is: (2.16.840.1.113733.1.7.1.1). <br/>
                This field shall only be used if the value of **Issuer** is not empty. The certificate policies extension is described in RFC 3280 (see the Bibliography). The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint.</td>
            </tr>
            <tr>
                <td>**URL**</td>
                <td>ASCII string</td>
                <td>(Optional) A URL, the use for which shall be defined by the **URLType** entry.</td>
            </tr>
            <tr>
                <td>**URLType**</td>
                <td>Name</td>
                <td>(Optional; PDF 1.7) A name indicating the usage of the **URL** entry. There are standard uses and there can be implementation-specific uses for this URL. The following value specifies a valid standard usage: <br/>
                    **Browser** – The URL references content that shall be displayed in a web browser to allow enrolling for a new credential if a matching credential is not found. The **Ff** attribute’s URL bit shall be ignored for this usage. <br/>
                    Third parties may extend the use of this attribute with their own attribute values, which shall conform to the guidelines described in [Annex E](../a5.md). <br/>
                    The default value is Browser.</td>
            </tr>
        </tbody>
    </table>

=== "英文"

    A *signature field* (PDF 1.3) is a form field that contains a digital signature (see [12.8], “Digital Signatures”). The field dictionary representing a signature field may contain the additional entries listed in [Table 232](#table232), as well as the standard entries described in [Table 220](#table220). The field type (**FT**) shall be **Sig**, and the field value (**V**), if present, shall be a *signature dictionary* containing the signature and specifying various attributes of the signature field (see [Table 252](#table252)).
    
    !!! note "NOTE 1"
    
        This signature form field serves two primary purposes. The first is to define the form field that will provide the visual signing properties for display but it also may hold information needed later when the actual signing takes place, such as the signature technology to use. This carries information from the author of the document to the software that later does the signing.
    
    !!! note "NOTE 2"
    
        Filling in (signing) the signature field entails updating at least the **V** entry and usually also the **AP** entry of the associated widget annotation. Exporting a signature field typically exports the **T**, **V**, and **AP** entries.
    
    Like any other field, a signature field may be described by a widget annotation dictionary containing entries pertaining to an annotation as well as a field (see [12.5.6.19], “Widget Annotations”). The annotation rectangle (**Rect**) in such a dictionary shall give the position of the field on its page. Signature fields that are not intended to be visible shall have an annotation rectangle that has zero height and width. Conforming readers shall treat such signatures as not visible. Conforming readers shall also treat signatures as not visible if either the **Hidden** bit or the **NoView** bit of the **F** entry is **true**. The **F** entry is described in [Table 164](./s5.md#table164), and annotation flags are described in [Table 165](./s5.md#table165).
    
    The appearance dictionary (AP) of a signature field’s widget annotation defines the field’s visual appearance on the page (see [12.5.5], “Appearance Streams”).
        
    <table id="table232" markdown="span">
        <caption>**Table 232 – Additional entries specific to a signature field**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Lock**</td>
                <td>dictionary</td>
                <td>(Optional; shall be an indirect reference; PDF 1.5) A signature field lock dictionary that specifies a set of form fields that shall be locked when this signature field is signed. Table 233 lists the entries in this dictionary.
                </td>
            </tr>
            <tr>
                <td>**SV**</td>
                <td>dictionary</td>
                <td>(Optional; shall be an indirect reference; PDF 1.5) A seed value dictionary (see [Table 234](#table234)) containing information that constrains the properties of a signature that is applied to this field.</td>
            </tr>
        </tbody>
    </table>
    
    The signature field lock dictionary (described in [Table 233](#table233)) contains field names from the signature seed value dictionary (described in [Table 234](#table234)) that cannot be changed through the user interface of a conforming reader.
        
    <table id="table233" markdown="span">
        <caption>**Table 233 – Entries in a signature field lock dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td>
                <td>name</td>
                <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **SigFieldLock** for a signature field lock dictionary.
                </td>
            </tr>
            <tr>
                <td>**Action**</td>
                <td>name</td>
                <td>(Required) A name which, in conjunction with **Fields**, indicates the set of fields that should be locked. The value shall be one of the following: <br/>
                All &emsp; All fields in the document <br/>
                Include &emsp; All fields specified in Fields <br/>
                Exclude &emsp; All fields except those specified in Fields</td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Required if the value of **Action** is Include or Exclude) An array of text strings containing field names.</td>
            </tr>
        </tbody>
    </table>
    
    The value of the **SV** entry in the field dictionary is a seed value dictionary whose entries (see [Table 234](#table234)) provide constraining information that shall be used at the time the signature is applied. Its **Ff** entry specifies whether the other entries in the dictionary shall be honoured or whether they are merely recommendations.
    
    The seed value dictionary may include seed values for private entries belonging to multiple handlers. A given handler shall use only those entries that are pertinent to itself and ignore the others.
        
    <table id="table234" markdown="span">
        <caption>**Table 234 – Entries in a signature field seed value dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td>
                <td>name</td>
                <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **SV** for a seed value dictionary.
                </td>
            </tr>
            <tr>
                <td>**Ff**</td>
                <td>integer</td>
                <td>(Optional) A set of bit flags specifying the interpretation of specific entries in this dictionary. A value of 1 for the flag indicates that the associated entry is a required constraint. A value of 0 indicates that the associated entry is an optional constraint. Bit positions are 1 (**Filter**); 2 (**SubFilter**); 3 (**V**); 4 (**Reasons**); 5 (**LegalAttestation**); 6 (**AddRevInfo**); and 7 (**DigestMethod**). Default value: 0.
                </td>
            </tr>
            <tr>
                <td>**Filter**</td>
                <td>name</td>
                <td>(Optional) The signature handler that shall be used to sign the signature field. Beginning with PDF 1.7, if **Filter** is specified and the **Ff** entry indicates this entry is a required constraint, then the signature handler specified by this entry shall be used when signing; otherwise, signing shall not take place. **If** Ff indicates that this is an optional constraint, this handler may be used if it is available. If it is not available, a different handler may be used instead.
                </td>
            </tr>
            <tr>
                <td>**SubFilter**</td>
                <td>array</td>
                <td>(Optional) An array of names indicating encodings to use when signing. The first name in the array that matches an encoding supported by the signature handler shall be the encoding that is actually used for signing. If **SubFilter** is specified and the **Ff** entry indicates that this entry is a required constraint, then the first matching encodings shall be used when signing; otherwise, signing shall not take place. If **Ff** indicates that this is an optional constraint, then the first matching encoding shall be used if it is available. If none is available, a different encoding may be used.
                </td>
            </tr>
            <tr>
                <td>**DigestMethod**</td>
                <td>array</td>
                <td>(Optional; PDF 1.7) An array of names indicating acceptable digest algorithms to use while signing. The value shall be one of **SHA1**, **SHA256**, **SHA384**, **SHA512** and **RIPEMD160**. The default value is implementation-specific. <br/>
                    This property is only applicable if the digital credential signing contains RSA public/private keys. If it contains DSA public/ private keys, the digest algorithm is always **SHA1** and this attribute shall be ignored.
                </td>
            </tr>
            <tr>
                <td>**V**</td>
                <td>real</td>
                <td>(Optional) The minimum required capability of the signature field seed value dictionary parser. A value of 1 specifies that the parser shall be able to recognize all seed value dictionary entries in a PDF 1.5 file. A value of 2 specifies that it shall be able to recognize all seed value dictionary entries specified. <br/>
                    The **Ff** entry indicates whether this shall be treated as a required constraint.
                </td>
            </tr>
            <tr>
                <td>**Cert**</td>
                <td>dictionary</td>
                <td>(Optional) A certificate seed value dictionary (see [Table 235](#table235)) containing information about the characteristics of the certificate that shall be used when signing.
                </td>
            </tr>
            <tr>
                <td>**Reasons**</td>
                <td>array</td>
                <td>(Optional) An array of text strings that specifying possible reasons for signing a document. If specified, the reasons supplied in this entry replace those used by conforming products. <br/>
                    If the **Reasons** array is provided and the **Ff** entry indicates that **Reasons** is a required constraint, one of the reasons in the array shall be used for the signature dictionary; otherwise, signing shall not take place. If the **Ff** entry indicates **Reasons** is an optional constraint, one of the reasons in the array may be chosen or a custom reason can be provided. <br/>
                    If the **Reasons** array is omitted or contains a single entry with the value PERIOD (2Eh) and the Ff entry indicates that **Reasons** is a required constraint, the Reason entry shall be omitted from the signature dictionary (see [Table 252](./s8.md#table252)).
                </td>
            </tr>
            <tr>
                <td>**MDP**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.6) A dictionary containing a single entry whose key is **P** and whose value is an integer between 0 and 3. A value of 0 defines the signature as an author signature (see [12.8], “Digital Signatures”). The values 1 through 3 shall be used for certification signatures and correspond to the value of **P** in a **DocMDP** transform parameters dictionary (see [Table 254](./s8.md#table254)). <br/>
                    If this **MDP** key is not present or the **MDP** dictionary does not contain a **P** entry, no rules shall be defined regarding the type of signature or its permissions.
                </td>
            </tr>
            <tr>
                <td>**TimeStamp**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.6) A time stamp dictionary containing two entries:
                    URL  &emsp;  An ASCII string specifying the URL of a time-stamping server, providing a time stamp that is compliant with RFC 3161, Internet X.509 Public Key Infrastructure Time-Stamp Protocol (see the Bibliography). <br/>
                    Ff &emsp; An integer whose value is 1 (the signature shall have a time stamp) or 0 (the signature need not have a time stamp). Default value: 0. <br/>
                    NOTE &emsp; Please see [12.8.3.3], "PKCS#7 Signatures as used in ISO 32000" for more details about hashing.
                </td>
            </tr>
            <tr>
                <td>**LegalAttestation**</td>
                <td>array</td>
                <td>(Optional; PDF 1.6) An array of text strings specifying possible legal attestations (see [12.8.5], “Legal Content Attestations”). The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint.
                </td>
            </tr>
            <tr>
                <td>**AddRevInfo**</td>
                <td>boolean</td>
                <td>(Optional; PDF 1.7) A flag indicating whether revocation checking shall be carried out. If **AddRevInfo** is **true**, the conforming processor shall perform the following additional tasks when signing the signature field: <br/> 
                    Perform revocation checking of the certificate (and the corresponding issuing certificates) used to sign. <br/>
                    Include the revocation information within the signature value. <br/>
                    Three SubFilter values have been defined for ISO 32000. For those values the AddRevInfo value shall be true only if SubFilter is adbe.pkcs7.detached or adbe.pkcs7.sha1. If SubFilter is x509.rsa_sha1, this entry shall be omitted or set to false. Additional SubFilters may be defined that also use AddRevInfo values. <br/>
                    If AddRevInfo is true and the Ff entry indicates this is a required constraint, then the preceding tasks shall be performed. If they cannot be performed, then signing shall fail. <br/>
                    Default value: false <br/>
                    NOTE 1 <br/>
                    &emsp; Revocation information is carried in the signature data as specified by PCKS#7. See [12.8.3.3], "PKCS#7 Signatures as used in ISO 32000". <br/>
                    NOTE 2 <br/>
                    &emsp; The trust anchors used are determined by the signature handlers for both creation and validation.
                </td>
            </tr>
        </tbody>
    </table>
    
    For optional keys that are not present, no constraint shall be placed upon the signature handler for that property when signing.
        
    <table id="table235" markdown="span">
        <caption>**Table 235 – Entries in a certificate seed value dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td>
                <td>name</td>
                <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **SVCert** for a certificate seed value dictionary.
                </td>
            </tr>
            <tr>
                <td>**Ff**</td>
                <td>integer</td>
                <td>(Optional) A set of bit flags specifying the interpretation of specific entries in this dictionary. A value of 1 for the flag means that a signer shall be required to use only the specified values for the entry. A value of 0 means that other values are permissible. Bit positions are 1 (**Subject**); 2 (**Issuer**); 3 (**OID**); 4 (**SubjectDN**); 5 (**Reserved**); 6 (**KeyUsage**); 7 (**URL**). <br/> Default value: 0.</td>
            </tr>
            <tr>
                <td>**Subject**</td>
                <td>array</td>
                <td>(Optional) An array of byte strings containing DER-encoded X.509v3 certificates that are acceptable for signing. X.509v3 certificates are described in RFC 3280, Internet X.509 Public Key Infrastructure, Certificate and Certificate Revocation List (CRL) Profile (see the Bibliography). The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint.</td>
            </tr>
            <tr>
                <td>**SubjectDN**</td>
                <td>array of dictionaries</td>
                <td>(Optional; PDF 1.7) An array of dictionaries, each specifying a Subject Distinguished Name (DN) that shall be present within the certificate for it to be acceptable for signing. The certificate ultimately used for the digital signature shall contain all the attributes specified in each of the dictionaries in this array. (PDF keys and values are mapped to certificate attributes and values.) The certificate is not constrained to use only attribute entries from these dictionaries but may contain additional attributes.The Subject Distinguished Name is described in RFC 3280 (see the Bibliography). The key can be any legal attribute identifier (OID). Attribute names shall contain characters in the set a-z A-Z 0-9 and PERIOD. <br/> Certificate attribute names are used as key names in the dictionaries in this array. Values of the attributes are used as values of the keys. Values shall be text strings. <br/> The value of the corresponding flag in the **Ff** entry indicates whether this entry is a required constraint.</td>
            </tr>
            <tr>
                <td>**KeyUsage**</td>
                <td>array of ASCII strings</td>
                <td>(Optional; PDF 1.7) An array of ASCII strings, where each string specifies an acceptable key-usage extension that shall be present in the signing certificate. Multiple strings specify a range of acceptable key- usage extensions. The key-usage extension is described in RFC 3280. <br/>
                Each character in a string represents a key-usage type, where the order of the characters indicates the key-usage extension it represents. The first through ninth characters in the string, from left to right, represent the required value for the following key-usage extensions: <br/>
                <ol>
                <li>1 digitalSignature</li>
                <li>2 non-Repudiation</li>
                <li>3 keyEncipherment</li>
                <li>4 dataEncipherment</li>
                <li>5 keyAgreement</li>
                <li>6 keyCertSign</li>
                <li>7 cRLSign</li>
                <li>8 encipherOnly</li>
                <li>9 decipherOnly</li>
                </ol>            
                Any additional characters shall be ignored. Any missing characters or characters that are not one of the following values, shall be treated as ‘X’. The following character values shall be supported: <br/>
                <ol>
                <li> 0 Corresponding key-usage shall not be set. </li>
                <li> 1 Corresponding key-usage shall be set. </li>
                <li> X State of the corresponding key-usage does not matter. </li>
                </ol>            
                EXAMPLE 1 <br/>            
                &emsp; The string values ‘1’ and ‘1XXXXXXXX’ represent settings where the key-usage type digitalSignature is set and the state of all other key-usage types do not matter. <br/>
                The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint.</td>
            </tr>
            <tr>
                <td>**Issuer**</td>
                <td>array</td>
                <td>(Optional) An array of byte strings containing DER-encoded X.509v3 certificates of acceptable issuers. If the signer’s certificate refers to any of the specified issuers (either directly or indirectly), the certificate shall be considered acceptable for signing. The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint. <br/>
                    This array may contain self-signed certificates.</td>
            </tr>
            <tr>
                <td>**OID**</td>
                <td>array</td>
                <td>(Optional) An array of byte strings that contain Object Identifiers (OIDs) of the certificate policies that shall be present in the signing certificate. <br/>
                EXAMPLE 2 <br/>
                &emsp; An example of such a string is: (2.16.840.1.113733.1.7.1.1). <br/>
                This field shall only be used if the value of **Issuer** is not empty. The certificate policies extension is described in RFC 3280 (see the Bibliography). The value of the corresponding flag in the **Ff** entry indicates whether this is a required constraint.</td>
            </tr>
            <tr>
                <td>**URL**</td>
                <td>ASCII string</td>
                <td>(Optional) A URL, the use for which shall be defined by the **URLType** entry.</td>
            </tr>
            <tr>
                <td>**URLType**</td>
                <td>Name</td>
                <td>(Optional; PDF 1.7) A name indicating the usage of the **URL** entry. There are standard uses and there can be implementation-specific uses for this URL. The following value specifies a valid standard usage: <br/>
                    **Browser** – The URL references content that shall be displayed in a web browser to allow enrolling for a new credential if a matching credential is not found. The **Ff** attribute’s URL bit shall be ignored for this usage. <br/>
                    Third parties may extend the use of this attribute with their own attribute values, which shall conform to the guidelines described in [Annex E](../a5.md). <br/>
                    The default value is Browser.</td>
            </tr>
        </tbody>
    </table>


## 12.7.5 表单操作

**12.7.5 Form Actions**

### 12.7.5.1 概述

**12.7.5.1 General**

=== "中文"

    Interactive forms also support special types of actions in addition to those described in [12.6.4], “Action Types”:
    
    - submit-form action
    - reset-form action
    - import-data action

=== "英文"

    Interactive forms also support special types of actions in addition to those described in [12.6.4], “Action Types”:
    
    - submit-form action
    - reset-form action
    - import-data action

### 12.7.5.2 提交表单操作

**12.7.5.2 Submit-Form Action**

=== "中文"

    Upon invocation of a *submit-form action*, a conforming processor shall transmit the names and values of selected interactive form fields to a specified uniform resource locator (URL),
    
    !!! note "NOTE"
    
        Presumably, the URL is the address of a Web server that will process them and send back a response.
    
    The value of the action dictionary’s **Flags** entry shall be an non-negative integer containing flags specifying various characteristics of the action. Bit positions within the flag word shall be numbered starting with 1 (low-order). [Table 237](#table237) shows the meanings of the flags; all undefined flag bits shall be reserved and shall be set to 0.
        
    <table id="table236" markdown="span">
        <caption>**Table 236 – Additional entries specific to a submit-form action**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**S**</td>
                <td>name</td>
                <td>(Required) The type of action that this dictionary describes; shall be **SubmitForm** for a submit-form action.
                </td>
            </tr>
            <tr>
                <td>**F**</td>
                <td>file specification</td>
                <td>(Required) A URL file specification (see [7.11.5], “URL Specifications”) giving the uniform resource locator (URL) of the script at the Web server that will process the submission.</td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Optional) An array identifying which fields to include in the submission or which to exclude, depending on the setting of the Include/Exclude flag in the **Flags** entry (see [Table 237](#table237)). Each element of the array shall be either an indirect reference to a field dictionary or (PDF 1.3) a text string representing the fully qualified name of a field. Elements of both kinds may be mixed in the same array. <br/>
                If this entry is omitted, the Include/Exclude flag shall be ignored, and all fields in the document’s interactive form shall be submitted except those whose NoExport flag (see [Table 221](#table221)) is set. Fields with no values may also be excluded, as dictated by the value of the IncludeNoValueFields flag; see [Table 237](#table237).</td>
            </tr>
            <tr>
                <td>**Flags**</td>
                <td>integer</td>
                <td>(Optional; inheritable) A set of flags specifying various characteristics of the action (see [Table 237](#table237)). Default value: 0.</td>
            </tr>
        </tbody>
    </table>
        
    <table id="table237" markdown="span">
        <caption>**Table 237 – Flags for submit-form actions**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**1**</td>
                <td>Include/Exclude</td>
                <td>If clear, the **Fields** array (see Table 236) specifies which fields to include in the submission. (All descendants of the specified fields in the field hierarchy shall be submitted as well.) <br/>
                If set, the **Fields** array tells which fields to exclude. All fields in the document’s interactive form shall be submitted except those listed in the **Fields** array and those whose NoExport flag (see [Table 221](#table221)) is set and fields with no values if the IncludeNoValueFields flag is clear.
                </td>
            </tr>
            <tr>
                <td>**2**</td>
                <td>IncludeNoValueFields</td>
                <td>If set, all fields designated by the **Fields** array and the Include/Exclude flag shall be submitted, regardless of whether they have a value (**V** entry in the field dictionary). For fields without a value, only the field name shall be transmitted. <br/>
                    If clear, fields without a value shall not be submitted.</td>
            </tr>
            <tr>
                <td>**3**</td>
                <td>ExportFormat</td>
                <td>Meaningful only if the SubmitPDF and XFDF flags are clear. If set, field names and values shall be submitted in HTML Form format. If clear, they shall be submitted in Forms Data Format (FDF); see [12.7.7], “Forms Data Format.”</td>
            </tr>
            <tr>
                <td>**4**</td>
                <td>GetMethod</td>
                <td>If set, field names and values shall be submitted using an HTTP GET request. If clear, they shall be submitted using a POST request. This flag is meaningful only when the ExportFormat flag is set; if ExportFormat is clear, this flag shall also be clear.</td>
            </tr>
            <tr>
                <td>**5**</td>
                <td>SubmitCoordinates</td>
                <td>If set, the coordinates of the mouse click that caused the submit-form action shall be transmitted as part of the form data. The coordinate values are relative to the upper-left corner of the field’s widget annotation rectangle. They shall be represented in the data in the format <br/>
                    name . x = xval & name . y = yval <br/> where name is the field’s mapping name (**TM** in the field dictionary) if present; otherwise, name is the field name. If the value of the **TM** entry is a single ASCII SPACE (20h) character, both the name and the ASCII PERIOD (2Eh) following it shall be suppressed, resulting in the format <br/>
                    x = xval & y = yval <br/>
                    This flag shall be used only when the ExportFormat flag is set. If ExportFormat is clear, this flag shall also be clear.</td>
            </tr>
            <tr>
                <td>**6**</td>
                <td>XFDF</td>
                <td>(PDF 1.4) shall be used only if the SubmitPDF flags are clear. If set, field names and values shall be submitted as XFDF.</td>
            </tr>
            <tr>
                <td>**7**</td>
                <td>IncludeAppendSaves</td>
                <td>(PDF 1.4) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear). If set, the submitted FDF file shall include the contents of all incremental updates to the underlying PDF document, as contained in the **Differences** entry in the FDF dictionary (see [Table 243](#table243)). If clear, the incremental updates shall not be included.</td>
            </tr>
            <tr>
                <td>**8**</td>
                <td>IncludeAnnotations</td>
                <td>(PDF 1.4) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear). If set, the submitted FDF file shall include includes all markup annotations in the underlying PDF document (see [12.5.6.2], “Markup Annotations”). If clear, markup annotations shall not be included.</td>
            </tr>
            <tr>
                <td>**9**</td>
                <td>SubmitPDF</td>
                <td>(PDF 1.4) If set, the document shall be submitted as PDF, using the MIME content type application / pdf (described in Internet RFC 2045, *Multipurpose Internet Mail Extensions* (MIME), Part One: Format of Internet Message Bodies; see the Bibliography). If set, all other flags shall be ignored except GetMethod.</td>
            </tr>
            <tr>
                <td>**10**</td>
                <td>CanonicalFormat</td>
                <td>(PDF 1.4) If set, any submitted field values representing dates shall be converted to the standard format described in [7.9.4], “Dates.” <br/>
                    NOTE 1 <br/>
                     &emsp; The interpretation of a form field as a date is not specified explicitly in the field itself but only in the JavaScript code that processes it.
                </td>
            </tr>
            <tr>
                <td>**11**</td>
                <td>ExclNonUserAnnots</td>
                <td>(PDF 1.4) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear) and the IncludeAnnotations flag is set. If set, it shall include only those markup annotations whose **T** entry (see [Table 170](./s5.md#table170)) matches the name of the current user, as determined by the remote server to which the form is being submitted. <br/>
                    NOTE 2 <br/>
                    &emsp; The T entry for markup annotations specifies the text label that is displayed in the title bar of the annotation’s pop-up window and is assumed to represent the name of the user authoring the annotation. <br/>
                    NOTE 3 <br/>
                    &emsp; This allows multiple users to collaborate in annotating a single remote PDF document without affecting one another’s annotations.</td>
            </tr>
            <tr>
                <td>**12**</td>
                <td>ExclFKey</td>
                <td>(PDF 1.4) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear). If set, the submitted FDF shall exclude the **F** entry.</td>
            </tr>
            <tr>
                <td>**14**</td>
                <td>EmbedForm</td>
                <td>(PDF 1.5) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear). If set, the **F** entry of the submitted FDF shall be a file specification containing an embedded file stream representing the PDF file from which the FDF is being submitted.</td>
            </tr>
        </tbody>
    </table>
    
    The set of fields whose names and values are to be submitted shall be defined by the **Fields** array in the action
    dictionary ([Table 236](#table236)) together with the Include/Exclude and IncludeNoValueFields flags in the **Flags** entry
    ([Table 237](#table237)). Each element of the **Fields** array shall identify an interactive form field, either by an indirect
    reference to its field dictionary or (PDF 1.3) by its fully qualified field name (see [12.7.3.2], “Field Names”). If the
    Include/Exclude flag is clear, the submission consists of all fields listed in the **Fields** array, along with any
    descendants of those fields in the field hierarchy. If the Include/Exclude flag is set, the submission shall consist
    of all fields in the document’s interactive form except those listed in the **Fields** array.
    
    The NoExport flag in the field dictionary’s **Ff** entry (see [Table 220](#table220) and [Table 221](#table221)) takes precedence over the
    action’s **Fields** array and Include/Exclude flag. Fields whose NoExport flag is set shall not be included in a
    submit-form action.
    
    Field names and values may be submitted in any of the following formats, depending on the settings of the
    action’s ExportFormat, SubmitPDF, and XFDF flags (see the [Bibliography](../bibliography.md) for references):
    
    - HTML Form format (described in the HTML 4.01 Specification)
    - Forms Data Format (FDF), which is described in [12.7.7], “Forms Data Format.”
    - XFDF, a version of FDF based on XML. XFDF is described in the Adobe technical note XML Forms Data Format Specification, Version 2.0. XML is described in the W3C document Extensible Markup Language (XML) 1.1)
    - PDF (in this case, the entire document shall be submitted rather than individual fields and values).
    
    The name submitted for each field shall be its fully qualified name (see [12.7.3.2], “Field Names”), and the value shall be specified by the V entry in its field dictionary.
    
    For pushbutton fields submitted in FDF, the value submitted shall be that of the **AP** entry in the field’s widget annotation dictionary. If the submit-form action dictionary contains no **Fields** entry, such pushbutton fields shall not be submitted.
    
    Fields with no value (that is, whose field dictionary does not contain a **V** entry) are ordinarily not included in the submission. The submit-form action’s IncludeNoValueFields flag may override this behaviour. If this flag is set, such valueless fields shall be included in the submission by name only, with no associated value.

=== "英文"

    Upon invocation of a *submit-form action*, a conforming processor shall transmit the names and values of selected interactive form fields to a specified uniform resource locator (URL),
    
    !!! note "NOTE"
    
        Presumably, the URL is the address of a Web server that will process them and send back a response.
    
    The value of the action dictionary’s **Flags** entry shall be an non-negative integer containing flags specifying various characteristics of the action. Bit positions within the flag word shall be numbered starting with 1 (low-order). [Table 237](#table237) shows the meanings of the flags; all undefined flag bits shall be reserved and shall be set to 0.
        
    <table id="table236" markdown="span">
        <caption>**Table 236 – Additional entries specific to a submit-form action**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**S**</td>
                <td>name</td>
                <td>(Required) The type of action that this dictionary describes; shall be **SubmitForm** for a submit-form action.
                </td>
            </tr>
            <tr>
                <td>**F**</td>
                <td>file specification</td>
                <td>(Required) A URL file specification (see [7.11.5], “URL Specifications”) giving the uniform resource locator (URL) of the script at the Web server that will process the submission.</td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Optional) An array identifying which fields to include in the submission or which to exclude, depending on the setting of the Include/Exclude flag in the **Flags** entry (see [Table 237](#table237)). Each element of the array shall be either an indirect reference to a field dictionary or (PDF 1.3) a text string representing the fully qualified name of a field. Elements of both kinds may be mixed in the same array. <br/>
                If this entry is omitted, the Include/Exclude flag shall be ignored, and all fields in the document’s interactive form shall be submitted except those whose NoExport flag (see [Table 221](#table221)) is set. Fields with no values may also be excluded, as dictated by the value of the IncludeNoValueFields flag; see [Table 237](#table237).</td>
            </tr>
            <tr>
                <td>**Flags**</td>
                <td>integer</td>
                <td>(Optional; inheritable) A set of flags specifying various characteristics of the action (see [Table 237](#table237)). Default value: 0.</td>
            </tr>
        </tbody>
    </table>
        
    <table id="table237" markdown="span">
        <caption>**Table 237 – Flags for submit-form actions**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**1**</td>
                <td>Include/Exclude</td>
                <td>If clear, the **Fields** array (see Table 236) specifies which fields to include in the submission. (All descendants of the specified fields in the field hierarchy shall be submitted as well.) <br/>
                If set, the **Fields** array tells which fields to exclude. All fields in the document’s interactive form shall be submitted except those listed in the **Fields** array and those whose NoExport flag (see [Table 221](#table221)) is set and fields with no values if the IncludeNoValueFields flag is clear.
                </td>
            </tr>
            <tr>
                <td>**2**</td>
                <td>IncludeNoValueFields</td>
                <td>If set, all fields designated by the **Fields** array and the Include/Exclude flag shall be submitted, regardless of whether they have a value (**V** entry in the field dictionary). For fields without a value, only the field name shall be transmitted. <br/>
                    If clear, fields without a value shall not be submitted.</td>
            </tr>
            <tr>
                <td>**3**</td>
                <td>ExportFormat</td>
                <td>Meaningful only if the SubmitPDF and XFDF flags are clear. If set, field names and values shall be submitted in HTML Form format. If clear, they shall be submitted in Forms Data Format (FDF); see [12.7.7], “Forms Data Format.”</td>
            </tr>
            <tr>
                <td>**4**</td>
                <td>GetMethod</td>
                <td>If set, field names and values shall be submitted using an HTTP GET request. If clear, they shall be submitted using a POST request. This flag is meaningful only when the ExportFormat flag is set; if ExportFormat is clear, this flag shall also be clear.</td>
            </tr>
            <tr>
                <td>**5**</td>
                <td>SubmitCoordinates</td>
                <td>If set, the coordinates of the mouse click that caused the submit-form action shall be transmitted as part of the form data. The coordinate values are relative to the upper-left corner of the field’s widget annotation rectangle. They shall be represented in the data in the format <br/>
                    name . x = xval & name . y = yval <br/> where name is the field’s mapping name (**TM** in the field dictionary) if present; otherwise, name is the field name. If the value of the **TM** entry is a single ASCII SPACE (20h) character, both the name and the ASCII PERIOD (2Eh) following it shall be suppressed, resulting in the format <br/>
                    x = xval & y = yval <br/>
                    This flag shall be used only when the ExportFormat flag is set. If ExportFormat is clear, this flag shall also be clear.</td>
            </tr>
            <tr>
                <td>**6**</td>
                <td>XFDF</td>
                <td>(PDF 1.4) shall be used only if the SubmitPDF flags are clear. If set, field names and values shall be submitted as XFDF.</td>
            </tr>
            <tr>
                <td>**7**</td>
                <td>IncludeAppendSaves</td>
                <td>(PDF 1.4) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear). If set, the submitted FDF file shall include the contents of all incremental updates to the underlying PDF document, as contained in the **Differences** entry in the FDF dictionary (see [Table 243](#table243)). If clear, the incremental updates shall not be included.</td>
            </tr>
            <tr>
                <td>**8**</td>
                <td>IncludeAnnotations</td>
                <td>(PDF 1.4) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear). If set, the submitted FDF file shall include includes all markup annotations in the underlying PDF document (see [12.5.6.2], “Markup Annotations”). If clear, markup annotations shall not be included.</td>
            </tr>
            <tr>
                <td>**9**</td>
                <td>SubmitPDF</td>
                <td>(PDF 1.4) If set, the document shall be submitted as PDF, using the MIME content type application / pdf (described in Internet RFC 2045, *Multipurpose Internet Mail Extensions* (MIME), Part One: Format of Internet Message Bodies; see the Bibliography). If set, all other flags shall be ignored except GetMethod.</td>
            </tr>
            <tr>
                <td>**10**</td>
                <td>CanonicalFormat</td>
                <td>(PDF 1.4) If set, any submitted field values representing dates shall be converted to the standard format described in [7.9.4], “Dates.” <br/>
                    NOTE 1 <br/>
                     &emsp; The interpretation of a form field as a date is not specified explicitly in the field itself but only in the JavaScript code that processes it.
                </td>
            </tr>
            <tr>
                <td>**11**</td>
                <td>ExclNonUserAnnots</td>
                <td>(PDF 1.4) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear) and the IncludeAnnotations flag is set. If set, it shall include only those markup annotations whose **T** entry (see [Table 170](./s5.md#table170)) matches the name of the current user, as determined by the remote server to which the form is being submitted. <br/>
                    NOTE 2 <br/>
                    &emsp; The T entry for markup annotations specifies the text label that is displayed in the title bar of the annotation’s pop-up window and is assumed to represent the name of the user authoring the annotation. <br/>
                    NOTE 3 <br/>
                    &emsp; This allows multiple users to collaborate in annotating a single remote PDF document without affecting one another’s annotations.</td>
            </tr>
            <tr>
                <td>**12**</td>
                <td>ExclFKey</td>
                <td>(PDF 1.4) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear). If set, the submitted FDF shall exclude the **F** entry.</td>
            </tr>
            <tr>
                <td>**14**</td>
                <td>EmbedForm</td>
                <td>(PDF 1.5) shall be used only when the form is being submitted in Forms Data Format (that is, when both the XFDF and ExportFormat flags are clear). If set, the **F** entry of the submitted FDF shall be a file specification containing an embedded file stream representing the PDF file from which the FDF is being submitted.</td>
            </tr>
        </tbody>
    </table>
    
    The set of fields whose names and values are to be submitted shall be defined by the **Fields** array in the action
    dictionary ([Table 236](#table236)) together with the Include/Exclude and IncludeNoValueFields flags in the **Flags** entry
    ([Table 237](#table237)). Each element of the **Fields** array shall identify an interactive form field, either by an indirect
    reference to its field dictionary or (PDF 1.3) by its fully qualified field name (see [12.7.3.2], “Field Names”). If the
    Include/Exclude flag is clear, the submission consists of all fields listed in the **Fields** array, along with any
    descendants of those fields in the field hierarchy. If the Include/Exclude flag is set, the submission shall consist
    of all fields in the document’s interactive form except those listed in the **Fields** array.
    
    The NoExport flag in the field dictionary’s **Ff** entry (see [Table 220](#table220) and [Table 221](#table221)) takes precedence over the
    action’s **Fields** array and Include/Exclude flag. Fields whose NoExport flag is set shall not be included in a
    submit-form action.
    
    Field names and values may be submitted in any of the following formats, depending on the settings of the
    action’s ExportFormat, SubmitPDF, and XFDF flags (see the [Bibliography](../bibliography.md) for references):
    
    - HTML Form format (described in the HTML 4.01 Specification)
    - Forms Data Format (FDF), which is described in [12.7.7], “Forms Data Format.”
    - XFDF, a version of FDF based on XML. XFDF is described in the Adobe technical note XML Forms Data Format Specification, Version 2.0. XML is described in the W3C document Extensible Markup Language (XML) 1.1)
    - PDF (in this case, the entire document shall be submitted rather than individual fields and values).
    
    The name submitted for each field shall be its fully qualified name (see [12.7.3.2], “Field Names”), and the value shall be specified by the V entry in its field dictionary.
    
    For pushbutton fields submitted in FDF, the value submitted shall be that of the **AP** entry in the field’s widget annotation dictionary. If the submit-form action dictionary contains no **Fields** entry, such pushbutton fields shall not be submitted.
    
    Fields with no value (that is, whose field dictionary does not contain a **V** entry) are ordinarily not included in the submission. The submit-form action’s IncludeNoValueFields flag may override this behaviour. If this flag is set, such valueless fields shall be included in the submission by name only, with no associated value.

### 12.7.5.3 重置表单操作

**12.7.5.3 Reset-Form Action**

=== "中文"

    Upon invocation of a reset-form action, a conforming processor shall reset selected interactive form fields to their default values; that is, it shall set the value of the **V** entry in the field dictionary to that of the **DV** entry (see [Table 220](#table220)). If no default value is defined for a field, its **V** entry shall be removed. For fields that can have no value (such as pushbuttons), the action has no effect. Table 238 shows the action dictionary entries specific to this type of action.
    
    The value of the action dictionary’s **Flags** entry is a non-negative containing flags specifying various characteristics of the action. Bit positions within the flag word shall be numbered starting from 1 (low-order). Only one flag is defined for this type of action. All undefined flag bits shall be reserved and shall be set to 0.
        
    <table id="table238" markdown="span">
        <caption>**Table 238 – Additional entries specific to a reset-form action**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**S**</td>
                <td>name</td>
                <td>(Required) The type of action that this dictionary describes; shall be **ResetForm** for a reset-form action.
                </td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Optional) An array identifying which fields to reset or which to exclude from resetting, depending on the setting of the Include/ Exclude flag in the **Flags** entry (see [Table 239](#table239)). Each element of the array shall be either an indirect reference to a field dictionary or (PDF 1.3) a text string representing the fully qualified name of a field. Elements of both kinds may be mixed in the same array. <br/>
                    If this entry is omitted, the Include/Exclude flag shall be ignored; all fields in the document’s interactive form are reset.
                </td>
            </tr>
            <tr>
                <td>**Flags**</td>
                <td>integer</td>
                <td>(Optional; inheritable) A set of flags specifying various characteristics of the action (see [Table 239](#table239)). Default value: 0.
                </td>
            </tr>
        </tbody>
    </table>
        
    <table id="table239" markdown="span">
        <caption>**Table 239 – Flag for reset-form actions**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**1**</td>
                <td>Include/Exclude</td>
                <td>If clear, the **Fields** array (see Table 238) specifies which fields to reset. (All descendants of the specified fields in the field hierarchy are reset as well.) If set, the **Fields** array indicates which fields to exclude from resetting; that is, all fields in the document’s interactive form shall be reset except those listed in the **Fields** array.
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    Upon invocation of a reset-form action, a conforming processor shall reset selected interactive form fields to their default values; that is, it shall set the value of the **V** entry in the field dictionary to that of the **DV** entry (see [Table 220](#table220)). If no default value is defined for a field, its **V** entry shall be removed. For fields that can have no value (such as pushbuttons), the action has no effect. Table 238 shows the action dictionary entries specific to this type of action.
    
    The value of the action dictionary’s **Flags** entry is a non-negative containing flags specifying various characteristics of the action. Bit positions within the flag word shall be numbered starting from 1 (low-order). Only one flag is defined for this type of action. All undefined flag bits shall be reserved and shall be set to 0.
        
    <table id="table238" markdown="span">
        <caption>**Table 238 – Additional entries specific to a reset-form action**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**S**</td>
                <td>name</td>
                <td>(Required) The type of action that this dictionary describes; shall be **ResetForm** for a reset-form action.
                </td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Optional) An array identifying which fields to reset or which to exclude from resetting, depending on the setting of the Include/ Exclude flag in the **Flags** entry (see [Table 239](#table239)). Each element of the array shall be either an indirect reference to a field dictionary or (PDF 1.3) a text string representing the fully qualified name of a field. Elements of both kinds may be mixed in the same array. <br/>
                    If this entry is omitted, the Include/Exclude flag shall be ignored; all fields in the document’s interactive form are reset.
                </td>
            </tr>
            <tr>
                <td>**Flags**</td>
                <td>integer</td>
                <td>(Optional; inheritable) A set of flags specifying various characteristics of the action (see [Table 239](#table239)). Default value: 0.
                </td>
            </tr>
        </tbody>
    </table>
        
    <table id="table239" markdown="span">
        <caption>**Table 239 – Flag for reset-form actions**</caption>
        <thead>
            <tr>
                <th>**Bit position**</th>
                <th>**Name**</th>
                <th>**Meaning**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**1**</td>
                <td>Include/Exclude</td>
                <td>If clear, the **Fields** array (see Table 238) specifies which fields to reset. (All descendants of the specified fields in the field hierarchy are reset as well.) If set, the **Fields** array indicates which fields to exclude from resetting; that is, all fields in the document’s interactive form shall be reset except those listed in the **Fields** array.
                </td>
            </tr>
        </tbody>
    </table>


### 12.7.5.4 导入数据操作

**12.7.5.4 Import-Data Action**

=== "中文"

    Upon invocation of an *import-data action*, a conforming processor shall import Forms Data Format (FDF) data into the document’s interactive form from a specified file.
        
    <table id="table240" markdown="span">
        <caption>**Table 240 – Additional entries specific to an import-data action**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**S**</td>
                <td>name</td>
                <td>(Required) The type of action that this dictionary describes; shall be **ImportData** for an import-data action.
                </td>
            </tr>
            <tr>
                <td>**F**</td>
                <td>file specification</td>
                <td>(Required) The FDF file from which to import the data.
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    Upon invocation of an *import-data action*, a conforming processor shall import Forms Data Format (FDF) data into the document’s interactive form from a specified file.
        
    <table id="table240" markdown="span">
        <caption>**Table 240 – Additional entries specific to an import-data action**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**S**</td>
                <td>name</td>
                <td>(Required) The type of action that this dictionary describes; shall be **ImportData** for an import-data action.
                </td>
            </tr>
            <tr>
                <td>**F**</td>
                <td>file specification</td>
                <td>(Required) The FDF file from which to import the data.
                </td>
            </tr>
        </tbody>
    </table>


## 12.7.6 命名页面

**12.7.6 Named Pages**

=== "中文"

    The optional **Pages** entry (PDF 1.3) in a document’s name dictionary (see [7.7.4], “Name Dictionary”) contains a name tree that maps name strings to individual pages within the document. Naming a page allows it to be referenced in two different ways:
    
    
    - An import-data action can add the named page to the document into which FDF is being imported, either as a page or as a button appearance.
    - A script executed by a JavaScript action can add the named page to the current document as a regular page.\\\
    
    A named page that is intended to be visible to a user shall be left in the page tree (see [7.7.3], “Page Tree”), and there shall be a reference to it in the appropriate leaf node of the name dictionary’s **Pages** tree. If the page is not intended to be displayed by the reader, it shall be referenced from the name dictionary’s **Templates** tree instead. Such invisible pages shall have an object type of **Template** rather than **Page** and shall have no **Parent** or **B** entry (see [Table 30](../c7/s7.md)).

=== "英文"

    The optional **Pages** entry (PDF 1.3) in a document’s name dictionary (see [7.7.4], “Name Dictionary”) contains a name tree that maps name strings to individual pages within the document. Naming a page allows it to be referenced in two different ways:
    
    
    - An import-data action can add the named page to the document into which FDF is being imported, either as a page or as a button appearance.
    - A script executed by a JavaScript action can add the named page to the current document as a regular page.
    
    A named page that is intended to be visible to a user shall be left in the page tree (see [7.7.3], “Page Tree”), and there shall be a reference to it in the appropriate leaf node of the name dictionary’s **Pages** tree. If the page is not intended to be displayed by the reader, it shall be referenced from the name dictionary’s **Templates** tree instead. Such invisible pages shall have an object type of **Template** rather than **Page** and shall have no **Parent** or **B** entry (see [Table 30](../c7/s7.md)).


## 12.7.7 表单数据格式

**12.7.7 Forms Data Format**

### 12.7.7.1 概述

**12.7.7.1 General**

=== "中文"
    
    This sub-clause describes Forms Data Format (FDF), the file format used for interactive form data (PDF 1.2). FDF can be used when submitting form data to a server, receiving the response, and incorporating it into the interactive form. It can also be used to export form data to stand-alone files that can be stored, transmitted electronically, and imported back into the corresponding PDF interactive form. In addition, beginning in PDF 1.3, FDF can be used to define a container for annotations that are separate from the PDF document to which they apply.
    
    FDF is based on PDF; it uses the same syntax and has essentially the same file structure ([7.5], “File Structure”). However, it differs from PDF in the following ways:
    
    - The cross-reference table ([7.5.4], “Cross-Reference Table”) is optional.
    - FDF files shall not be updated (see [7.5.6], “Incremental Updates”). Objects shall only be of generation 0, and no two objects within an FDF file shall have the same object number.
    - The document structure is much simpler than PDF, since the body of an FDF document consists of only one required object.
    - The length of a stream shall not be specified by an indirect object.
    
    FDF uses the MIME content type application / vnd . fdf. On the Windows and UNIX platforms, FDF files have the extension . fdf; on Mac OS, they have file type ' FDF '.

=== "英文"
    
    This sub-clause describes Forms Data Format (FDF), the file format used for interactive form data (PDF 1.2). FDF can be used when submitting form data to a server, receiving the response, and incorporating it into the interactive form. It can also be used to export form data to stand-alone files that can be stored, transmitted electronically, and imported back into the corresponding PDF interactive form. In addition, beginning in PDF 1.3, FDF can be used to define a container for annotations that are separate from the PDF document to which they apply.
    
    FDF is based on PDF; it uses the same syntax and has essentially the same file structure ([7.5], “File Structure”). However, it differs from PDF in the following ways:
    
    - The cross-reference table ([7.5.4], “Cross-Reference Table”) is optional.
    - FDF files shall not be updated (see [7.5.6], “Incremental Updates”). Objects shall only be of generation 0, and no two objects within an FDF file shall have the same object number.
    - The document structure is much simpler than PDF, since the body of an FDF document consists of only one required object.
    - The length of a stream shall not be specified by an indirect object.
    
    FDF uses the MIME content type application / vnd . fdf. On the Windows and UNIX platforms, FDF files have the extension . fdf; on Mac OS, they have file type ' FDF '.


### 12.7.7.2 FDF文件结构

**12.7.7.2 FDF File Structure**

#### 12.7.7.2.1 概述

**12.7.7.2.1 General**

=== "中文"

    An FDF file shall be structured in essentially the same way as a PDF file but contains only those elements required for the export and import of interactive form and annotation data. It consists of three required elements and one optional element (see [Figure 65](#f65)):
    
    - A one-line header identifying the version number of the PDF specification to which the file conforms
    - A body containing the objects that make up the content of the file
    - An optional cross-reference table containing information about the indirect objects in the file
    - An optional trailer giving the location of the cross-reference table and of certain special objects within the body of the file
    
    <span id="f65"></span>
    
    ![123](./imgs/f65.png)

=== "英文"

    An FDF file shall be structured in essentially the same way as a PDF file but contains only those elements required for the export and import of interactive form and annotation data. It consists of three required elements and one optional element (see [Figure 65](#f65-1)):
    
    - A one-line header identifying the version number of the PDF specification to which the file conforms
    - A body containing the objects that make up the content of the file
    - An optional cross-reference table containing information about the indirect objects in the file
    - An optional trailer giving the location of the cross-reference table and of certain special objects within the body of the file
    
    <span id="f65-1"></span>
    
    ![123](./imgs/f65.png)

#### 12.7.7.2.2 FDF标头

**12.7.7.2.2 FDF Header**

=== "中文"

    The first line of an FDF file shall be a header, which shall contain
    
        %FDF-1.2
    
    The version number is given by the **Version** entry in the FDF catalogue dictionary (see [12.7.7.3], “FDF Catalog”).

=== "英文"

    The first line of an FDF file shall be a header, which shall contain
    
        %FDF-1.2
    
    The version number is given by the **Version** entry in the FDF catalogue dictionary (see [12.7.7.3], “FDF Catalog”).


#### 12.7.7.2.3 FDF正文

**12.7.7.2.3 FDF Body**

=== "中文"
    
    The body of an FDF file shall consist of a sequence of indirect objects representing the file’s catalogue (see [12.7.7.3], “FDF Catalog”) and any additional objects that the catalogue references. The objects are of the same basic types described in [7.5], “File Structure” (other than the %PDF–n.m and %%EOF comments described in [7.5], “File Structure”) have no semantics. They are not necessarily preserved by applications that edit PDF files.” Just as in PDF, objects in FDF can be direct or indirect.

=== "英文"
    
    The body of an FDF file shall consist of a sequence of indirect objects representing the file’s catalogue (see [12.7.7.3], “FDF Catalog”) and any additional objects that the catalogue references. The objects are of the same basic types described in [7.5], “File Structure” (other than the %PDF–n.m and %%EOF comments described in [7.5], “File Structure”) have no semantics. They are not necessarily preserved by applications that edit PDF files.” Just as in PDF, objects in FDF can be direct or indirect.


#### 12.7.7.2.4 FDF尾部

**12.7.7.2.4 FDF Trailer**

=== "中文"

    The trailer of an FDF file enables a reader to find significant objects quickly within the body of the file. The last line of the file contains only the end-of-file marker, %%EOF. This marker shall be preceded by the *FDF trailer dictionary*, consisting of the keyword **trailer** followed by a series of one or more key-value pairs enclosed in double angle brackets (<< … >>) (using LESS-THAN SIGNs (3Ch) and GREATER-THAN SIGNs (3Eh)). The only required key is **Root**, whose value is an indirect reference to the file’s catalogue dictionary (see [Table 242](#table242)). The trailer may optionally contain additional entries for objects that are referenced from within the catalogue.
    
            
    <table id="table241" markdown="span">
        <caption>**Table 241 – Entry in the FDF trailer dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Root**</td>
                <td>dictionary</td>
                <td>(Required; shall be an indirect reference) The **Catalog** object for this FDF file (see [12.7.7.3], “FDF Catalog”).
                </td>
            </tr>
        </tbody>
    </table>
    
    Thus, the trailer has the overall structure
        
        trailer
            << /Root c 0 R
               key<sub>2</sub> value<sub>2</sub>
               …
               key<sub>n</sub> value<sub>n</sub>
            >>
        %%EOF
    
    where c is the object number of the file’s catalogue dictionary.

=== "英文"

    The trailer of an FDF file enables a reader to find significant objects quickly within the body of the file. The last line of the file contains only the end-of-file marker, %%EOF. This marker shall be preceded by the *FDF trailer dictionary*, consisting of the keyword **trailer** followed by a series of one or more key-value pairs enclosed in double angle brackets (<< … >>) (using LESS-THAN SIGNs (3Ch) and GREATER-THAN SIGNs (3Eh)). The only required key is **Root**, whose value is an indirect reference to the file’s catalogue dictionary (see [Table 242](#table242)). The trailer may optionally contain additional entries for objects that are referenced from within the catalogue.
    
            
    <table id="table241" markdown="span">
        <caption>**Table 241 – Entry in the FDF trailer dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Root**</td>
                <td>dictionary</td>
                <td>(Required; shall be an indirect reference) The **Catalog** object for this FDF file (see [12.7.7.3], “FDF Catalog”).
                </td>
            </tr>
        </tbody>
    </table>
    
    Thus, the trailer has the overall structure
        
        trailer
            << /Root c 0 R
               key<sub>2</sub> value<sub>2</sub>
               …
               key<sub>n</sub> value<sub>n</sub>
            >>
        %%EOF
    
    where c is the object number of the file’s catalogue dictionary.

### 12.7.7.3 FDF目录

**12.7.7.3 FDF Catalog**

#### 12.7.7.3.1 概述

**12.7.7.3.1 General**

=== "中文"

    The root node of an FDF file’s object hierarchy is the **Catalog** dictionary, located by means of the **Root** entry in the file’s trailer dictionary (see FDF Trailer in [12.7.7.2], “FDF File Structure”). As shown in , the only required entry in the catalogue is **FDF**; its value shall be an FDF dictionary ([Table 243](#table243)), which in turn shall contain references to other objects describing the file’s contents. The catalogue may also contain an optional Version entry identifying the version of the PDF specification to which this FDF file conforms.
        
            
    <table id="table242" markdown="span">
        <caption>**Table 242 – Entries in the FDF catalog dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Version**</td>
                <td>name</td>
                <td>(Optional; PDF 1.4) The version of the FDF specification to which this FDF file conforms (for example, 1.4) if later than the version specified in the file’s header (see FDF Header in [12.7.7.2], “FDF File Structure”). If the header specifies a later version, or if this entry is absent, the document conforms to the version specified in the header. <br/>
                The value of this entry is a name object, not a number, and therefore shall be preceded by a slash character (/) when written in the FDF file (for example, /1.4).
                </td>
            </tr>
            <tr>
                <td>**FDF**</td>
                <td>dictionary</td>
                <td>(Required) The FDF dictionary for this file (see [Table 243](#table243)).
                </td>
            </tr>
        </tbody>
    </table>
            
    <table id="table243" markdown="span">
        <caption>**Table 243 – Entries in the FDF dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
            <tr>
                <td>**F**</td>
                <td>file specification</td>
                <td>(Optional) The source file or target file: the PDF document file that this FDF file was exported from or is intended to be imported into.
                </td>
            </tr>
            <tr>
                <td>**ID**</td>
                <td>array</td>
                <td>(Optional) An array of two byte strings constituting a file identifier (see [14.4], “File Identifiers”) for the source or target file designated by **F**, taken from the **ID** entry in the file’s trailer dictionary (see [7.5.5], “File Trailer”).
                </td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Optional) An array of FDF field dictionaries (see FDF Fields in [12.7.7.3], “FDF Catalog”) describing the root fields (those with no ancestors in the field hierarchy) that shall be exported or imported. This entry and the **Pages** entry shall not both be present.
                </td>
            </tr>
            <tr>
                <td>**Status**</td>
                <td>PDFDocEncoded string</td>
                <td>(Optional) A status string that shall be displayed indicating the result of an action, typically a submit-form action (see [12.7.5.2], “Submit-Form Action”). The string shall be encoded with **PDFDocEncoding**. This entry and the **Pages** entry shall not both be present.
                </td>
            </tr>
            <tr>
                <td>**Pages**</td>
                <td>array</td>
                <td>(Optional; PDF 1.3) An array of FDF page dictionaries (see FDF Pages in [12.7.7.3], “FDF Catalog”) describing pages that shall be added to a PDF target document. The **Fields** and **Status** entries shall not be present together with this entry.
                </td>
            </tr>
            <tr>
                <td>**Encoding**</td>
                <td>name</td>
                <td>(Optional; PDF 1.3) The encoding that shall be used for any FDF field value or option (**V** or **Opt** in the field dictionary; see Table 246) or field name that is a string and does not begin with the Unicode prefix U+FEFF.
                    Default value: **PDFDocEncoding**. <br/>
                    Other allowed values include **Shift_JIS**, **BigFive**, **GBK**, **UHC**, **utf_8**, **utf_16**
                </td>
            </tr>
            <tr>
                <td>**Annots**</td>
                <td>array</td>
                <td>(Optional; PDF 1.3) An array of FDF annotation dictionaries (see FDF Annotation Dictionaries in [12.7.7.3], “FDF Catalog”). The array may include annotations of any of the standard types listed in Table 169 except **Link**, **Movie**, **Widget**, **PrinterMark**, **Screen**, and **TrapNet**.
                </td>
            </tr>
            <tr>
                <td>**Differences**</td>
                <td>stream</td>
                <td>(Optional; PDF 1.4) A stream containing all the bytes in all incremental updates made to the underlying PDF document since it was opened (see [7.5.6], “Incremental Updates”). If a submit-form action submitting the document to a remote server as FDF has its IncludeAppendSaves flag set (see [12.7.5.2], “Submit-Form Action”), the contents of this stream shall be included in the submission. This allows any digital signatures (see [12.8], “Digital Signatures”) to be transmitted to the server. An incremental update shall be automatically performed just before the submission takes place, in order to capture all changes made to the document. <br/> 
                    The submission shall include the full set of incremental updates back to the time the document was first opened, even if some of them may already have been included in intervening submissions. <br/>
                    Although a **Fields** or **Annots** entry (or both) may be present along with **Differences**, there is no requirement that their contents will be consistent with each other. In particular, if **Differences** contains a digital signature, only the values of the form fields given in the **Differences** stream shall be considered trustworthy under that signature.
                </td>
            </tr>
            <tr>
                <td>**Target**</td>
                <td>string</td>
                <td>(Optional; PDF 1.4) The name of a browser frame in which the underlying PDF document shall be opened. This mimics the behaviour of the target attribute in HTML &lt;href&gt; tags.
                </td>
            </tr>
            <tr>
                <td>**EmbeddedFDFs**</td>
                <td>array</td>
                <td>(Optional; PDF 1.4) An array of file specifications (see [7.11], “File Specifications”) representing other FDF files embedded within this one ([7.11.4], “Embedded File Streams”).
                </td>
            </tr>
            <tr>
                <td>**JavaScript**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.4) A JavaScript dictionary (see [Table 245](#table245)) defining document-level JavaScript scripts.
                </td>
            </tr>
        </tbody>
    </table>
    
    Embedded FDF files specified in the FDF dictionary’s **EmbeddedFDFs** entry may be encrypted. Besides the usual entries for an embedded file stream, the stream dictionary representing such an encrypted FDF file shall contain the additional entry shown in [Table 244](#table244) to identify the revision number of the FDF encryption algorithm used to encrypt the file. Although the FDF encryption mechanism is separate from the one for PDF file encryption described in [7.6], “Encryption,” revision 1 (the only one defined) uses a similar RC4 encryption algorithm based on a 40-bit encryption key. The key shall be computed by means of an MD5 hash, using a padded user-supplied password as input. The computation shall be identical to steps (a) and (b) of the "Algorithm 2: Computing an encryption key" in [7.6.3.3], "Encryption Key Algorithm"; the first 5 bytes of the result shall be the encryption key for the embedded FDF file.
    
    <table id="table244" markdown="span">
        <caption>**Table 244 – Additional entry in an embedded file stream dictionary for an encrypted FDF file**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**EncryptionRevision**</td>
                <td>integer</td>
                <td>(Required if the FDF file is encrypted; PDF 1.4) The revision number of the FDF encryption algorithm used to encrypt the file. This value shall be defined at the time of publication is 1.
                </td>
            </tr>
        </tbody>
    </table>
    
    The **JavaScript** entry in the FDF dictionary holds a JavaScript dictionary containing JavaScript scripts that shall be defined globally at the document level, rather than associated with individual fields. The dictionary may contain scripts defining JavaScript functions for use by other scripts in the document, as well as scripts that shall be executed immediately before and after the FDF file is imported. [Table 245](#table245) shows the contents of this dictionary.
    
    <table id="table245" markdown="span">
        <caption>**Table 245 – Entries in the JavaScript dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Before**</td>
                <td>text string or text stream</td>
                <td>(Optional) A text string or text stream containing a JavaScript script that shall be executed just before the FDF file is imported.
                </td>
            </tr>
            <tr>
                <td>**After**</td>
                <td>text string or text stream</td>
                <td>(Optional) A text string or text stream containing a JavaScript script that shall be executed just after the FDF file is imported.
                </td>
            </tr>
            <tr>
                <td>**AfterPermsReady**</td>
                <td>text string or text stream</td>
                <td>(Optional; PDF 1.6) A text string or text stream containing a JavaScript script that shall be executed after the FDF file is imported and the usage rights in the PDF document have been determined (see [12.8.2.3], “UR”). <br/>
                    Verification of usage rights requires the entire file to be present, in which case execution of this script shall be deferred until that requirement is met.
                </td>
            </tr>
            <tr>
                <td>**Doc**</td>
                <td>array</td>
                <td>(Optional) An array defining additional JavaScript scripts that shall be added to those defined in the **JavaScript** entry of the document’s name dictionary (see [7.7.4], “Name Dictionary”). The array shall contain an even number of elements, organized in pairs. The first element of each pair shall be a name and the second shall be a text string or text stream defining the script corresponding to that name. Each of the defined scripts shall be added to those already defined in the name dictionary and shall then be executed before the script defined in the **Before** entry is executed. <br/>
                    NOTE <br/> &emsp;
                    As described in [12.6.4.16], “JavaScript Actions,” these scripts are used to define JavaScript functions for use by other scripts in the document.
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    The root node of an FDF file’s object hierarchy is the **Catalog** dictionary, located by means of the **Root** entry in the file’s trailer dictionary (see FDF Trailer in [12.7.7.2], “FDF File Structure”). As shown in , the only required entry in the catalogue is **FDF**; its value shall be an FDF dictionary ([Table 243](#table243)), which in turn shall contain references to other objects describing the file’s contents. The catalogue may also contain an optional Version entry identifying the version of the PDF specification to which this FDF file conforms.
        
            
    <table id="table242" markdown="span">
        <caption>**Table 242 – Entries in the FDF catalog dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Version**</td>
                <td>name</td>
                <td>(Optional; PDF 1.4) The version of the FDF specification to which this FDF file conforms (for example, 1.4) if later than the version specified in the file’s header (see FDF Header in [12.7.7.2], “FDF File Structure”). If the header specifies a later version, or if this entry is absent, the document conforms to the version specified in the header. <br/>
                The value of this entry is a name object, not a number, and therefore shall be preceded by a slash character (/) when written in the FDF file (for example, /1.4).
                </td>
            </tr>
            <tr>
                <td>**FDF**</td>
                <td>dictionary</td>
                <td>(Required) The FDF dictionary for this file (see [Table 243](#table243)).
                </td>
            </tr>
        </tbody>
    </table>
            
    <table id="table243" markdown="span">
        <caption>**Table 243 – Entries in the FDF dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
            <tr>
                <td>**F**</td>
                <td>file specification</td>
                <td>(Optional) The source file or target file: the PDF document file that this FDF file was exported from or is intended to be imported into.
                </td>
            </tr>
            <tr>
                <td>**ID**</td>
                <td>array</td>
                <td>(Optional) An array of two byte strings constituting a file identifier (see [14.4], “File Identifiers”) for the source or target file designated by **F**, taken from the **ID** entry in the file’s trailer dictionary (see [7.5.5], “File Trailer”).
                </td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Optional) An array of FDF field dictionaries (see FDF Fields in [12.7.7.3], “FDF Catalog”) describing the root fields (those with no ancestors in the field hierarchy) that shall be exported or imported. This entry and the **Pages** entry shall not both be present.
                </td>
            </tr>
            <tr>
                <td>**Status**</td>
                <td>PDFDocEncoded string</td>
                <td>(Optional) A status string that shall be displayed indicating the result of an action, typically a submit-form action (see [12.7.5.2], “Submit-Form Action”). The string shall be encoded with **PDFDocEncoding**. This entry and the **Pages** entry shall not both be present.
                </td>
            </tr>
            <tr>
                <td>**Pages**</td>
                <td>array</td>
                <td>(Optional; PDF 1.3) An array of FDF page dictionaries (see FDF Pages in [12.7.7.3], “FDF Catalog”) describing pages that shall be added to a PDF target document. The **Fields** and **Status** entries shall not be present together with this entry.
                </td>
            </tr>
            <tr>
                <td>**Encoding**</td>
                <td>name</td>
                <td>(Optional; PDF 1.3) The encoding that shall be used for any FDF field value or option (**V** or **Opt** in the field dictionary; see Table 246) or field name that is a string and does not begin with the Unicode prefix U+FEFF.
                    Default value: **PDFDocEncoding**. <br/>
                    Other allowed values include **Shift_JIS**, **BigFive**, **GBK**, **UHC**, **utf_8**, **utf_16**
                </td>
            </tr>
            <tr>
                <td>**Annots**</td>
                <td>array</td>
                <td>(Optional; PDF 1.3) An array of FDF annotation dictionaries (see FDF Annotation Dictionaries in [12.7.7.3], “FDF Catalog”). The array may include annotations of any of the standard types listed in Table 169 except **Link**, **Movie**, **Widget**, **PrinterMark**, **Screen**, and **TrapNet**.
                </td>
            </tr>
            <tr>
                <td>**Differences**</td>
                <td>stream</td>
                <td>(Optional; PDF 1.4) A stream containing all the bytes in all incremental updates made to the underlying PDF document since it was opened (see [7.5.6], “Incremental Updates”). If a submit-form action submitting the document to a remote server as FDF has its IncludeAppendSaves flag set (see [12.7.5.2], “Submit-Form Action”), the contents of this stream shall be included in the submission. This allows any digital signatures (see [12.8], “Digital Signatures”) to be transmitted to the server. An incremental update shall be automatically performed just before the submission takes place, in order to capture all changes made to the document. <br/> 
                    The submission shall include the full set of incremental updates back to the time the document was first opened, even if some of them may already have been included in intervening submissions. <br/>
                    Although a **Fields** or **Annots** entry (or both) may be present along with **Differences**, there is no requirement that their contents will be consistent with each other. In particular, if **Differences** contains a digital signature, only the values of the form fields given in the **Differences** stream shall be considered trustworthy under that signature.
                </td>
            </tr>
            <tr>
                <td>**Target**</td>
                <td>string</td>
                <td>(Optional; PDF 1.4) The name of a browser frame in which the underlying PDF document shall be opened. This mimics the behaviour of the target attribute in HTML &lt;href&gt; tags.
                </td>
            </tr>
            <tr>
                <td>**EmbeddedFDFs**</td>
                <td>array</td>
                <td>(Optional; PDF 1.4) An array of file specifications (see [7.11], “File Specifications”) representing other FDF files embedded within this one ([7.11.4], “Embedded File Streams”).
                </td>
            </tr>
            <tr>
                <td>**JavaScript**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.4) A JavaScript dictionary (see [Table 245](#table245)) defining document-level JavaScript scripts.
                </td>
            </tr>
        </tbody>
    </table>
    
    Embedded FDF files specified in the FDF dictionary’s **EmbeddedFDFs** entry may be encrypted. Besides the usual entries for an embedded file stream, the stream dictionary representing such an encrypted FDF file shall contain the additional entry shown in [Table 244](#table244) to identify the revision number of the FDF encryption algorithm used to encrypt the file. Although the FDF encryption mechanism is separate from the one for PDF file encryption described in [7.6], “Encryption,” revision 1 (the only one defined) uses a similar RC4 encryption algorithm based on a 40-bit encryption key. The key shall be computed by means of an MD5 hash, using a padded user-supplied password as input. The computation shall be identical to steps (a) and (b) of the "Algorithm 2: Computing an encryption key" in [7.6.3.3], "Encryption Key Algorithm"; the first 5 bytes of the result shall be the encryption key for the embedded FDF file.
    
    <table id="table244" markdown="span">
        <caption>**Table 244 – Additional entry in an embedded file stream dictionary for an encrypted FDF file**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**EncryptionRevision**</td>
                <td>integer</td>
                <td>(Required if the FDF file is encrypted; PDF 1.4) The revision number of the FDF encryption algorithm used to encrypt the file. This value shall be defined at the time of publication is 1.
                </td>
            </tr>
        </tbody>
    </table>
    
    The **JavaScript** entry in the FDF dictionary holds a JavaScript dictionary containing JavaScript scripts that shall be defined globally at the document level, rather than associated with individual fields. The dictionary may contain scripts defining JavaScript functions for use by other scripts in the document, as well as scripts that shall be executed immediately before and after the FDF file is imported. [Table 245](#table245) shows the contents of this dictionary.
    
    <table id="table245" markdown="span">
        <caption>**Table 245 – Entries in the JavaScript dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Before**</td>
                <td>text string or text stream</td>
                <td>(Optional) A text string or text stream containing a JavaScript script that shall be executed just before the FDF file is imported.
                </td>
            </tr>
            <tr>
                <td>**After**</td>
                <td>text string or text stream</td>
                <td>(Optional) A text string or text stream containing a JavaScript script that shall be executed just after the FDF file is imported.
                </td>
            </tr>
            <tr>
                <td>**AfterPermsReady**</td>
                <td>text string or text stream</td>
                <td>(Optional; PDF 1.6) A text string or text stream containing a JavaScript script that shall be executed after the FDF file is imported and the usage rights in the PDF document have been determined (see [12.8.2.3], “UR”). <br/>
                    Verification of usage rights requires the entire file to be present, in which case execution of this script shall be deferred until that requirement is met.
                </td>
            </tr>
            <tr>
                <td>**Doc**</td>
                <td>array</td>
                <td>(Optional) An array defining additional JavaScript scripts that shall be added to those defined in the **JavaScript** entry of the document’s name dictionary (see [7.7.4], “Name Dictionary”). The array shall contain an even number of elements, organized in pairs. The first element of each pair shall be a name and the second shall be a text string or text stream defining the script corresponding to that name. Each of the defined scripts shall be added to those already defined in the name dictionary and shall then be executed before the script defined in the **Before** entry is executed. <br/>
                    NOTE <br/> &emsp;
                    As described in [12.6.4.16], “JavaScript Actions,” these scripts are used to define JavaScript functions for use by other scripts in the document.
                </td>
            </tr>
        </tbody>
    </table>


#### 12.7.7.3.2 FDF字段

**12.7.7.3.2 FDF Fields**

=== "中文"

    Each field in an FDF file shall be described by an FDF field dictionary. [Table 246](#table246) shows the contents of this type of dictionary. Most of the entries have the same form and meaning as the corresponding entries in a field dictionary ([Table 220](#table220), [Table 222](#table222), [Table 229](#table229), and [Table 231](#table231)) or a widget annotation dictionary ([Table 168](./s5.md#table168) and [Table 188](./s5.md#table188)). Unless otherwise indicated in the table, importing a field causes the values of the entries in the FDF field dictionary to replace those of the corresponding entries in the field with the same fully qualified name in the target document.
                
    <table id="table246" markdown="span">
        <caption>**Table 246 – Entries in an FDF field dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Kids**</td>
                <td>array</td>
                <td>(Optional) An array containing the immediate children of this field. <br/>
                    Unlike the children of fields in a PDF file, which shall be specified as indirect object references, those of an FDF field may be either direct or indirect objects.
                </td>
            </tr>
            <tr>
                <td>**T**</td>
                <td>text string</td>
                <td>(Required) The partial field name (see [12.7.3.2], “Field Names”).
                </td>
            </tr>
            <tr>
                <td>**V**</td>
                <td>(various)</td>
                <td>(Optional) The field’s value, whose format varies depending on the field type; see the descriptions of individual field types in [12.7.4], “Field Types” for further information.
                </td>
            </tr>
            <tr>
                <td>**Ff**</td>
                <td>integer</td>
                <td>(Optional) A set of flags specifying various characteristics of the field (see [Table 221](#table221), [Table 226](#table226), [Table 228](#table228), and [Table 230](#table230)). When imported into an interactive form, the value of this entry shall replace that of the **Ff** entry in the form’s corresponding field dictionary. If this field is present, the **SetFf** and **ClrFf** entries, if any, shall be ignored.
                </td>
            </tr>
            <tr>
                <td>**SetFf**</td>
                <td>integer</td>
                <td>(Optional) A set of flags to be set (turned on) in the **Ff** entry of the form’s corresponding field dictionary. Bits equal to 1 in **SetFf** shall cause the corresponding bits in **Ff** to be set to 1. This entry shall be ignored if an **Ff** entry is present in the FDF field dictionary.
                </td>
            </tr>
            <tr>
                <td>**ClrFf**</td>
                <td>integer</td>
                <td>(Optional) A set of flags to be cleared (turned off) in the **Ff** entry of the form’s corresponding field dictionary. Bits equal to 1 in **ClrFf** shall cause the corresponding bits in **Ff** to be set to 0. If a **SetFf** entry is also present in the FDF field dictionary, it shall be applied before this entry. This entry shall be ignored if an **Ff** entry is present in the FDF field dictionary.
                </td>
            </tr>
            <tr>
                <td>**F**</td>
                <td>integer</td>
                <td>(Optional) A set of flags specifying various characteristics of the field’s widget annotation (see [12.5.3], “Annotation Flags”). When imported into an interactive form, the value of this entry shall replace that of the **F** entry in the form’s corresponding annotation dictionary. If this field is present, the **SetF** and **ClrF** entries, if any, shall be ignored.
                </td>
            </tr>
            <tr>
                <td>**SetF**</td>
                <td>integer</td>
                <td>(Optional) A set of flags to be set (turned on) in the **F** entry of the form’s corresponding widget annotation dictionary. Bits equal to 1 in **SetF** shall cause the corresponding bits in **F** to be set to 1. This entry shall be ignored if an **F** entry is present in the FDF field dictionary.
                </td>
            </tr>
            <tr>
                <td>**ClrF**</td>
                <td>integer</td>
                <td>(Optional) A set of flags to be cleared (turned off) in the **F** entry of the form’s corresponding widget annotation dictionary. Bits equal to 1 in **ClrF** shall cause the corresponding bits in **F** to be set to 0. If a **SetF** entry is also present in the FDF field dictionary, it shall be applied before this entry. This entry shall be ignored if an **F** entry is present in the FDF field dictionary.
                </td>
            </tr>
            <tr>
                <td>**AP**</td>
                <td>dictionary</td>
                <td>(Optional) An appearance dictionary specifying the appearance of a pushbutton field (see Pushbuttons in [12.7.4.2], “Button Fields”). The appearance dictionary’s contents are as shown in Table 168, except that the values of the **N**, **R**, and **D** entries shall all be streams.
                </td>
            </tr>
            <tr>
                <td>**APRef**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.3) A dictionary holding references to external PDF files containing the pages to use for the appearances of a pushbutton field. This dictionary is similar to an appearance dictionary (see [Table 168](./s5.md#table168)), except that the values of the **N**, **R**, and **D** entries shall all be named page reference dictionaries ([Table 250](#table250)). This entry shall be ignored if an **AP** entry is present.
                </td>
            </tr>
            <tr>
                <td>**IF**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.3; button fields only) An icon fit dictionary (see [Table 247](#table247)) specifying how to display a button field’s icon within the annotation rectangle of its widget annotation.
                </td>
            </tr>
            <tr>
                <td>**Opt**</td>
                <td>array</td>
                <td>(Required; choice fields only) An array of options that shall be presented to the user. Each element of the array shall take one of two forms: <br/>
                    A text string representing one of the available options <br/>
                    A two-element array consisting of a text string representing one of the available options and a default appearance string for constructing the item’s appearance dynamically at viewing time (see [12.7.3.3], “Variable Text”).
                </td>
            </tr>
            <tr>
                <td>**A**</td>
                <td>dictionary</td>
                <td>(Optional) An action that shall be performed when this field’s widget annotation is activated (see [12.6], “Actions”).
                </td>
            </tr>
            <tr>
                <td>**AA**</td>
                <td>dictionary</td>
                <td>(Optional) An additional-actions dictionary defining the field’s behaviour in response to various trigger events (see [12.6.3], “Trigger Events”).
                </td>
            </tr>
            <tr>
                <td>**RV**</td>
                <td>text string or text stream</td>
                <td>(Optional; PDF 1.5) A rich text string, as described in [12.7.3.4], “Rich Text Strings.”
                </td>
            </tr>
        </tbody>
    </table>
    
    In an FDF field dictionary representing a button field, the optional **IF** entry holds an icon fit dictionary (PDF 1.3) specifying how to display the button’s icon within the annotation rectangle of its widget annotation. Table 247 shows the contents of this type of dictionary.
    
    <table id="table246" markdown="span">
        <caption>**Table 246 – Entries in an FDF field dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**SW**</td>
                <td>name</td>
                <td>(Optional) The circumstances under which the icon shall be scaled inside the annotation rectangle:
                    A &emsp; Always scale. <br/>
                    B &emsp; Scale only when the icon is bigger than the annotation rectangle. <br/>
                    S &emsp; Scale only when the icon is smaller than the annotation rectangle. <br/>
                    N &emsp; Never scale. <br/>
                    Default value: A.
                </td>
            </tr>
            <tr>
                <td>**S**</td>
                <td>name</td>
                <td>(Optional) The type of scaling that shall be used: <br/>
                    A *Anamorphic scaling*: Scale the icon to fill the annotation rectangle exactly, without regard to its original aspect ratio (ratio of width to height). <br/>
                    P *Proportional scaling*: Scale the icon to fit the width or height of the annotation rectangle while maintaining the icon’s original aspect ratio. If the required horizontal and vertical scaling factors are different, use the smaller of the two, centering the icon within the annotation rectangle in the other dimension. <br/>
                    Default value: P.
                </td>
            </tr>
            <tr>
                <td>**A**</td>
                <td>array</td>
                <td>(Optional) An array of two numbers that shall be between 0.0 and 1.0 indicating the fraction of leftover space to allocate at the left and bottom of the icon. A value of [ 0.0 0.0 ] shall position the icon at the bottom-left corner of the annotation rectangle. A value of [ 0.5 0.5 ] shall center it within the rectangle. This entry shall be used only if the icon is scaled proportionally. Default value: [ 0.5 0.5 ].
                </td>
            </tr>
            <tr>
                <td>**FB**</td>
                <td>boolean</td>
                <td>(Optional; PDF 1.5) If **true**, indicates that the button appearance shall be scaled to fit fully within the bounds of the annotation without taking into consideration the line width of the border. Default value: **false**.
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    Each field in an FDF file shall be described by an FDF field dictionary. [Table 246](#table246) shows the contents of this type of dictionary. Most of the entries have the same form and meaning as the corresponding entries in a field dictionary ([Table 220](#table220), [Table 222](#table222), [Table 229](#table229), and [Table 231](#table231)) or a widget annotation dictionary ([Table 168](./s5.md#table168) and [Table 188](./s5.md#table188)). Unless otherwise indicated in the table, importing a field causes the values of the entries in the FDF field dictionary to replace those of the corresponding entries in the field with the same fully qualified name in the target document.
                
    <table id="table246" markdown="span">
        <caption>**Table 246 – Entries in an FDF field dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Kids**</td>
                <td>array</td>
                <td>(Optional) An array containing the immediate children of this field. <br/>
                    Unlike the children of fields in a PDF file, which shall be specified as indirect object references, those of an FDF field may be either direct or indirect objects.
                </td>
            </tr>
            <tr>
                <td>**T**</td>
                <td>text string</td>
                <td>(Required) The partial field name (see [12.7.3.2], “Field Names”).
                </td>
            </tr>
            <tr>
                <td>**V**</td>
                <td>(various)</td>
                <td>(Optional) The field’s value, whose format varies depending on the field type; see the descriptions of individual field types in [12.7.4], “Field Types” for further information.
                </td>
            </tr>
            <tr>
                <td>**Ff**</td>
                <td>integer</td>
                <td>(Optional) A set of flags specifying various characteristics of the field (see [Table 221](#table221), [Table 226](#table226), [Table 228](#table228), and [Table 230](#table230)). When imported into an interactive form, the value of this entry shall replace that of the **Ff** entry in the form’s corresponding field dictionary. If this field is present, the **SetFf** and **ClrFf** entries, if any, shall be ignored.
                </td>
            </tr>
            <tr>
                <td>**SetFf**</td>
                <td>integer</td>
                <td>(Optional) A set of flags to be set (turned on) in the **Ff** entry of the form’s corresponding field dictionary. Bits equal to 1 in **SetFf** shall cause the corresponding bits in **Ff** to be set to 1. This entry shall be ignored if an **Ff** entry is present in the FDF field dictionary.
                </td>
            </tr>
            <tr>
                <td>**ClrFf**</td>
                <td>integer</td>
                <td>(Optional) A set of flags to be cleared (turned off) in the **Ff** entry of the form’s corresponding field dictionary. Bits equal to 1 in **ClrFf** shall cause the corresponding bits in **Ff** to be set to 0. If a **SetFf** entry is also present in the FDF field dictionary, it shall be applied before this entry. This entry shall be ignored if an **Ff** entry is present in the FDF field dictionary.
                </td>
            </tr>
            <tr>
                <td>**F**</td>
                <td>integer</td>
                <td>(Optional) A set of flags specifying various characteristics of the field’s widget annotation (see [12.5.3], “Annotation Flags”). When imported into an interactive form, the value of this entry shall replace that of the **F** entry in the form’s corresponding annotation dictionary. If this field is present, the **SetF** and **ClrF** entries, if any, shall be ignored.
                </td>
            </tr>
            <tr>
                <td>**SetF**</td>
                <td>integer</td>
                <td>(Optional) A set of flags to be set (turned on) in the **F** entry of the form’s corresponding widget annotation dictionary. Bits equal to 1 in **SetF** shall cause the corresponding bits in **F** to be set to 1. This entry shall be ignored if an **F** entry is present in the FDF field dictionary.
                </td>
            </tr>
            <tr>
                <td>**ClrF**</td>
                <td>integer</td>
                <td>(Optional) A set of flags to be cleared (turned off) in the **F** entry of the form’s corresponding widget annotation dictionary. Bits equal to 1 in **ClrF** shall cause the corresponding bits in **F** to be set to 0. If a **SetF** entry is also present in the FDF field dictionary, it shall be applied before this entry. This entry shall be ignored if an **F** entry is present in the FDF field dictionary.
                </td>
            </tr>
            <tr>
                <td>**AP**</td>
                <td>dictionary</td>
                <td>(Optional) An appearance dictionary specifying the appearance of a pushbutton field (see Pushbuttons in [12.7.4.2], “Button Fields”). The appearance dictionary’s contents are as shown in Table 168, except that the values of the **N**, **R**, and **D** entries shall all be streams.
                </td>
            </tr>
            <tr>
                <td>**APRef**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.3) A dictionary holding references to external PDF files containing the pages to use for the appearances of a pushbutton field. This dictionary is similar to an appearance dictionary (see [Table 168](./s5.md#table168)), except that the values of the **N**, **R**, and **D** entries shall all be named page reference dictionaries ([Table 250](#table250)). This entry shall be ignored if an **AP** entry is present.
                </td>
            </tr>
            <tr>
                <td>**IF**</td>
                <td>dictionary</td>
                <td>(Optional; PDF 1.3; button fields only) An icon fit dictionary (see [Table 247](#table247)) specifying how to display a button field’s icon within the annotation rectangle of its widget annotation.
                </td>
            </tr>
            <tr>
                <td>**Opt**</td>
                <td>array</td>
                <td>(Required; choice fields only) An array of options that shall be presented to the user. Each element of the array shall take one of two forms: <br/>
                    A text string representing one of the available options <br/>
                    A two-element array consisting of a text string representing one of the available options and a default appearance string for constructing the item’s appearance dynamically at viewing time (see [12.7.3.3], “Variable Text”).
                </td>
            </tr>
            <tr>
                <td>**A**</td>
                <td>dictionary</td>
                <td>(Optional) An action that shall be performed when this field’s widget annotation is activated (see [12.6], “Actions”).
                </td>
            </tr>
            <tr>
                <td>**AA**</td>
                <td>dictionary</td>
                <td>(Optional) An additional-actions dictionary defining the field’s behaviour in response to various trigger events (see [12.6.3], “Trigger Events”).
                </td>
            </tr>
            <tr>
                <td>**RV**</td>
                <td>text string or text stream</td>
                <td>(Optional; PDF 1.5) A rich text string, as described in [12.7.3.4], “Rich Text Strings.”
                </td>
            </tr>
        </tbody>
    </table>
    
    In an FDF field dictionary representing a button field, the optional **IF** entry holds an icon fit dictionary (PDF 1.3) specifying how to display the button’s icon within the annotation rectangle of its widget annotation. Table 247 shows the contents of this type of dictionary.
    
    <table id="table246" markdown="span">
        <caption>**Table 246 – Entries in an FDF field dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**SW**</td>
                <td>name</td>
                <td>(Optional) The circumstances under which the icon shall be scaled inside the annotation rectangle:
                    A &emsp; Always scale. <br/>
                    B &emsp; Scale only when the icon is bigger than the annotation rectangle. <br/>
                    S &emsp; Scale only when the icon is smaller than the annotation rectangle. <br/>
                    N &emsp; Never scale. <br/>
                    Default value: A.
                </td>
            </tr>
            <tr>
                <td>**S**</td>
                <td>name</td>
                <td>(Optional) The type of scaling that shall be used: <br/>
                    A *Anamorphic scaling*: Scale the icon to fill the annotation rectangle exactly, without regard to its original aspect ratio (ratio of width to height). <br/>
                    P *Proportional scaling*: Scale the icon to fit the width or height of the annotation rectangle while maintaining the icon’s original aspect ratio. If the required horizontal and vertical scaling factors are different, use the smaller of the two, centering the icon within the annotation rectangle in the other dimension. <br/>
                    Default value: P.
                </td>
            </tr>
            <tr>
                <td>**A**</td>
                <td>array</td>
                <td>(Optional) An array of two numbers that shall be between 0.0 and 1.0 indicating the fraction of leftover space to allocate at the left and bottom of the icon. A value of [ 0.0 0.0 ] shall position the icon at the bottom-left corner of the annotation rectangle. A value of [ 0.5 0.5 ] shall center it within the rectangle. This entry shall be used only if the icon is scaled proportionally. Default value: [ 0.5 0.5 ].
                </td>
            </tr>
            <tr>
                <td>**FB**</td>
                <td>boolean</td>
                <td>(Optional; PDF 1.5) If **true**, indicates that the button appearance shall be scaled to fit fully within the bounds of the annotation without taking into consideration the line width of the border. Default value: **false**.
                </td>
            </tr>
        </tbody>
    </table>

#### 12.7.7.3.3 FDF页面

**12.7.7.3.3 FDF Pages**

=== "中文"

    The optional **Pages** field in an FDF dictionary (see [Table 243](#table243)) shall contain an array of FDF page dictionaries (PDF 1.3) describing new pages that shall be added to the target document. Table 248 shows the contents of this type of dictionary.
                
    <table id="table248" markdown="span">
        <caption>**Table 248 – Entries in an FDF page dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Templates**</td>
                <td>array</td>
                <td>(Required) An array of FDF *template dictionaries* (see [Table 249](#table249)) that shall describe the named pages that serve as templates on the page.
                </td>
            </tr>
            <tr>
                <td>**Info**</td>
                <td>dictionary</td>
                <td>(Optional) An FDF *page information dictionary* that shall contain additional information about the page.
                </td>
            </tr>
        </tbody>
    </table>
    
    An *FDF template dictionary* shall contain information describing a named page that serves as a template. [Table 249](#table249) shows the contents of this type of dictionary.
                
    <table id="table249" markdown="span">
        <caption>**Table 249 – Entries in an FDF template dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**TRef**</td>
                <td>dictionary</td>
                <td>(Required) A named page reference dictionary (see [Table 250](#table250)) that shall specify the location of the template.
                </td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Optional) An array of references to FDF field dictionaries (see [Table 246](#table246)) describing the root fields that shall be imported (those with no ancestors in the field hierarchy).
                </td>
            </tr>
            <tr>
                <td>**Rename**</td>
                <td>boolean</td>
                <td>(Optional) A flag that shall specify whether fields imported from the template shall be renamed in the event of name conflicts with existing fields; see the Note in this sub-clause for further discussion. Default value: **true**.
                </td>
            </tr>
        </tbody>
    </table>
    
    !!! note "NOTE"
    
        The names of fields imported from a template can sometimes conflict with those of existing fields in the target document. This can occur, for example, if the same template page is imported more than once or if two different templates have fields with the same names.
    
    The **Rename** flag does not define a renaming algorithm (see [Annex J](../a10.md)).
    
    The **TRef** entry in an FDF template dictionary shall hold a *named page reference* dictionary that shall describe the location of external templates or page elements. [Table 250](#table250) shows the contents of this type of dictionary.
                
    <table id="table249" markdown="span">
        <caption>**Table 249 – Entries in an FDF template dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Name**</td>
                <td>string</td>
                <td>(Required) The name of the referenced page.
                </td>
            </tr>
            <tr>
                <td>**F**</td>
                <td>file specification</td>
                <td>(Optional) The file containing the named page. If this entry is absent, it shall be assumed that the page resides in the associated PDF file.
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    The optional **Pages** field in an FDF dictionary (see [Table 243](#table243)) shall contain an array of FDF page dictionaries (PDF 1.3) describing new pages that shall be added to the target document. Table 248 shows the contents of this type of dictionary.
                
    <table id="table248" markdown="span">
        <caption>**Table 248 – Entries in an FDF page dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Templates**</td>
                <td>array</td>
                <td>(Required) An array of FDF *template dictionaries* (see [Table 249](#table249)) that shall describe the named pages that serve as templates on the page.
                </td>
            </tr>
            <tr>
                <td>**Info**</td>
                <td>dictionary</td>
                <td>(Optional) An FDF *page information dictionary* that shall contain additional information about the page.
                </td>
            </tr>
        </tbody>
    </table>
    
    An *FDF template dictionary* shall contain information describing a named page that serves as a template. [Table 249](#table249) shows the contents of this type of dictionary.
                
    <table id="table249" markdown="span">
        <caption>**Table 249 – Entries in an FDF template dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**TRef**</td>
                <td>dictionary</td>
                <td>(Required) A named page reference dictionary (see [Table 250](#table250)) that shall specify the location of the template.
                </td>
            </tr>
            <tr>
                <td>**Fields**</td>
                <td>array</td>
                <td>(Optional) An array of references to FDF field dictionaries (see [Table 246](#table246)) describing the root fields that shall be imported (those with no ancestors in the field hierarchy).
                </td>
            </tr>
            <tr>
                <td>**Rename**</td>
                <td>boolean</td>
                <td>(Optional) A flag that shall specify whether fields imported from the template shall be renamed in the event of name conflicts with existing fields; see the Note in this sub-clause for further discussion. Default value: **true**.
                </td>
            </tr>
        </tbody>
    </table>
    
    !!! note "NOTE"
    
        The names of fields imported from a template can sometimes conflict with those of existing fields in the target document. This can occur, for example, if the same template page is imported more than once or if two different templates have fields with the same names.
    
    The **Rename** flag does not define a renaming algorithm (see [Annex J](../a10.md)).
    
    The **TRef** entry in an FDF template dictionary shall hold a *named page reference* dictionary that shall describe the location of external templates or page elements. [Table 250](#table250) shows the contents of this type of dictionary.
                
    <table id="table249" markdown="span">
        <caption>**Table 249 – Entries in an FDF template dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Name**</td>
                <td>string</td>
                <td>(Required) The name of the referenced page.
                </td>
            </tr>
            <tr>
                <td>**F**</td>
                <td>file specification</td>
                <td>(Optional) The file containing the named page. If this entry is absent, it shall be assumed that the page resides in the associated PDF file.
                </td>
            </tr>
        </tbody>
    </table>

#### 12.7.7.3.4 FDF注解字典

**12.7.7.3.4 FDF Annotation Dictionaries**

=== "中文"

    Each annotation dictionary in an FDF file shall have a **Page** entry (see [Table 251](#table251)) that shall indicate the page of the source document to which the annotation is attached.
                
    <table id="table251" markdown="span">
        <caption>**Table 251 – Additional entry for annotation dictionaries in an FDF file**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Page**</td>
                <td>integer</td>
                <td>(Required for annotations in FDF files) The ordinal page number on which this annotation shall appear, where page 0 is the first page.
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    Each annotation dictionary in an FDF file shall have a **Page** entry (see [Table 251](#table251)) that shall indicate the page of the source document to which the annotation is attached.
                
    <table id="table251" markdown="span">
        <caption>**Table 251 – Additional entry for annotation dictionaries in an FDF file**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Page**</td>
                <td>integer</td>
                <td>(Required for annotations in FDF files) The ordinal page number on which this annotation shall appear, where page 0 is the first page.
                </td>
            </tr>
        </tbody>
    </table>

## 12.7.8 XFA表单

**12.7.8 XFA Forms**

=== "中文"

    PDF 1.5 introduces support for interactive forms based on the Adobe XML Forms Architecture (XFA). The **XFA** entry in the interactive forms dictionary (see [Table 218](#table218)) specifies an XFA resource, which shall be an XML stream that contains the form information. The format of an XFA resource is described in the XML Data Package (XDP) Specification (see the [Bibliography](../bibliography.md)).
    
    The **XFA** entry shall be either a stream containing the entire XFA resource or an array specifying individual packets that together make up the XFA resource. The resource includes but is not limited to the following information:
    
    - The form template (specified in the template packet), which describes the characteristics of the form, including its fields, calculations, validations, and formatting. The XML Template Specification describes the architecture of a form template (see [Bibliography](../bibliography.md)).
    - The *data* (specified in the datasets packet), which represents the state of the form
    - The *configuration information* (specified in the config packet), which shall be used to properly process the
    form template and associated data. Configuration information shall be formatted as described in the XML
    *Configuration Specification* (see [Bibliography](../bibliography.md)).
    
    A *packet* is a pair of a string and stream. The string contains the name of the XML element and the stream contains the complete text of this XML element. Each packet represents a complete XML element, with the exception of the first and last packet, which specify begin and end tags for the xdp:xdp element (see EXAMPLE 1 in this sub-clause).
    
    !!! info "EXAMPLE 1"
    
        This example shows the XFA entry consisting of an array of packets.
        
        ```text
        1 0 obj        XFA entry in interactive form dictionary
            << /XFA [(xdp:xdp) 10 0 R    XFA resource specified as individual packets
                    (template) 11 0 R
                    (datasets) 12 0 R
                    (config) 13 0 R
                    (/xdp:xdp) 14 0 R ]
            >>
        endobj
        10 0 obj
            stream
                <xdp:xdp xmlns:xdp="http://ns.adobe.com/xdp/">
            endstream
        
        11 0 obj
            stream
                <template xmlns="http://www.xfa.org/schema/xfa-template/2.4/">
                ...remaining contents of template packet...
                </template>
            endstream
        
        12 0 obj
            stream
                <xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">
                ...contents of datasets packet...
                </xfa:datasets>
            endstream
        
        13 0 obj
            stream
                <config xmlns="http://www.xfa.org/schema/xci/1.0/">
                ...contents of config node of XFA Data Package...
                <config>
            endstream
        
        14 0 obj
            stream
            </xdp:xdp>
            endstream
        ```
    
    !!! info "EXAMPLE 2"
    
        The following example shows the same entry specified as a stream.
    
        ```text
        1 0 obj            XFA entry in interactive form dictionary
            << /XFA 10 0 R >>
        endobj
        
        10 0 obj
            stream
                <xdp:xdp xmlns:xdp="http://ns.adobe.com/xdp/">
                <template xmlns="http://www.xfa.org/schema/xfa-template/2.4/">
                ...remaining contents of template packet...
                </template>
                <xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">
                ...contents of datasets packet...
                </xfa:datasets>
                <config xmlns="http://www.xfa.org/schema/xci/1.0/">
                ...contents of config node of XFA Data Package...
                <config>
                </xdp:xdp>
            endstream
        endobj
        ```
    
    When an **XFA** entry is present in an interactive form dictionary, the XFA resource provides information about the form; in particular, all form-related events such as calculations and validations. The other entries in the interactive form dictionary shall be consistent with the information in the XFA resource. When creating or modifying a PDF file with an XFA resource, a conforming writer shall follow these rules:
    
    - PDF interactive form field objects shall be present for each field specified in the XFA resource. The XFA field values shall be consistent with the corresponding V entries of the PDF field objects.
    - The XFA Scripting Object Model (SOM) specifies a naming convention that shall be used to connect interactive form field names with field names in the XFA resource. Information about this model is available in the XFA Specification, version 2.5 (see the Bibliography).
    - No A or AA entries (see Table 164) shall be present in the annotation dictionaries of fields that also have actions specified by the XFA resource.

=== "英文"

    PDF 1.5 introduces support for interactive forms based on the Adobe XML Forms Architecture (XFA). The **XFA** entry in the interactive forms dictionary (see [Table 218](#table218)) specifies an XFA resource, which shall be an XML stream that contains the form information. The format of an XFA resource is described in the XML Data Package (XDP) Specification (see the [Bibliography](../bibliography.md)).
    
    The **XFA** entry shall be either a stream containing the entire XFA resource or an array specifying individual packets that together make up the XFA resource. The resource includes but is not limited to the following information:
    
    - The form template (specified in the template packet), which describes the characteristics of the form, including its fields, calculations, validations, and formatting. The XML Template Specification describes the architecture of a form template (see [Bibliography](../bibliography.md)).
    - The *data* (specified in the datasets packet), which represents the state of the form
    - The *configuration information* (specified in the config packet), which shall be used to properly process the
    form template and associated data. Configuration information shall be formatted as described in the XML
    *Configuration Specification* (see [Bibliography](../bibliography.md)).
    
    A *packet* is a pair of a string and stream. The string contains the name of the XML element and the stream contains the complete text of this XML element. Each packet represents a complete XML element, with the exception of the first and last packet, which specify begin and end tags for the xdp:xdp element (see EXAMPLE 1 in this sub-clause).
    
    !!! info "EXAMPLE 1"
    
        This example shows the XFA entry consisting of an array of packets.
        
        ```text
        1 0 obj        XFA entry in interactive form dictionary
            << /XFA [(xdp:xdp) 10 0 R    XFA resource specified as individual packets
                    (template) 11 0 R
                    (datasets) 12 0 R
                    (config) 13 0 R
                    (/xdp:xdp) 14 0 R ]
            >>
        endobj
        10 0 obj
            stream
                <xdp:xdp xmlns:xdp="http://ns.adobe.com/xdp/">
            endstream
        
        11 0 obj
            stream
                <template xmlns="http://www.xfa.org/schema/xfa-template/2.4/">
                ...remaining contents of template packet...
                </template>
            endstream
        
        12 0 obj
            stream
                <xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">
                ...contents of datasets packet...
                </xfa:datasets>
            endstream
        
        13 0 obj
            stream
                <config xmlns="http://www.xfa.org/schema/xci/1.0/">
                ...contents of config node of XFA Data Package...
                <config>
            endstream
        
        14 0 obj
            stream
            </xdp:xdp>
            endstream
        ```
    
    !!! info "EXAMPLE 2"
    
        The following example shows the same entry specified as a stream.
    
        ```text
        1 0 obj            XFA entry in interactive form dictionary
            << /XFA 10 0 R >>
        endobj
        
        10 0 obj
            stream
                <xdp:xdp xmlns:xdp="http://ns.adobe.com/xdp/">
                <template xmlns="http://www.xfa.org/schema/xfa-template/2.4/">
                ...remaining contents of template packet...
                </template>
                <xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">
                ...contents of datasets packet...
                </xfa:datasets>
                <config xmlns="http://www.xfa.org/schema/xci/1.0/">
                ...contents of config node of XFA Data Package...
                <config>
                </xdp:xdp>
            endstream
        endobj
        ```
    
    When an **XFA** entry is present in an interactive form dictionary, the XFA resource provides information about the form; in particular, all form-related events such as calculations and validations. The other entries in the interactive form dictionary shall be consistent with the information in the XFA resource. When creating or modifying a PDF file with an XFA resource, a conforming writer shall follow these rules:
    
    - PDF interactive form field objects shall be present for each field specified in the XFA resource. The XFA field values shall be consistent with the corresponding V entries of the PDF field objects.
    - The XFA Scripting Object Model (SOM) specifies a naming convention that shall be used to connect interactive form field names with field names in the XFA resource. Information about this model is available in the XFA Specification, version 2.5 (see the Bibliography).
    - No A or AA entries (see Table 164) shall be present in the annotation dictionaries of fields that also have actions specified by the XFA resource.

[7.5]: ../c7/s5.md
[7.6]: ../c7/s6.md
[7.11]: ../c7/s11.md
[8.10]: ../c8/s10.md
[9.4]: ../c9/s4.md
[12.6]: ../c12/s6.md
[12.8]: ../c12/s8.md
[14.6]: ../c14/s6.md

[7.5.4]: ../c7/s5.md#754-交叉引用表
[7.5.5]: ../c7/s5.md#755-文件尾部
[7.5.6]: ../c7/s5.md#756-增量更新
[7.7.2]: ../c7/s7.md#772-文档目录
[7.7.4]: ../c7/s7.md#774-名称字典
[7.8.3]: ../c7/s8.md#783-资源字典
[7.9.3]: ../c7/s9.md#793-文本流
[7.9.4]: ../c7/s9.md#794-日期
[8.4.4]: ../c8/s4.md#844-图形状态操作符
[12.5.2]: ../c12/s5.md#1252-注解字典
[12.5.3]: ../c12/s5.md#1253-注解标志
[12.5.5]: ../c12/s5.md#1255-外观流
[12.6.3]: ../c12/s6.md#1263-触发事件
[12.7.3]: ../c12/s7.md#1273-领域词典
[12.7.4]: ../c12/s7.md#1274-字段类型
[12.7.5]: ../c12/s7.md#1275-表单操作
[12.7.7]: ../c12/s7.md#1277-表单数据格式
[12.7.8]: ../c12/s7.md#1278-xfa表单
[12.8.5]: ../c12/s8.md#1285-合法内容认证
[14.9.3]: ../c14/s9.md#1493-替代描述

[7.6.3.3]: ../c7/s6.md#7633-加密密钥算法
[12.5.6.2]: ./s5.md#12562-标记注解
[12.5.6.19]: ./s5.md#125619-小组件注解
[12.6.4.16]: ./s6.md#126416-javascript-动作
[12.7.3.2]: ./s7.md#12732-字段名称
[12.7.3.3]: ./s7.md#12733-变量文本
[12.7.3.4]: ./s7.md#12734-富文本字符串
[12.7.4.2]: ./s7.md#12742-按钮字段
[12.7.4.4]: ./s7.md#12744-选择字段
[12.7.4.5]: ./s7.md#12745-签名字段
[12.7.5.2]: ./s7.md#12752-提交表单操作
[12.7.5.3]: ./s7.md#12753-重置表单操作
[12.7.7.2]: ./s7.md#12772-fdf文件结构
[12.7.7.3]: ./s7.md#12773-fdf目录
[12.8.2.3]: ./s8.md#12823-ur
[12.8.3.3]: ./s8.md#12833-pkcs7-iso-32000-中使用的签名

[12.7.4.2.2]: ./s7.md#127422-按钮
[12.7.4.2.3]: ./s7.md#127423-复选框
[12.7.4.2.4]: ./s7.md#127424-单选按钮