# 14.11 印前支持

**14.11 Prepress Support**

## 14.11.1 概述

**14.11.1 General**

=== "中文"

    This sub-clause describes features of PDF that support prepress production workflows:
    
    - The specification of page *boundaries* governing various aspects of the prepress process, such as cropping, bleed, and trimming ([14.11.2], “Page Boundaries”)
    - Facilities for including *printer’s marks*, such as registration targets, gray ramps, colour bars, and cut marks to assist in the production process ([14.11.3], “Printer’s Marks”)
    - Information for generating *colour* separations for pages in a document ([14.11.4], “Separation Dictionaries”)
    - *Output intents* for matching the colour characteristics of a document with those of a target output device or production environment in which it will be printed ([14.11.5], “Output Intents”)
    - Support for the generation of traps to minimize the visual effects of misregistration between multiple colorants ([14.11.6], “Trapping Support”)
    - The Open Prepress Interface (OPI) for creating low-resolution proxies for high-resolution images ([14.11.7], “Open Prepress Interface (OPI)”)

=== "英文"

    This sub-clause describes features of PDF that support prepress production workflows:
    
    - The specification of page *boundaries* governing various aspects of the prepress process, such as cropping, bleed, and trimming ([14.11.2], “Page Boundaries”)
    - Facilities for including *printer’s marks*, such as registration targets, gray ramps, colour bars, and cut marks to assist in the production process ([14.11.3], “Printer’s Marks”)
    - Information for generating *colour* separations for pages in a document ([14.11.4], “Separation Dictionaries”)
    - *Output intents* for matching the colour characteristics of a document with those of a target output device or production environment in which it will be printed ([14.11.5], “Output Intents”)
    - Support for the generation of traps to minimize the visual effects of misregistration between multiple colorants ([14.11.6], “Trapping Support”)
    - The Open Prepress Interface (OPI) for creating low-resolution proxies for high-resolution images ([14.11.7], “Open Prepress Interface (OPI)”)

## 14.11.2 页面边界

**14.11.2 Page Boundaries**

### 14.11.2.1 概述

**14.11.2.1 General**

=== "中文"

    A PDF page may be prepared either for a finished medium, such as a sheet of paper, or as part of a prepress process in which the content of the page is placed on an intermediate medium, such as film or an imposed reproduction plate. In the latter case, it is important to distinguish between the intermediate page and the finished page. The intermediate page may often include additional production-related content, such as bleeds or printer marks, that falls outside the boundaries of the finished page. To handle such cases, a PDF page may define as many as five separate boundaries to control various aspects of the imaging process:
    
    - The *media box* defines the boundaries of the physical medium on which the page is to be printed. It may include any extended area surrounding the finished page for bleed, printing marks, or other such purposes. It may also include areas close to the edges of the medium that cannot be marked because of physical limitations of the output device. Content falling outside this boundary may safely be discarded without affecting the meaning of the PDF file.
    - The *crop box* defines the region to which the contents of the page shall be clipped (cropped) when displayed or printed. Unlike the other boxes, the crop box has no defined meaning in terms of physical page geometry or intended use; it merely imposes clipping on the page contents. However, in the absence of additional information (such as imposition instructions specified in a JDF or PJTF job ticket), the crop box determines how the page’s contents shall be positioned on the output medium. The default value is the page’s media box.
    - The *bleed box* (PDF 1.3) defines the region to which the contents of the page shall be clipped when output in a production environment. This may include any extra bleed area needed to accommodate the physical limitations of cutting, folding, and trimming equipment. The actual printed page may include printing marks that fall outside the bleed box. The default value is the page’s crop box.
    - The *trim box* (PDF 1.3) defines the intended dimensions of the finished page after trimming. It may be smaller than the media box to allow for production-related content, such as printing instructions, cut marks, or colour bars. The default value is the page’s crop box.
    - The *art box* (PDF 1.3) defines the extent of the page’s meaningful content (including potential white space) as intended by the page’s creator. The default value is the page’s crop box.
    
    The page object dictionary specifies these boundaries in the **MediaBox**, **CropBox**, **BleedBox**, **TrimBox**, and **ArtBox** entries, respectively (see [Table 30](../c7/s7.md#table30)). All of them are rectangles expressed in default user space units. The crop, bleed, trim, and art boxes shall not ordinarily extend beyond the boundaries of the media box. If they do, they are effectively reduced to their intersection with the media box. Figure 86 illustrates the relationships among these boundaries. (The crop box is not shown in the figure because it has no defined relationship with any of the other boundaries.)
    
    ![imag](./imgs/f86.png)
    
    !!! note "NOTE 1"
    
        How the various boundaries are used depends on the purpose to which the page is being put. The following are typical purposes:
    
    *Placing the content of a page in another application*. The art box determines the boundary of the content that is to be placed in the application. Depending on the applicable usage conventions, the placed content may be clipped to either the art box or the bleed box. For example, a quarter-page advertisement to be placed on a magazine page might be clipped to the art box on the two sides of the ad that face into the middle of the page and to the bleed box on the two sides that bleed over the edge of the page. The media box and trim box are ignored.
    
    *Printing a finished page*. This case is typical of desktop or shared page printers, in which the page content is positioned directly on the final output medium. The art box and bleed box are ignored. The media box may be used as advice for selecting media of the appropriate size. The crop box and trim box, if present, should be the same as the media box.
    
    *Printing an intermediate page for use in a prepress process*. The art box is ignored. The bleed box defines the boundary of the content to be imaged. The trim box specifies the positioning of the content on the medium; it may also be used to generate cut or fold marks outside the bleed box. Content falling within the media box but outside the bleed box may or may not be imaged, depending on the specific production process being used.
    
    *Building an imposition of multiple pages on a press sheet*. The art box is ignored. The bleed box defines the clipping boundary of the content to be imaged; content outside the bleed box is ignored. The trim box specifies the positioning of the page’s content within the imposition. Cut and fold marks are typically generated for the imposition as a whole.
    
    !!! note "NOTE 2"
    
        In the preceding scenarios, an application that interprets the bleed, trim, and art boxes for some purpose typically alters the crop box so as to impose the clipping that those boxes prescribe.

=== "英文"

    A PDF page may be prepared either for a finished medium, such as a sheet of paper, or as part of a prepress process in which the content of the page is placed on an intermediate medium, such as film or an imposed reproduction plate. In the latter case, it is important to distinguish between the intermediate page and the finished page. The intermediate page may often include additional production-related content, such as bleeds or printer marks, that falls outside the boundaries of the finished page. To handle such cases, a PDF page may define as many as five separate boundaries to control various aspects of the imaging process:
    
    - The *media box* defines the boundaries of the physical medium on which the page is to be printed. It may include any extended area surrounding the finished page for bleed, printing marks, or other such purposes. It may also include areas close to the edges of the medium that cannot be marked because of physical limitations of the output device. Content falling outside this boundary may safely be discarded without affecting the meaning of the PDF file.
    - The *crop box* defines the region to which the contents of the page shall be clipped (cropped) when displayed or printed. Unlike the other boxes, the crop box has no defined meaning in terms of physical page geometry or intended use; it merely imposes clipping on the page contents. However, in the absence of additional information (such as imposition instructions specified in a JDF or PJTF job ticket), the crop box determines how the page’s contents shall be positioned on the output medium. The default value is the page’s media box.
    - The *bleed box* (PDF 1.3) defines the region to which the contents of the page shall be clipped when output in a production environment. This may include any extra bleed area needed to accommodate the physical limitations of cutting, folding, and trimming equipment. The actual printed page may include printing marks that fall outside the bleed box. The default value is the page’s crop box.
    - The *trim box* (PDF 1.3) defines the intended dimensions of the finished page after trimming. It may be smaller than the media box to allow for production-related content, such as printing instructions, cut marks, or colour bars. The default value is the page’s crop box.
    - The *art box* (PDF 1.3) defines the extent of the page’s meaningful content (including potential white space) as intended by the page’s creator. The default value is the page’s crop box.
    
    The page object dictionary specifies these boundaries in the **MediaBox**, **CropBox**, **BleedBox**, **TrimBox**, and **ArtBox** entries, respectively (see [Table 30](../c7/s7.md#table30)). All of them are rectangles expressed in default user space units. The crop, bleed, trim, and art boxes shall not ordinarily extend beyond the boundaries of the media box. If they do, they are effectively reduced to their intersection with the media box. Figure 86 illustrates the relationships among these boundaries. (The crop box is not shown in the figure because it has no defined relationship with any of the other boundaries.)
    
    ![imag](./imgs/f86.png)
    
    !!! note "NOTE 1"
    
        How the various boundaries are used depends on the purpose to which the page is being put. The following are typical purposes:
    
    *Placing the content of a page in another application*. The art box determines the boundary of the content that is to be placed in the application. Depending on the applicable usage conventions, the placed content may be clipped to either the art box or the bleed box. For example, a quarter-page advertisement to be placed on a magazine page might be clipped to the art box on the two sides of the ad that face into the middle of the page and to the bleed box on the two sides that bleed over the edge of the page. The media box and trim box are ignored.
    
    *Printing a finished page*. This case is typical of desktop or shared page printers, in which the page content is positioned directly on the final output medium. The art box and bleed box are ignored. The media box may be used as advice for selecting media of the appropriate size. The crop box and trim box, if present, should be the same as the media box.
    
    *Printing an intermediate page for use in a prepress process*. The art box is ignored. The bleed box defines the boundary of the content to be imaged. The trim box specifies the positioning of the content on the medium; it may also be used to generate cut or fold marks outside the bleed box. Content falling within the media box but outside the bleed box may or may not be imaged, depending on the specific production process being used.
    
    *Building an imposition of multiple pages on a press sheet*. The art box is ignored. The bleed box defines the clipping boundary of the content to be imaged; content outside the bleed box is ignored. The trim box specifies the positioning of the page’s content within the imposition. Cut and fold marks are typically generated for the imposition as a whole.
    
    !!! note "NOTE 2"
    
        In the preceding scenarios, an application that interprets the bleed, trim, and art boxes for some purpose typically alters the crop box so as to impose the clipping that those boxes prescribe.

### 14.11.2.2 页面边界的显示

**14.11.2.2 Display of Page Boundaries**

=== "中文"

    Conforming readers may offer the ability to display guidelines on the screen for the various page boundaries. The optional **BoxColorInfo** entry in a page object (see [7.7.3.3], “Page Objects”) holds a *box colour information dictionary* (PDF 1.4) specifying the colours and other visual characteristics to be used for such display. Conforming readers typically provide a user interface to allow the user to set these characteristics interactively.
    
    !!! note "NOTE"
    
        This information is page-specific and may vary from one page to another.
    
    As shown in [Table 360](#table360), the box colour information dictionary contains an optional entry for each of the possible page boundaries other than the media box. The value of each entry is a box style dictionary, whose contents are shown in [Table 361](#table361). If a given entry is absent, the conforming reader shall use its own current default settings instead.

=== "英文"

    Conforming readers may offer the ability to display guidelines on the screen for the various page boundaries. The optional **BoxColorInfo** entry in a page object (see [7.7.3.3], “Page Objects”) holds a *box colour information dictionary* (PDF 1.4) specifying the colours and other visual characteristics to be used for such display. Conforming readers typically provide a user interface to allow the user to set these characteristics interactively.
    
    !!! note "NOTE"
    
        This information is page-specific and may vary from one page to another.
    
    As shown in [Table 360](#table360), the box colour information dictionary contains an optional entry for each of the possible page boundaries other than the media box. The value of each entry is a box style dictionary, whose contents are shown in [Table 361](#table361). If a given entry is absent, the conforming reader shall use its own current default settings instead.


## 14.11.3 印刷标记

**14.11.3 Printer’s Marks**

=== "中文"

    *Printer’s marks* are graphic symbols or text added to a page to assist production personnel in identifying components of a multiple-plate job and maintaining consistent output during production. Examples commonly used in the printing industry include:
    
    - Registration targets for aligning plates
    - Gray ramps and colour bars for measuring colours and ink densities
    - Cut marks showing where the output medium is to be trimmed
    
    Although conforming writers traditionally include such marks in the content stream of a document, they are logically separate from the content of the page itself and typically appear outside the boundaries (the crop box, trim box, and art box) defining the extent of that content (see [14.11.2], “Page Boundaries”).
    
    *Printer’s mark annotations* (PDF 1.4) provide a mechanism for incorporating printer’s marks into the PDF representation of a page, while keeping them separate from the actual page content. Each page in a PDF document may contain any number of such annotations, each of which represents a single printer’s mark.
    
    !!! note "NOTE 1"
    
        Because printer’s marks typically fall outside the page’s content boundaries, each mark is represented as a separate annotation. Otherwise—if, for example, the cut marks at the four corners of the page were defined in a single annotation—the annotation rectangle would encompass the entire contents of the page and could interfere with the user’s ability to select content or interact with other annotations on the page. Defining printer’s marks in separate annotations also facilitates the implementation of a drag-and-drop user interface for specifying them.
                        
    <table id="table360" markdown="span">
        <caption>**Table 360 – Entries in a box colour information dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>CropBox</td> <td>dictionary </td> <td>(Optional) A box style dictionary (see [Table 361](#table361)) specifying the visual characteristics for displaying guidelines for the page’s crop box. This entry shall be ignored if no crop box is defined in the page object.</td></tr>
            <tr><td>BleedBox</td> <td>dictionary </td> <td>(Optional) A box style dictionary (see [Table 361](#table361)) specifying the visual characteristics for displaying guidelines for the page’s bleed box. This entry shall be ignored if no bleed box is defined in the page object.</td></tr>
            <tr><td>TrimBox</td> <td>dictionary </td> <td>(Optional) A box style dictionary (see [Table 361](#table361)) specifying the visual characteristics for displaying guidelines for the page’s trim box. This entry shall be ignored if no trim box is defined in the page object.</td></tr>
            <tr><td>ArtBox</td> <td>dictionary </td> <td>(Optional) A box style dictionary (see [Table 361](#table361)) specifying the visual characteristics for displaying guidelines for the page’s art box. This entry shall be ignored if no art box is defined in the page object.</td></tr>
        </tbody>
    </table>
                        
    <table id="table361" markdown="span">
        <caption>**Table 361 – Entries in a box style dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>C</td> <td>array </td> <td>(Optional) An array of three numbers in the range 0.0 to 1.0, representing the components in the **DeviceRGB** colour space of the colour to be used for displaying the guidelines. Default value: [0.0 0.0 0.0].</td></tr>
            <tr><td>W</td> <td>number </td> <td>(Optional) The guideline width in default user space units. Default value: 1.</td></tr>
            <tr><td>S</td> <td>name </td> <td>(Optional) The guideline style: <br/><br/>
                S &emsp; (Solid) A solid rectangle. <br/>
                D &emsp; (Dashed) A dashed rectangle. The dash pattern shall be specified by the **D** entry. <br/>
                Other guideline styles may be defined in the future. Default value: S.</td></tr>
            <tr><td>D</td> <td>array </td> <td>(Optional) A dash array defining a pattern of dashes and gaps to be used in drawing dashed guidelines (guideline style D). The dash array shall be specified in default user space units, in the same format as in the line dash pattern parameter of the graphics state (see [8.4.3.6], “Line Dash Pattern”). The dash phase shall not be specified and shall be assumed to be 0. <br/> <br/>
            EXAMPLE &emsp; A D entry of [ 3 2 ] specifies guidelines drawn with 3-point dashes alternating with 2-point gaps. <br/>
            Default value: [ 3 ].</td></tr>
        </tbody>
    </table>
    
    The visual presentation of a printer’s mark shall be defined by a form XObject specified as an appearance stream in the **N** (normal) entry of the printer’s mark annotation’s appearance dictionary (see [12.5.5], “Appearance Streams”). More than one appearance may be defined for the same printer’s mark to meet the requirements of different regions or production facilities. In this case, the appearance dictionary’s **N** entry holds a subdictionary containing the alternate appearances, each identified by an arbitrary key. The **AS** (appearance state) entry in the annotation dictionary designates one of them to be displayed or printed.
    
    !!! note "NOTE 2"
    
        The printer’s mark annotation’s appearance dictionary may include **R** (rollover) or **D** (down) entries, but appearances defined in either of these entries are never displayed or printed.
    
    Like all annotations, a printer’s mark annotation shall be defined by an annotation dictionary (see [12.5.2], “Annotation Dictionaries”); its annotation type is **PrinterMark**. The **AP** (appearances) and **F** (flags) entries (which ordinarily are optional) shall be present, as shall the **AS** (appearance state) entry if the appearance dictionary **AP** contains more than one appearance stream. The Print and ReadOnly flags in the **F** entry shall be set and all others clear (see [12.5.3], “Annotation Flags”). Table 362 shows an additional annotation dictionary entry specific to this type of annotation.
                        
    <table id="table362" markdown="span">
        <caption>**Table 362 – Additional entries specific to a printer’s mark annotation**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Subtype</td> <td>name </td> <td>(Required) The type of annotation that this dictionary describes; shall be **PrinterMark** for a printer’s mark annotation.</td></tr>
            <tr><td>MN</td> <td>name </td> <td>(Optional) An arbitrary name identifying the type of printer’s mark, such as ColorBar or RegistrationTarget.</td></tr>
        </tbody>
    </table>
    
    The form dictionary defining a printer’s mark may contain the optional entries shown in Table 363 in addition to the standard ones common to all form dictionaries (see [8.10.2], “Form Dictionaries”).
                        
    <table id="table363" markdown="span">
        <caption>**Table 363 – Additional entries specific to a printer’s mark form dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>MarkStyle</td> <td>text string </td> <td>(Optional; PDF 1.4) A text string representing the printer’s mark in human-readable form and suitable for presentation to the user.</td></tr>
            <tr><td>Colorants</td> <td>dictionary </td> <td>(Optional; PDF 1.4) A dictionary identifying the individual colorants associated with a printer’s mark, such as a colour bar. For each entry in this dictionary, the key is a colorant name and the value is an array defining a **Separation** colour space for that colorant (see [8.6.6.4], “Separation Colour Spaces”). The key shall match the colorant name given in that colour space.</td></tr>
        </tbody>
    </table>

=== "英文"

    *Printer’s marks* are graphic symbols or text added to a page to assist production personnel in identifying components of a multiple-plate job and maintaining consistent output during production. Examples commonly used in the printing industry include:
    
    - Registration targets for aligning plates
    - Gray ramps and colour bars for measuring colours and ink densities
    - Cut marks showing where the output medium is to be trimmed
    
    Although conforming writers traditionally include such marks in the content stream of a document, they are logically separate from the content of the page itself and typically appear outside the boundaries (the crop box, trim box, and art box) defining the extent of that content (see [14.11.2], “Page Boundaries”).
    
    *Printer’s mark annotations* (PDF 1.4) provide a mechanism for incorporating printer’s marks into the PDF representation of a page, while keeping them separate from the actual page content. Each page in a PDF document may contain any number of such annotations, each of which represents a single printer’s mark.
    
    !!! note "NOTE 1"
    
        Because printer’s marks typically fall outside the page’s content boundaries, each mark is represented as a separate annotation. Otherwise—if, for example, the cut marks at the four corners of the page were defined in a single annotation—the annotation rectangle would encompass the entire contents of the page and could interfere with the user’s ability to select content or interact with other annotations on the page. Defining printer’s marks in separate annotations also facilitates the implementation of a drag-and-drop user interface for specifying them.
                        
    <table id="table360" markdown="span">
        <caption>**Table 360 – Entries in a box colour information dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>CropBox</td> <td>dictionary </td> <td>(Optional) A box style dictionary (see [Table 361](#table361)) specifying the visual characteristics for displaying guidelines for the page’s crop box. This entry shall be ignored if no crop box is defined in the page object.</td></tr>
            <tr><td>BleedBox</td> <td>dictionary </td> <td>(Optional) A box style dictionary (see [Table 361](#table361)) specifying the visual characteristics for displaying guidelines for the page’s bleed box. This entry shall be ignored if no bleed box is defined in the page object.</td></tr>
            <tr><td>TrimBox</td> <td>dictionary </td> <td>(Optional) A box style dictionary (see [Table 361](#table361)) specifying the visual characteristics for displaying guidelines for the page’s trim box. This entry shall be ignored if no trim box is defined in the page object.</td></tr>
            <tr><td>ArtBox</td> <td>dictionary </td> <td>(Optional) A box style dictionary (see [Table 361](#table361)) specifying the visual characteristics for displaying guidelines for the page’s art box. This entry shall be ignored if no art box is defined in the page object.</td></tr>
        </tbody>
    </table>
                        
    <table id="table361" markdown="span">
        <caption>**Table 361 – Entries in a box style dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>C</td> <td>array </td> <td>(Optional) An array of three numbers in the range 0.0 to 1.0, representing the components in the **DeviceRGB** colour space of the colour to be used for displaying the guidelines. Default value: [0.0 0.0 0.0].</td></tr>
            <tr><td>W</td> <td>number </td> <td>(Optional) The guideline width in default user space units. Default value: 1.</td></tr>
            <tr><td>S</td> <td>name </td> <td>(Optional) The guideline style: <br/><br/>
                S &emsp; (Solid) A solid rectangle. <br/>
                D &emsp; (Dashed) A dashed rectangle. The dash pattern shall be specified by the **D** entry. <br/>
                Other guideline styles may be defined in the future. Default value: S.</td></tr>
            <tr><td>D</td> <td>array </td> <td>(Optional) A dash array defining a pattern of dashes and gaps to be used in drawing dashed guidelines (guideline style D). The dash array shall be specified in default user space units, in the same format as in the line dash pattern parameter of the graphics state (see [8.4.3.6], “Line Dash Pattern”). The dash phase shall not be specified and shall be assumed to be 0. <br/> <br/>
            EXAMPLE &emsp; A D entry of [ 3 2 ] specifies guidelines drawn with 3-point dashes alternating with 2-point gaps. <br/>
            Default value: [ 3 ].</td></tr>
        </tbody>
    </table>
    
    The visual presentation of a printer’s mark shall be defined by a form XObject specified as an appearance stream in the **N** (normal) entry of the printer’s mark annotation’s appearance dictionary (see [12.5.5], “Appearance Streams”). More than one appearance may be defined for the same printer’s mark to meet the requirements of different regions or production facilities. In this case, the appearance dictionary’s **N** entry holds a subdictionary containing the alternate appearances, each identified by an arbitrary key. The **AS** (appearance state) entry in the annotation dictionary designates one of them to be displayed or printed.
    
    !!! note "NOTE 2"
    
        The printer’s mark annotation’s appearance dictionary may include **R** (rollover) or **D** (down) entries, but appearances defined in either of these entries are never displayed or printed.
    
    Like all annotations, a printer’s mark annotation shall be defined by an annotation dictionary (see [12.5.2], “Annotation Dictionaries”); its annotation type is **PrinterMark**. The **AP** (appearances) and **F** (flags) entries (which ordinarily are optional) shall be present, as shall the **AS** (appearance state) entry if the appearance dictionary **AP** contains more than one appearance stream. The Print and ReadOnly flags in the **F** entry shall be set and all others clear (see [12.5.3], “Annotation Flags”). Table 362 shows an additional annotation dictionary entry specific to this type of annotation.
                        
    <table id="table362" markdown="span">
        <caption>**Table 362 – Additional entries specific to a printer’s mark annotation**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Subtype</td> <td>name </td> <td>(Required) The type of annotation that this dictionary describes; shall be **PrinterMark** for a printer’s mark annotation.</td></tr>
            <tr><td>MN</td> <td>name </td> <td>(Optional) An arbitrary name identifying the type of printer’s mark, such as ColorBar or RegistrationTarget.</td></tr>
        </tbody>
    </table>
    
    The form dictionary defining a printer’s mark may contain the optional entries shown in Table 363 in addition to the standard ones common to all form dictionaries (see [8.10.2], “Form Dictionaries”).
                        
    <table id="table363" markdown="span">
        <caption>**Table 363 – Additional entries specific to a printer’s mark form dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>MarkStyle</td> <td>text string </td> <td>(Optional; PDF 1.4) A text string representing the printer’s mark in human-readable form and suitable for presentation to the user.</td></tr>
            <tr><td>Colorants</td> <td>dictionary </td> <td>(Optional; PDF 1.4) A dictionary identifying the individual colorants associated with a printer’s mark, such as a colour bar. For each entry in this dictionary, the key is a colorant name and the value is an array defining a **Separation** colour space for that colorant (see [8.6.6.4], “Separation Colour Spaces”). The key shall match the colorant name given in that colour space.</td></tr>
        </tbody>
    </table>

## 14.11.4 分色字典

**14.11.4 Separation Dictionaries**

=== "中文"

    In high-end printing workflows, pages are ultimately produced as sets of separations, one per colorant (see [8.6.6.4], “Separation Colour Spaces”). Ordinarily, each page in a PDF file shall be treated as a composite page that paints graphics objects using all the process colorants and perhaps some spot colorants as well. In other words, all separations for a page shall be generated from a single PDF description of that page.
    
    In some workflows, however, pages are preseparated before generating the PDF file. In a preseparated PDF file, the separations for a page shall be described as separate page objects, each painting only a single colorant (usually specified in the **DeviceGray** colour space). In this case, additional information is needed to identify the actual colorant associated with each separation and to group together the page objects representing all the separations for a given page. This information shall be contained in a separation dictionary (PDF 1.3) in the **SeparationInfo** entry of each page object (see [7.7.3.3], “Page Objects”). Table 364 shows the contents of this type of dictionary.
                            
    <table id="table364" markdown="span">
        <caption>**Table 364 – Entries in a separation dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Pages</td> <td>array </td> <td>(Required) An array of indirect references to page objects representing separations of the same document page. One of the page objects in the array shall be the one with which this separation dictionary is associated, and all of them shall have separation dictionaries (**SeparationInfo** entries) containing **Pages** arrays identical to this one.</td></tr>
            <tr><td>DeviceColorant</td> <td>name or string </td> <td>(Required) The name of the device colorant to be used in rendering this separation, such as Cyan or PANTONE 35 CV.</td></tr>
            <tr><td>ColorSpace</td> <td>array </td> <td>(Optional) An array defining a **Separation** or **DeviceN** colour space (see [8.6.6.4], “Separation Colour Spaces” and [8.6.6.5], “DeviceN Colour Spaces”). It provides additional information about the colour specified by **DeviceColorant**—in particular, the alternate colour space and tint transformation function that shall be used to represent the colorant as a process colour. This information enables a conforming reader to preview the separation in a colour that approximates the device colorant.<br/><br/> The value of **DeviceColorant** shall match the space’s colorant name (if it is a **Separation** space) or be one of the space’s colorant names (if it is a **DeviceN** space).</td></tr>
        </tbody>
    </table>

=== "英文"

    In high-end printing workflows, pages are ultimately produced as sets of separations, one per colorant (see [8.6.6.4], “Separation Colour Spaces”). Ordinarily, each page in a PDF file shall be treated as a composite page that paints graphics objects using all the process colorants and perhaps some spot colorants as well. In other words, all separations for a page shall be generated from a single PDF description of that page.
    
    In some workflows, however, pages are preseparated before generating the PDF file. In a preseparated PDF file, the separations for a page shall be described as separate page objects, each painting only a single colorant (usually specified in the **DeviceGray** colour space). In this case, additional information is needed to identify the actual colorant associated with each separation and to group together the page objects representing all the separations for a given page. This information shall be contained in a separation dictionary (PDF 1.3) in the **SeparationInfo** entry of each page object (see [7.7.3.3], “Page Objects”). Table 364 shows the contents of this type of dictionary.
                            
    <table id="table364" markdown="span">
        <caption>**Table 364 – Entries in a separation dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Pages</td> <td>array </td> <td>(Required) An array of indirect references to page objects representing separations of the same document page. One of the page objects in the array shall be the one with which this separation dictionary is associated, and all of them shall have separation dictionaries (**SeparationInfo** entries) containing **Pages** arrays identical to this one.</td></tr>
            <tr><td>DeviceColorant</td> <td>name or string </td> <td>(Required) The name of the device colorant to be used in rendering this separation, such as Cyan or PANTONE 35 CV.</td></tr>
            <tr><td>ColorSpace</td> <td>array </td> <td>(Optional) An array defining a **Separation** or **DeviceN** colour space (see [8.6.6.4], “Separation Colour Spaces” and [8.6.6.5], “DeviceN Colour Spaces”). It provides additional information about the colour specified by **DeviceColorant**—in particular, the alternate colour space and tint transformation function that shall be used to represent the colorant as a process colour. This information enables a conforming reader to preview the separation in a colour that approximates the device colorant.<br/><br/> The value of **DeviceColorant** shall match the space’s colorant name (if it is a **Separation** space) or be one of the space’s colorant names (if it is a **DeviceN** space).</td></tr>
        </tbody>
    </table>

## 14.11.5 输出意图

**14.11.5 Output Intents**

=== "中文"

    *Output intents* (PDF 1.4) provide a means for matching the colour characteristics of a PDF document with those of a target output device or production environment in which the document will be printed. The optional **OutputIntents** entry in the document catalogue (see [7.7.2], “Document Catalog”) holds an array of *output intent* *dictionaries*, each describing the colour reproduction characteristics of a possible output device or production condition. The contents of these dictionaries may vary for different devices and conditions. The dictionary’s S entry specifies an *output intent subtype* that determines the format and meaning of the remaining entries.
    
    !!! note "NOTE 1"
    
        This use of multiple output intents allows the production process to be customized to the expected workflow and the specific tools available. For example, one production facility might process files conforming to a recognized standard such as PDF/X-1, while another uses the PDF/A standard to produce RGB output for document distribution on the Web. Each of these workflows would require different sets of output intent information. Multiple output intents also allow the same PDF file to be distributed unmodified to multiple production facilities. The choice of which output intent to use in a given production environment is a matter for agreement between the purchaser and provider of production services. PDF intentionally does not include a selector for choosing a particular output intent from within the PDF file.
    
    At the time of publication, three output intent subtypes have been defined: **GTS_PDFX** corresponding to the PDF/X format standard specified in ISO 15930, **GTS_PDFA1** corresponding to the PDF/A standard as defined by ISO 19005, and ISO_PDFE1 corresponding to the PDF/E standard as defined by ISO 24517. Table 365 shows the contents of this type of output intent dictionary. Other subtypes may be added in the future; the names of any such additional subtypes shall conform to the naming guidelines described in [Annex E](../a5.md).
                                
    <table id="table365" markdown="span">
        <caption>**Table 365 – Entries in an output intent dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>**Type**</td> <td>name</td> <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **OutputIntent** for an output intent dictionary.</td></tr>
            <tr><td>**S**</td> <td>name</td> <td>(Required) The output intent subtype; shall be either one
            of GTS_PDFX, GTS_PDFA1, ISO_PDFE1 or a key
            defined by an ISO 32000 extension.</td></tr>
            <tr><td>**OutputCondition**</td> <td>text string</td> <td> (Optional) A text string concisely identifying the intended output device or production condition in human-readable form. This is the preferred method of defining such a string for presentation to the user.</td></tr>
            <tr><td>**OutputConditionIdentifier**</td> <td>text string </td> <td>(Required) A text string identifying the intended output device or production condition in human- or machine- readable form. If human-readable, this string may be used in lieu of an **OutputCondition** string for presentation to the user. <br/><br/> A typical value for this entry may be the name of a production condition maintained in an industry-standard registry such as the ICC Characterization Data Registry (see the Bibliography). If the designated condition matches that in effect at production time, the production software is responsible for providing the corresponding ICC profile as defined in the registry.<br/><br/> If the intended production condition is not a recognized standard, the value of this entry may be Custom or an application-specific, machine-readable name. The **DestOutputProfile** entry defines the ICC profile, and the **Info** entry shall be used for further human-readable identification.</td></tr>
            <tr><td>**RegistryName**</td> <td>textstring </td> <td>(Optional) An text string (conventionally a uniform resource identifier, or URI) identifying the registry in which the condition designated by **OutputConditionIdentifier** is defined.</td></tr>
            <tr><td>**Info**</td> <td>text string </td> <td>(Required if **OutputConditionIdentifier** does not specify a standard production condition; optional otherwise) A human-readable text string containing additional information or comments about the intended target device or production condition.</td></tr>
            <tr><td>**DestOutputProfile**</td> <td>stream</td> <td>(Required if OutputConditionIdentifier does not specify a standard production condition; optional otherwise) An ICC profile stream defining the transformation from the PDF document’s source colours to output device colorants.<br/><br/> The format of the profile stream is the same as that used in specifying an **ICCBased** colour space (see [8.6.5.5], “ICCBased Colour Spaces”). The output transformation uses the profile’s “from CIE” information (BToA in ICC terminology); the “to CIE” (AToB) information may optionally be used to remap source colour values to some other destination colour space, such as for screen preview or hardcopy proofing.</td></tr>
        </tbody>
    </table>
    
    !!! note "NOTE 2"
    
        PDF/X is actually a family of standards representing varying levels of conformance. The standard for a given conformance level may prescribe further restrictions on the usage and meaning of entries in the output intent dictionary. Any such restrictions take precedence over the descriptions given in [Table 364](#table364).
    
    The ICC profile information in an output intent dictionary supplements rather than replaces that in an ICCBased or default colour space (see [8.6.5.5], “ICCBased Colour Spaces,” and [8.6.5.6], “Default Colour Spaces”). Those mechanisms are specifically intended for describing the characteristics of source colour component values. An output intent can be used in conjunction with them to convert source colours to those required for a specific production condition or to enable the display or proofing of the intended output.
    
    The data in an output intent dictionary shall be provided for informational purposes only, and conforming readers are free to disregard it. In particular, there is no expectation that PDF production tools automatically convert colours expressed in the same source colour space to the specified target space before generating output. (In some workflows, such conversion may, in fact, be undesirable).
    
    !!! note "NOTE"
    
        When working with CMYK source colours tagged with a source ICC profile solely for purposes of characterization, converting such colours from four components to three and back is unnecessary and will result in a loss of fidelity in the values of the black component; see 8.6.5.7, “Implicit Conversion of CIE-Based Colour Spaces” for further discussion.) On the other hand, when source colours are expressed in different base colour spaces—for example, when combining separately generated images on the same PDF page—it is possible (though not required) to use the destination profile specified in the output intent dictionary to convert source colours to the same target colour space.
    
    !!! note "EXAMPLE 1"
    
        This Example shows a PDF/X output intent dictionary based on an industry-standard production condition (CGATS TR 001) from the *ICC Characterization Data Registry*. Example 2 shows one for a custom production condition.
    
        ```text
        << /Type /OutputIntent        % Output intent dictionary
            /S /GTS_PDFX
            /OutputCondition ( CGATS TR 001 ( SWOP ) )
            /OutputConditionIdentifier ( CGATS TR 001 )
            /RegistryName ( http : / / www . color . org )
            /DestOutputProfile 100 0 R
        >>
        
        100 0 obj            % ICC profile stream
        << /N 4
            /Length 1605
            /Filter /ASCIIHexDecode
        >>
        
        stream
        00 00 02 0C 61 70 … >
        endstream
        endobj
        ```
    
    !!! info "EXAMPLE 2"
    
        ```text
        <<  /Type /OutputIntent                        % Output intent dictionary
            /S /GTS_PDFX
            /OutputCondition ( Coated )
            /OutputConditionIdentifier ( Custom )
            /Info ( Coated 150lpi )
            /DestOutputProfile 100 0 R
        >>
        
        100 0 obj                % ICC profile stream
        <<  /N 4
            /Length 1605
            /Filter /ASCIIHexDecode
        >>
        
        stream
        00 00 02 0C 61 70 … >
        endstream
        endobj
        ```

=== "英文"

    *Output intents* (PDF 1.4) provide a means for matching the colour characteristics of a PDF document with those of a target output device or production environment in which the document will be printed. The optional **OutputIntents** entry in the document catalogue (see [7.7.2], “Document Catalog”) holds an array of *output intent* *dictionaries*, each describing the colour reproduction characteristics of a possible output device or production condition. The contents of these dictionaries may vary for different devices and conditions. The dictionary’s S entry specifies an *output intent subtype* that determines the format and meaning of the remaining entries.
    
    !!! note "NOTE 1"
    
        This use of multiple output intents allows the production process to be customized to the expected workflow and the specific tools available. For example, one production facility might process files conforming to a recognized standard such as PDF/X-1, while another uses the PDF/A standard to produce RGB output for document distribution on the Web. Each of these workflows would require different sets of output intent information. Multiple output intents also allow the same PDF file to be distributed unmodified to multiple production facilities. The choice of which output intent to use in a given production environment is a matter for agreement between the purchaser and provider of production services. PDF intentionally does not include a selector for choosing a particular output intent from within the PDF file.
    
    At the time of publication, three output intent subtypes have been defined: **GTS_PDFX** corresponding to the PDF/X format standard specified in ISO 15930, **GTS_PDFA1** corresponding to the PDF/A standard as defined by ISO 19005, and ISO_PDFE1 corresponding to the PDF/E standard as defined by ISO 24517. Table 365 shows the contents of this type of output intent dictionary. Other subtypes may be added in the future; the names of any such additional subtypes shall conform to the naming guidelines described in [Annex E](../a5.md).
                                
    <table id="table365" markdown="span">
        <caption>**Table 365 – Entries in an output intent dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>**Type**</td> <td>name</td> <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **OutputIntent** for an output intent dictionary.</td></tr>
            <tr><td>**S**</td> <td>name</td> <td>(Required) The output intent subtype; shall be either one
            of GTS_PDFX, GTS_PDFA1, ISO_PDFE1 or a key
            defined by an ISO 32000 extension.</td></tr>
            <tr><td>**OutputCondition**</td> <td>text string</td> <td> (Optional) A text string concisely identifying the intended output device or production condition in human-readable form. This is the preferred method of defining such a string for presentation to the user.</td></tr>
            <tr><td>**OutputConditionIdentifier**</td> <td>text string </td> <td>(Required) A text string identifying the intended output device or production condition in human- or machine- readable form. If human-readable, this string may be used in lieu of an **OutputCondition** string for presentation to the user. <br/><br/> A typical value for this entry may be the name of a production condition maintained in an industry-standard registry such as the ICC Characterization Data Registry (see the Bibliography). If the designated condition matches that in effect at production time, the production software is responsible for providing the corresponding ICC profile as defined in the registry.<br/><br/> If the intended production condition is not a recognized standard, the value of this entry may be Custom or an application-specific, machine-readable name. The **DestOutputProfile** entry defines the ICC profile, and the **Info** entry shall be used for further human-readable identification.</td></tr>
            <tr><td>**RegistryName**</td> <td>textstring </td> <td>(Optional) An text string (conventionally a uniform resource identifier, or URI) identifying the registry in which the condition designated by **OutputConditionIdentifier** is defined.</td></tr>
            <tr><td>**Info**</td> <td>text string </td> <td>(Required if **OutputConditionIdentifier** does not specify a standard production condition; optional otherwise) A human-readable text string containing additional information or comments about the intended target device or production condition.</td></tr>
            <tr><td>**DestOutputProfile**</td> <td>stream</td> <td>(Required if OutputConditionIdentifier does not specify a standard production condition; optional otherwise) An ICC profile stream defining the transformation from the PDF document’s source colours to output device colorants.<br/><br/> The format of the profile stream is the same as that used in specifying an **ICCBased** colour space (see [8.6.5.5], “ICCBased Colour Spaces”). The output transformation uses the profile’s “from CIE” information (BToA in ICC terminology); the “to CIE” (AToB) information may optionally be used to remap source colour values to some other destination colour space, such as for screen preview or hardcopy proofing.</td></tr>
        </tbody>
    </table>
    
    !!! note "NOTE 2"
    
        PDF/X is actually a family of standards representing varying levels of conformance. The standard for a given conformance level may prescribe further restrictions on the usage and meaning of entries in the output intent dictionary. Any such restrictions take precedence over the descriptions given in [Table 364](#table364).
    
    The ICC profile information in an output intent dictionary supplements rather than replaces that in an ICCBased or default colour space (see [8.6.5.5], “ICCBased Colour Spaces,” and [8.6.5.6], “Default Colour Spaces”). Those mechanisms are specifically intended for describing the characteristics of source colour component values. An output intent can be used in conjunction with them to convert source colours to those required for a specific production condition or to enable the display or proofing of the intended output.
    
    The data in an output intent dictionary shall be provided for informational purposes only, and conforming readers are free to disregard it. In particular, there is no expectation that PDF production tools automatically convert colours expressed in the same source colour space to the specified target space before generating output. (In some workflows, such conversion may, in fact, be undesirable).
    
    !!! note "NOTE"
    
        When working with CMYK source colours tagged with a source ICC profile solely for purposes of characterization, converting such colours from four components to three and back is unnecessary and will result in a loss of fidelity in the values of the black component; see 8.6.5.7, “Implicit Conversion of CIE-Based Colour Spaces” for further discussion.) On the other hand, when source colours are expressed in different base colour spaces—for example, when combining separately generated images on the same PDF page—it is possible (though not required) to use the destination profile specified in the output intent dictionary to convert source colours to the same target colour space.
    
    !!! note "EXAMPLE 1"
    
        This Example shows a PDF/X output intent dictionary based on an industry-standard production condition (CGATS TR 001) from the *ICC Characterization Data Registry*. Example 2 shows one for a custom production condition.
    
        ```text
        << /Type /OutputIntent        % Output intent dictionary
            /S /GTS_PDFX
            /OutputCondition ( CGATS TR 001 ( SWOP ) )
            /OutputConditionIdentifier ( CGATS TR 001 )
            /RegistryName ( http : / / www . color . org )
            /DestOutputProfile 100 0 R
        >>
        
        100 0 obj            % ICC profile stream
        << /N 4
            /Length 1605
            /Filter /ASCIIHexDecode
        >>
        
        stream
        00 00 02 0C 61 70 … >
        endstream
        endobj
        ```
    
    !!! info "EXAMPLE 2"
    
        ```text
        <<  /Type /OutputIntent                        % Output intent dictionary
            /S /GTS_PDFX
            /OutputCondition ( Coated )
            /OutputConditionIdentifier ( Custom )
            /Info ( Coated 150lpi )
            /DestOutputProfile 100 0 R
        >>
        
        100 0 obj                % ICC profile stream
        <<  /N 4
            /Length 1605
            /Filter /ASCIIHexDecode
        >>
        
        stream
        00 00 02 0C 61 70 … >
        endstream
        endobj
        ```

## 14.11.6 陷印支持

**14.11.6 Trapping Support**

### 14.11.6.1 概述

**14.11.6.1 General**

=== "中文"

    On devices such as offset printing presses, which mark multiple colorants on a single sheet of physical medium, mechanical limitations of the device can cause imprecise alignment, or misregistration, between colorants. This can produce unwanted visual artifacts such as brightly coloured gaps or bands around the edges of printed objects. In high-quality reproduction of colour documents, such artifacts are commonly avoided by creating an overlap, called a *trap*, between areas of adjacent colour.
    
    !!! note "NOTE"
    
        Figure 87 shows an example of trapping. The light and medium grays represent two different colorants, which are used to paint the background and the glyph denoting the letter A. The first figure shows the intended result, with the two colorants properly registered. The second figure shows what happens when the colorants are misregistered. In the third figure, traps have been overprinted along the boundaries, obscuring the artifacts caused by the misregistration. (For emphasis, the traps are shown here in dark gray; in actual practice, their colour will be similar to one of the adjoining colours.)
    
    ![123](./imgs/f87.png)
    
    Trapping may be implemented by the application generating a PDF file, by some intermediate application that adds traps to a PDF document, or by the raster image processor (RIP) that produces final output. In the last two cases, the trapping process is controlled by a set of trapping instructions, which define two kinds of information:
    
    - *Trapping zones* within which traps should be created
    - *Trapping parameters* specifying the nature of the traps within each zone
    
    Trapping zones and trapping parameters are discussed fully in Sections 6.3.2 and 6.3.3, respectively, of the PostScript Language Reference, Third Edition. Trapping instructions are not directly specified in a PDF file (as they are in a PostScript file). Instead, they shall be specified in a job ticket that accompanies the PDF file or is embedded within it. Various standards exist for the format of job tickets; two of them, JDF (Job Definition Format) and PJTF (Portable Job Ticket Format), are described in the CIP4 document JDF Specification and in Adobe Technical Note #5620, Portable Job Ticket Format (see the [Bibliography](../bibliography.md)).
    
    When trapping is performed before the production of final output, the resulting traps shall be placed in the PDF file for subsequent use. The traps themselves shall be described as a content stream in a trap network annotation (see [14.11.6.2], “Trap Network Annotations”). The stream dictionary may include additional entries describing the method that was used to produce the traps and other information about their appearance.

=== "英文"

    On devices such as offset printing presses, which mark multiple colorants on a single sheet of physical medium, mechanical limitations of the device can cause imprecise alignment, or misregistration, between colorants. This can produce unwanted visual artifacts such as brightly coloured gaps or bands around the edges of printed objects. In high-quality reproduction of colour documents, such artifacts are commonly avoided by creating an overlap, called a *trap*, between areas of adjacent colour.
    
    !!! note "NOTE"
    
        Figure 87 shows an example of trapping. The light and medium grays represent two different colorants, which are used to paint the background and the glyph denoting the letter A. The first figure shows the intended result, with the two colorants properly registered. The second figure shows what happens when the colorants are misregistered. In the third figure, traps have been overprinted along the boundaries, obscuring the artifacts caused by the misregistration. (For emphasis, the traps are shown here in dark gray; in actual practice, their colour will be similar to one of the adjoining colours.)
    
    ![123](./imgs/f87.png)
    
    Trapping may be implemented by the application generating a PDF file, by some intermediate application that adds traps to a PDF document, or by the raster image processor (RIP) that produces final output. In the last two cases, the trapping process is controlled by a set of trapping instructions, which define two kinds of information:
    
    - *Trapping zones* within which traps should be created
    - *Trapping parameters* specifying the nature of the traps within each zone
    
    Trapping zones and trapping parameters are discussed fully in Sections 6.3.2 and 6.3.3, respectively, of the PostScript Language Reference, Third Edition. Trapping instructions are not directly specified in a PDF file (as they are in a PostScript file). Instead, they shall be specified in a job ticket that accompanies the PDF file or is embedded within it. Various standards exist for the format of job tickets; two of them, JDF (Job Definition Format) and PJTF (Portable Job Ticket Format), are described in the CIP4 document JDF Specification and in Adobe Technical Note #5620, Portable Job Ticket Format (see the [Bibliography](../bibliography.md)).
    
    When trapping is performed before the production of final output, the resulting traps shall be placed in the PDF file for subsequent use. The traps themselves shall be described as a content stream in a trap network annotation (see [14.11.6.2], “Trap Network Annotations”). The stream dictionary may include additional entries describing the method that was used to produce the traps and other information about their appearance.

### 14.11.6.2 陷印网络注释

**14.11.6.2 Trap Network Annotations**

=== "中文"

    A complete set of traps generated for a given page under a specified set of trapping instructions is called a *trap network* (PDF 1.3). It is a form XObject containing graphics objects for painting the required traps on the page. A page may have more than one trap network based on different trapping instructions, presumably intended for different output devices. All of the trap networks for a given page shall be contained in a single *trap network annotation* (see [12.5], “Annotations”). There may be at most one trap network annotation per page, which shall be the last element in the page’s **Annots** array (see [7.7.3.3], “Page Objects”). This ensures that the trap network shall be printed after all of the page’s other contents.
    
    The form XObject defining a trap network shall be specified as an appearance stream in the **N** (normal) entry of the trap network annotation’s appearance dictionary (see [12.5.5], “Appearance Streams”). If more than one trap network is defined for the same page, the **N** entry holds a subdictionary containing the alternate trap networks, each identified by an arbitrary key. The **AS** (appearance state) entry in the annotation dictionary designates one of them as the *current trap network* to be displayed or printed.
    
    !!! note "NOTE 1"
    
        The trap network annotation’s appearance dictionary may include **R** (rollover) or **D** (down) entries, but appearances defined in either of these entries are never printed.
    
    Like all annotations, a trap network annotation shall be defined by an annotation dictionary (see [12.5.2], “Annotation Dictionaries”); its annotation type is **TrapNet**. The **AP** (appearances), **AS** (appearance state), and **F** (flags) entries (which ordinarily are optional) shall be present, with the Print and ReadOnly flags set and all others clear (see [12.5.3], “Annotation Flags”). [Table 366] shows the additional annotation dictionary entries specific to this type of annotation.
    
    The **Version** and **AnnotStates** entries, if present, shall be used to detect changes in the content of a page that might require regenerating its trap networks. The **Version** array identifies elements of the page’s content that might be changed by an editing application and thus invalidate its trap networks. Because there is at most one **Version** array per trap network annotation (and thus per page), any conforming writer that generates a new trap network shall also verify the validity of existing trap networks by enumerating the objects identified in the array and verifying that the results exactly match the array’s current contents. Any trap networks found to be invalid shall be regenerated.
    
    The **LastModified** entry may be used in place of the **Version** array to track changes to a page’s trap network. (The trap network annotation shall include either a **LastModified** entry or the combination of **Version** and AnnotStates, but not all three.) If the modification date in the **LastModified** entry of the page object (see [7.7.3.3], “Page Objects”) is more recent than the one in the trap network annotation dictionary, the page’s trap networks are invalid and shall be regenerated.
    
    !!! note "NOTE 2"
    
        Not all editing applications correctly maintain these modification dates.
    
    This method of tracking trap network modifications may be used reliably only in a controlled workflow environment where the integrity of the modification dates is assured.
                                    
    <table id="table366" markdown="span">
        <caption>**Table 366 – Additional entries specific to a trap network annotation**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>**Subtype**</td> <td> name</td> <td> (Required) The type of annotation that this dictionary describes; shall be **TrapNet** for a trap network annotation.</td></tr>
            <tr><td>**LastModified**</td> <td>date</td> <td>(Required if **Version** and **AnnotStates** are absent; shall be absent if **Version** and **AnnotStates** are present; PDF 1.4) The date and time (see [7.9.4], “Dates”) when the trap network was most recently modified.</td></tr>
            <tr><td>**Version**</td> <td>array</td> <td>(Required if **AnnotStates** is present; shall be absent if **LastModified** is present) An unordered array of all objects present in the page description at the time the trap networks were generated and that, if changed, could affect the appearance of the page. If present, the array shall include the following objects: <br/><br/>
            • &emsp; All content streams identified in the page object’s **Contents** entry (see [7.7.3.3], “Page Objects”) <br/>
            • &emsp; All resource objects (other than procedure sets) in the page’s resource dictionary (see [7.8.3], “Resource Dictionaries”) <br/>
            • &emsp; All resource objects (other than procedure sets) in the resource dictionaries of any form XObjects on the page (see 8.10, “Form XObjects”)<br/>
            • &emsp; All OPI dictionaries associated with XObjects on the page (see [14.11.7], “Open Prepress Interface (OPI)”)<br/></td></tr>
            <tr><td>**AnnotStates**</td> <td>array</td> <td>(Required if **Version** is present; shall be absent if **LastModified** is present) An array of name objects representing the appearance states (value of the **AS** entry) for annotations associated with the page. The appearance states shall be listed in the same order as the annotations in the page’s **Annots** array (see [7.7.3.3], “Page Objects”). For an annotation with no **AS** entry, the corresponding array element should be **null**. No appearance state shall be included for the trap network annotation itself.</td></tr>
            <tr><td>**FontFauxing**</td> <td>array</td> <td>(Optional) An array of font dictionaries representing fonts that were fauxed (replaced by substitute fonts) during the generation of trap networks for the page.</td></tr>
        </tbody>
    </table>

=== "英文"

    A complete set of traps generated for a given page under a specified set of trapping instructions is called a *trap network* (PDF 1.3). It is a form XObject containing graphics objects for painting the required traps on the page. A page may have more than one trap network based on different trapping instructions, presumably intended for different output devices. All of the trap networks for a given page shall be contained in a single *trap network annotation* (see [12.5], “Annotations”). There may be at most one trap network annotation per page, which shall be the last element in the page’s **Annots** array (see [7.7.3.3], “Page Objects”). This ensures that the trap network shall be printed after all of the page’s other contents.
    
    The form XObject defining a trap network shall be specified as an appearance stream in the **N** (normal) entry of the trap network annotation’s appearance dictionary (see [12.5.5], “Appearance Streams”). If more than one trap network is defined for the same page, the **N** entry holds a subdictionary containing the alternate trap networks, each identified by an arbitrary key. The **AS** (appearance state) entry in the annotation dictionary designates one of them as the *current trap network* to be displayed or printed.
    
    !!! note "NOTE 1"
    
        The trap network annotation’s appearance dictionary may include **R** (rollover) or **D** (down) entries, but appearances defined in either of these entries are never printed.
    
    Like all annotations, a trap network annotation shall be defined by an annotation dictionary (see [12.5.2], “Annotation Dictionaries”); its annotation type is **TrapNet**. The **AP** (appearances), **AS** (appearance state), and **F** (flags) entries (which ordinarily are optional) shall be present, with the Print and ReadOnly flags set and all others clear (see [12.5.3], “Annotation Flags”). [Table 366] shows the additional annotation dictionary entries specific to this type of annotation.
    
    The **Version** and **AnnotStates** entries, if present, shall be used to detect changes in the content of a page that might require regenerating its trap networks. The **Version** array identifies elements of the page’s content that might be changed by an editing application and thus invalidate its trap networks. Because there is at most one **Version** array per trap network annotation (and thus per page), any conforming writer that generates a new trap network shall also verify the validity of existing trap networks by enumerating the objects identified in the array and verifying that the results exactly match the array’s current contents. Any trap networks found to be invalid shall be regenerated.
    
    The **LastModified** entry may be used in place of the **Version** array to track changes to a page’s trap network. (The trap network annotation shall include either a **LastModified** entry or the combination of **Version** and AnnotStates, but not all three.) If the modification date in the **LastModified** entry of the page object (see [7.7.3.3], “Page Objects”) is more recent than the one in the trap network annotation dictionary, the page’s trap networks are invalid and shall be regenerated.
    
    !!! note "NOTE 2"
    
        Not all editing applications correctly maintain these modification dates.
    
    This method of tracking trap network modifications may be used reliably only in a controlled workflow environment where the integrity of the modification dates is assured.
                                    
    <table id="table366" markdown="span">
        <caption>**Table 366 – Additional entries specific to a trap network annotation**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>**Subtype**</td> <td> name</td> <td> (Required) The type of annotation that this dictionary describes; shall be **TrapNet** for a trap network annotation.</td></tr>
            <tr><td>**LastModified**</td> <td>date</td> <td>(Required if **Version** and **AnnotStates** are absent; shall be absent if **Version** and **AnnotStates** are present; PDF 1.4) The date and time (see [7.9.4], “Dates”) when the trap network was most recently modified.</td></tr>
            <tr><td>**Version**</td> <td>array</td> <td>(Required if **AnnotStates** is present; shall be absent if **LastModified** is present) An unordered array of all objects present in the page description at the time the trap networks were generated and that, if changed, could affect the appearance of the page. If present, the array shall include the following objects: <br/><br/>
            • &emsp; All content streams identified in the page object’s **Contents** entry (see [7.7.3.3], “Page Objects”) <br/>
            • &emsp; All resource objects (other than procedure sets) in the page’s resource dictionary (see [7.8.3], “Resource Dictionaries”) <br/>
            • &emsp; All resource objects (other than procedure sets) in the resource dictionaries of any form XObjects on the page (see 8.10, “Form XObjects”)<br/>
            • &emsp; All OPI dictionaries associated with XObjects on the page (see [14.11.7], “Open Prepress Interface (OPI)”)<br/></td></tr>
            <tr><td>**AnnotStates**</td> <td>array</td> <td>(Required if **Version** is present; shall be absent if **LastModified** is present) An array of name objects representing the appearance states (value of the **AS** entry) for annotations associated with the page. The appearance states shall be listed in the same order as the annotations in the page’s **Annots** array (see [7.7.3.3], “Page Objects”). For an annotation with no **AS** entry, the corresponding array element should be **null**. No appearance state shall be included for the trap network annotation itself.</td></tr>
            <tr><td>**FontFauxing**</td> <td>array</td> <td>(Optional) An array of font dictionaries representing fonts that were fauxed (replaced by substitute fonts) during the generation of trap networks for the page.</td></tr>
        </tbody>
    </table>



### 14.11.6.3 陷印网络外观

**14.11.6.3 Trap Network Appearances**

=== "中文"

    Each entry in the **N** (normal) subdictionary of a trap network annotation’s appearance dictionary holds an appearance stream defining a trap network associated with the given page. Like all appearances, a trap network is a stream object defining a form XObject (see [8.10], “Form XObjects”). The body of the stream contains the graphics objects needed to paint the traps making up the trap network. Its dictionary entries include, besides the standard entries for a form dictionary, the additional entries shown in [Table 367](#table367).
    
    <table id="table367" markdown="span">
        <caption>**Table 367 – Additional entries specific to a trap network appearance stream**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>PCM</td> <td>name </td> <td>(Required) The name of the process colour model that was assumed when this trap network was created; equivalent to the PostScript page device parameter **ProcessColorModel** (see Section 6.2.5 of the PostScript Language Reference, Third Edition). Valid values are **DeviceGray**, **DeviceRGB**, **DeviceCMYK**, **DeviceCMY**, **DeviceRGBK**, and **DeviceN**.</td></tr>
            <tr><td>SeparationColorNames</td> <td>array </td> <td>(Optional) An array of names identifying the colorants that were assumed when this network was created; equivalent to the PostScript page device parameter of the same name (see Section 6.2.5 of the PostScript Language Reference, Third Edition). Colourants implied by the process colour model **PCM** are available automatically and need not be explicitly declared. If this entry is absent, the colorants implied by **PCM** shall be assumed.</td></tr>
            <tr><td>TrapRegions</td> <td>array </td> <td>(Optional) An array of indirect references to **TrapRegion** objects defining the page’s trapping zones and the associated trapping parameters, as described in Adobe Technical Note #5620, Portable Job Ticket Format. These references refer to objects comprising portions of a PJTF job ticket that shall be embedded in the PDF file. When the trapping zones and parameters are defined by an external job ticket (or by some other means, such as JDF), this entry shall be absent.</td></tr>
            <tr><td>TrapStyles</td> <td>text string </td> <td>(Optional) A human-readable text string that applications may use to describe this trap network to the user.<br/><br/> EXAMPLE &emsp; To allow switching between trap networks).</td></tr>
        </tbody>
    </table>
    
    !!! note "NOTE"
    
        Preseparated PDF files (see [14.11.4], “Separation Dictionaries”) may not be trapped because traps are defined along the borders between different colours and a preseparated file uses only one colour. Therefore, preseparation shall occur after trapping, not before. An conforming writer that preseparates a trapped PDF file is responsible for calculating new **Version** arrays for the separated trap networks.

=== "英文"

    Each entry in the **N** (normal) subdictionary of a trap network annotation’s appearance dictionary holds an appearance stream defining a trap network associated with the given page. Like all appearances, a trap network is a stream object defining a form XObject (see [8.10], “Form XObjects”). The body of the stream contains the graphics objects needed to paint the traps making up the trap network. Its dictionary entries include, besides the standard entries for a form dictionary, the additional entries shown in [Table 367](#table367).
    
    <table id="table367" markdown="span">
        <caption>**Table 367 – Additional entries specific to a trap network appearance stream**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>PCM</td> <td>name </td> <td>(Required) The name of the process colour model that was assumed when this trap network was created; equivalent to the PostScript page device parameter **ProcessColorModel** (see Section 6.2.5 of the PostScript Language Reference, Third Edition). Valid values are **DeviceGray**, **DeviceRGB**, **DeviceCMYK**, **DeviceCMY**, **DeviceRGBK**, and **DeviceN**.</td></tr>
            <tr><td>SeparationColorNames</td> <td>array </td> <td>(Optional) An array of names identifying the colorants that were assumed when this network was created; equivalent to the PostScript page device parameter of the same name (see Section 6.2.5 of the PostScript Language Reference, Third Edition). Colourants implied by the process colour model **PCM** are available automatically and need not be explicitly declared. If this entry is absent, the colorants implied by **PCM** shall be assumed.</td></tr>
            <tr><td>TrapRegions</td> <td>array </td> <td>(Optional) An array of indirect references to **TrapRegion** objects defining the page’s trapping zones and the associated trapping parameters, as described in Adobe Technical Note #5620, Portable Job Ticket Format. These references refer to objects comprising portions of a PJTF job ticket that shall be embedded in the PDF file. When the trapping zones and parameters are defined by an external job ticket (or by some other means, such as JDF), this entry shall be absent.</td></tr>
            <tr><td>TrapStyles</td> <td>text string </td> <td>(Optional) A human-readable text string that applications may use to describe this trap network to the user.<br/><br/> EXAMPLE &emsp; To allow switching between trap networks).</td></tr>
        </tbody>
    </table>
    
    !!! note "NOTE"
    
        Preseparated PDF files (see [14.11.4], “Separation Dictionaries”) may not be trapped because traps are defined along the borders between different colours and a preseparated file uses only one colour. Therefore, preseparation shall occur after trapping, not before. An conforming writer that preseparates a trapped PDF file is responsible for calculating new **Version** arrays for the separated trap networks.

## 14.11.7 开放印前接口 (OPI)

**14.11.7 Open Prepress Interface (OPI)**

=== "中文"

    The workflow in a prepress environment often involves multiple applications in areas such as graphic design, page layout, word processing, photo manipulation, and document construction. As pieces of the final document are moved from one application to another, it is useful to separate the data of high-resolution images, which can be quite large—in some cases, many times the size of the rest of the document combined—from that of the document itself. The *Open Prepress Interface* (OPI) is a mechanism, originally developed by Aldus Corporation, for creating low-resolution placeholders, or proxies, for such high-resolution images. The proxy typically consists of a downsampled version of the full-resolution image, to be used for screen display and proofing. Before the document is printed, it passes through a filter known as an OPI server, which replaces the proxies with the original full-resolution images.
    
    !!! note "NOTE 1"
    
        In PostScript programs, OPI proxies are defined by PostScript code surrounded by special OPI comments,
    which specify such information as the placement and cropping of the image and adjustments to its size,
    rotation, colour, and other attributes.
    
    In PDF, proxies shall be embedded in a document as image or form XObjects with an associated OPI dictionary
    (PDF 1.2). This dictionary contains the same information that the OPI comments convey in PostScript. Two
    versions of OPI shall be supported, versions 1.3 and 2.0. In OPI 1.3, a proxy consisting of a single image, with
    no changes in the graphics state, may be represented as an image XObject; otherwise it shall be a form
    XObject. In OPI 2.0, the proxy always entails changes in the graphics state and hence shall be represented as
    a form XObject.
    
    An XObject representing an OPI proxy shall contain an **OPI** entry in its image or form dictionary (see Table 89
    and Table 95). The value of this entry is an OPI version dictionary (Table 368) identifying the version of OPI to
    which the proxy corresponds. This dictionary consists of a single entry, whose key is the name **1.3** or **2.0** and
    whose value is the OPI dictionary defining the proxy’s OPI attributes.
        
    <table id="table368" markdown="span">
        <caption>**Table 368 – Entry in an OPI version dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>version number</td> <td>dictionary </td> <td>(Required; PDF 1.2) An OPI dictionary specifying the attributes of this proxy (see [Tables 369](#table369) and [370](#table370)). The key for this entry shall be the name **1.3** or **2.0**, identifying the version of OPI to which the proxy corresponds.</td></tr>
        </tbody>
    </table>
    
    !!! note "NOTE 2"
    
        As in any other PDF dictionary, the key in an OPI version dictionary is a name object. The OPI version dictionary would thus be written in the PDF file in either the form
    
        `<< /1.3 d 0 R >>% OPI 1.3 dictionary`
    
        or 
    
        `<< /2.0 d 0 R >>% OPI 2.0 dictionary`
    
        where *d* is the object number of the corresponding OPI dictionary.
    
    [Table 369](#table369) and [Table 370](#table370) describe the contents of the OPI dictionaries for OPI 1.3 and OPI 2.0, respectively, along with the corresponding PostScript OPI comments. The dictionary entries shall be listed in the order in which the corresponding OPI comments appear in a PostScript program. Complete details on the meanings of these entries and their effects on OPI servers can be found in OPI: Open Prepress Interface Specification 1.3 and Adobe Technical Note #5660, Open Prepress Interface (OPI) Specification, Version 2.0.
        
    <table id="table369" markdown="span">
        <caption>**Table 369 – Entries in a version 1.3 OPI dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**OPI Comment**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Type</td> <td>name </td> <td></td> <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **OPI** for an OPI dictionary.</td></tr>
            <tr><td>Version</td> <td>number </td> <td></td> <td>(Required) The version of OPI to which this dictionary refers; shall be the number 1.3 (not the name 1.3, as in an OPI version dictionary).</td></tr>
            <tr><td>F</td> <td>file specification </td> <td>%ALDImageFilename</td> <td>(Required) The external file containing the image corresponding to this proxy.</td></tr>
            <tr>
                <td>ID</td> 
                <td>byte string </td> 
                <td>%ALDImageID</td> 
                <td>(Optional) An identifying string denoting the image.</td>
            </tr>
            <tr>
                <td>Comments</td> 
                <td>text string </td> 
                <td>%ALDObjectComments</td> 
                <td>(Optional) A human-readable comment, typically containing instructions or suggestions to the operator of the OPI server on how to handle the image.</td>
            </tr>
            <tr>
                <td>Size</td> 
                <td>array </td> 
                <td>%ALDImageDimensions</td> 
                <td>(Required) An array of two integers of the form [pixelsWide pixelsHigh] specifying the dimensions of the image in pixels.</td>
            </tr>
            <tr>
                <td>CropRect</td> 
                <td>rectangle </td> 
                <td>%ALDImageCropRect</td> 
                <td>(Required) An array of four integers of the form [left top right bottom] specifying the portion of the image to be used.</td>
            </tr>
            <tr>
                <td>CropFixed</td> 
                <td>array </td> 
                <td>%ALDImageCropFixed</td> 
                <td>(Optional) An array with the same form and meaning as **CropRect**, but expressed in real numbers instead of integers. Default value: the value of **CropRect**.</td>
            </tr>
            <tr>
                <td>Position</td> 
                <td>array </td> 
                <td>%ALDImagePosition</td> 
                <td>(Required) An array of eight numbers of the form $[ll_x ll_y ul_x ul_y ur_x ur_y lr_x lr_y]$ specifying the location on the page of the cropped image, where $(ll_x, ll_y)$ are the user space coordinates of the lower-left corner, $(ul_x, ul_y)$ are those of the upper-left corner, $(ur_x , ur_y)$ are those of the upper-right corner, and $(lr_x , lr_y)$ are those of the lower-right corner. The specified coordinates shall define a parallelogram; that is, they shall satisfy the conditions $ul_x - ll_x = ur_x - lr_x$ and $ul_y - ll_y = ur_y - lr_y$ The combination of **Position** and **CropRect** determines the image’s scaling, rotation, reflection, and skew.</td>
            </tr>
            <tr>
                <td>Resolution</td> 
                <td>array </td> 
                <td>%ALDImageResolution</td> 
                <td>(Optional) An array of two numbers of the form [ horizRes vertRes ] specifying the resolution of the image in samples per inch.</td>
            </tr>
            <tr>
                <td>ColorType</td> 
                <td>name </td> 
                <td>%ALDImageColorType</td> 
                <td>(Optional) The type of colour specified by the **Color** entry. Valid values are Process, Spot, and Separation. Default value: Spot.</td>
            </tr>
            <tr>
                <td>Color</td> 
                <td>array </td> 
                <td>%ALDImageColor</td> 
                <td>(Optional) An array of four numbers and a byte string of the form [ C M Y K colorName ] specifying the value and name of the colour in which the image is to be rendered. The values of C, M, Y, and K shall all be in the range 0.0 to 1.0. Default value: [ 0.0 0.0 0.0 1.0 ( Black )].</td>
            </tr>
            <tr>
                <td>Tint</td> 
                <td>number </td> 
                <td>%ALDImageTint</td> 
                <td>(Optional) A number in the range 0.0 to 1.0 specifying the concentration of the colour specified by **Color** in which the image is to be rendered. Default value: 1.0.</td>
            </tr>
            <tr>
                <td>Overprint</td> 
                <td>boolean </td> 
                <td>%ALDImageOverprint</td> 
                <td>(Optional) A flag specifying whether the image is to overprint (**true**) or knock out (**false**) underlying marks on other separations. Default value: **false**.</td>
            </tr>
            <tr>
                <td>ImageType</td> 
                <td>array </td> 
                <td>%ALDImageType</td> 
                <td>(Optional) An array of two integers of the form [ samples bits ] specifying the number of samples per pixel and bits per sample in the image.</td>
            </tr>
            <tr>
                <td>GrayMap</td> 
                <td>array </td> 
                <td>%ALDImageGrayMap</td> 
                <td>(Optional) An array of 2n integers in the range 0 to 65,535 (where n is the number of bits per sample) recording changes made to the brightness or contrast of the image.</td>
            </tr>
            <tr>
                <td>Transparency</td> 
                <td>boolean </td> 
                <td>%ALDImageTransparency</td> 
                <td>(Optional) A flag specifying whether white pixels in the image shall be treated as transparent. Default value: **true**.</td>
            </tr>
            <tr>
                <td>Tags</td> 
                <td>array </td> 
                <td>%ALDImageAsciiTag< NNN ></td> 
                <td>(Optional) An array of pairs of the form [ tagNum1 tagText1 … tagNumn tagTextn ] where each tagNum is an integer representing a TIFF tag number and each tagText is an ASCII string representing the corresponding ASCII tag value.</td>
            </tr>
        </tbody>
    </table>
        
    <table id="table368" markdown="span">
        <caption>**Table 368 – Entry in an OPI version dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**OPI Comment**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name </td> 
                <td></td> 
                <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **OPI** for an OPI dictionary.</td>
            </tr>
            <tr>
                <td>**Version**</td> 
                <td>number </td> 
                <td></td> 
                <td>(Required) The version of OPI to which this dictionary refers; shall be the number 2 or 2.0 (not the name 2.0, as in an OPI version dictionary).</td>
            </tr>
            <tr>
                <td>**F**</td> 
                <td>file specification </td> 
                <td>%%ImageFilename</td> 
                <td>(Required) The external file containing the low-resolution proxy image.</td>
            </tr>
            <tr>
                <td>**MainImage**</td> 
                <td>byte string </td> 
                <td>%%MainImage</td> 
                <td>(Optional) The pathname of the file containing the full-resolution image corresponding to this proxy, or any other identifying string that uniquely identifies the full-resolution image.</td>
            </tr>
            <tr>
                <td>**Tags**</td> 
                <td>array </td> 
                <td>%%TIFFASCIITag</td> 
                <td>(Optional) An array of pairs of the form [ tagNum1 tagText1 … tagNumn tagTextn ] where each tagNum is an integer representing a TIFF tag number and each tagText is an ASCII string or an array of ASCII strings representing the corresponding ASCII tag value.</td>
            </tr>
            <tr>
                <td>**Size**</td> 
                <td>array </td> 
                <td>%%ImageDimensions</td> 
                <td>(Optional) An array of two numbers of the form [ width height ] specifying the dimensions of the image in pixels.</td>
            </tr>
            <tr>
                <td>**CropRect**</td> 
                <td>rectangle </td> 
                <td>%%ImageCropRect</td> 
                <td>(Optional) An array of four numbers of the form [ left top right bottom ] specifying the portion of the image to be used. The **Size** and **CropRect** entries shall either both be present or both be absent. If present, they shall satisfy the conditions 0 ≤ left < right ≤ width and 0 ≤ top < bottom ≤ height In this coordinate space, the positive y axis extends vertically downward; hence, the requirement that top < bottom.</td>
            </tr>
            <tr>
                <td>**Overprint**</td> 
                <td>boolean </td> 
                <td>%%ImageOverprint</td> 
                <td>(Optional) A flag specifying whether the image is to overprint (**true**) or knock out (**false**) underlying marks on other separations. Default value: **false**.</td>
            </tr>
            <tr>
                <td>**Inks**</td> 
                <td>name or array </td> 
                <td>%%ImageInks</td> 
                <td>(Optional) A name object or array specifying the colorants to be applied to the image. The value may be the name full_color or registration or an array of the form [ /monochrome name1 tint1 … namen tintn ] where each name is a string representing the name of a colorant and each tint is a real number in the range 0.0 to 1.0 specifying the concentration of that colorant to be applied.</td>
            </tr>
            <tr>
                <td>**IncludedImageDimensions**</td> 
                <td>array </td> 
                <td>%%IncludedImageDimensions</td> 
                <td>(Optional) An array of two integers of the form [ pixelsWide pixelsHigh ] specifying the dimensions of the included image in pixels.</td>
            </tr>
            <tr>
                <td>**IncludedImageQuality**</td> 
                <td>number </td> 
                <td>%%IncludedImageQuality</td> 
                <td>(Optional) A number indicating the quality of the included image. Valid values are 1, 2, and 3.</td>
            </tr>
        </tbody>
    </table>

=== "英文"

    The workflow in a prepress environment often involves multiple applications in areas such as graphic design, page layout, word processing, photo manipulation, and document construction. As pieces of the final document are moved from one application to another, it is useful to separate the data of high-resolution images, which can be quite large—in some cases, many times the size of the rest of the document combined—from that of the document itself. The *Open Prepress Interface* (OPI) is a mechanism, originally developed by Aldus Corporation, for creating low-resolution placeholders, or proxies, for such high-resolution images. The proxy typically consists of a downsampled version of the full-resolution image, to be used for screen display and proofing. Before the document is printed, it passes through a filter known as an OPI server, which replaces the proxies with the original full-resolution images.
    
    !!! note "NOTE 1"
    
        In PostScript programs, OPI proxies are defined by PostScript code surrounded by special OPI comments,
    which specify such information as the placement and cropping of the image and adjustments to its size,
    rotation, colour, and other attributes.
    
    In PDF, proxies shall be embedded in a document as image or form XObjects with an associated OPI dictionary
    (PDF 1.2). This dictionary contains the same information that the OPI comments convey in PostScript. Two
    versions of OPI shall be supported, versions 1.3 and 2.0. In OPI 1.3, a proxy consisting of a single image, with
    no changes in the graphics state, may be represented as an image XObject; otherwise it shall be a form
    XObject. In OPI 2.0, the proxy always entails changes in the graphics state and hence shall be represented as
    a form XObject.
    
    An XObject representing an OPI proxy shall contain an **OPI** entry in its image or form dictionary (see Table 89
    and Table 95). The value of this entry is an OPI version dictionary (Table 368) identifying the version of OPI to
    which the proxy corresponds. This dictionary consists of a single entry, whose key is the name **1.3** or **2.0** and
    whose value is the OPI dictionary defining the proxy’s OPI attributes.
        
    <table id="table368" markdown="span">
        <caption>**Table 368 – Entry in an OPI version dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>version number</td> <td>dictionary </td> <td>(Required; PDF 1.2) An OPI dictionary specifying the attributes of this proxy (see [Tables 369](#table369) and [370](#table370)). The key for this entry shall be the name **1.3** or **2.0**, identifying the version of OPI to which the proxy corresponds.</td></tr>
        </tbody>
    </table>
    
    !!! note "NOTE 2"
    
        As in any other PDF dictionary, the key in an OPI version dictionary is a name object. The OPI version dictionary would thus be written in the PDF file in either the form
    
        `<< /1.3 d 0 R >>% OPI 1.3 dictionary`
    
        or 
    
        `<< /2.0 d 0 R >>% OPI 2.0 dictionary`
    
        where *d* is the object number of the corresponding OPI dictionary.
    
    [Table 369](#table369) and [Table 370](#table370) describe the contents of the OPI dictionaries for OPI 1.3 and OPI 2.0, respectively, along with the corresponding PostScript OPI comments. The dictionary entries shall be listed in the order in which the corresponding OPI comments appear in a PostScript program. Complete details on the meanings of these entries and their effects on OPI servers can be found in OPI: Open Prepress Interface Specification 1.3 and Adobe Technical Note #5660, Open Prepress Interface (OPI) Specification, Version 2.0.
        
    <table id="table369" markdown="span">
        <caption>**Table 369 – Entries in a version 1.3 OPI dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**OPI Comment**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Type</td> <td>name </td> <td></td> <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **OPI** for an OPI dictionary.</td></tr>
            <tr><td>Version</td> <td>number </td> <td></td> <td>(Required) The version of OPI to which this dictionary refers; shall be the number 1.3 (not the name 1.3, as in an OPI version dictionary).</td></tr>
            <tr><td>F</td> <td>file specification </td> <td>%ALDImageFilename</td> <td>(Required) The external file containing the image corresponding to this proxy.</td></tr>
            <tr>
                <td>ID</td> 
                <td>byte string </td> 
                <td>%ALDImageID</td> 
                <td>(Optional) An identifying string denoting the image.</td>
            </tr>
            <tr>
                <td>Comments</td> 
                <td>text string </td> 
                <td>%ALDObjectComments</td> 
                <td>(Optional) A human-readable comment, typically containing instructions or suggestions to the operator of the OPI server on how to handle the image.</td>
            </tr>
            <tr>
                <td>Size</td> 
                <td>array </td> 
                <td>%ALDImageDimensions</td> 
                <td>(Required) An array of two integers of the form [pixelsWide pixelsHigh] specifying the dimensions of the image in pixels.</td>
            </tr>
            <tr>
                <td>CropRect</td> 
                <td>rectangle </td> 
                <td>%ALDImageCropRect</td> 
                <td>(Required) An array of four integers of the form [left top right bottom] specifying the portion of the image to be used.</td>
            </tr>
            <tr>
                <td>CropFixed</td> 
                <td>array </td> 
                <td>%ALDImageCropFixed</td> 
                <td>(Optional) An array with the same form and meaning as **CropRect**, but expressed in real numbers instead of integers. Default value: the value of **CropRect**.</td>
            </tr>
            <tr>
                <td>Position</td> 
                <td>array </td> 
                <td>%ALDImagePosition</td> 
                <td>(Required) An array of eight numbers of the form $[ll_x ll_y ul_x ul_y ur_x ur_y lr_x lr_y]$ specifying the location on the page of the cropped image, where $(ll_x, ll_y)$ are the user space coordinates of the lower-left corner, $(ul_x, ul_y)$ are those of the upper-left corner, $(ur_x , ur_y)$ are those of the upper-right corner, and $(lr_x , lr_y)$ are those of the lower-right corner. The specified coordinates shall define a parallelogram; that is, they shall satisfy the conditions $ul_x - ll_x = ur_x - lr_x$ and $ul_y - ll_y = ur_y - lr_y$ The combination of **Position** and **CropRect** determines the image’s scaling, rotation, reflection, and skew.</td>
            </tr>
            <tr>
                <td>Resolution</td> 
                <td>array </td> 
                <td>%ALDImageResolution</td> 
                <td>(Optional) An array of two numbers of the form [ horizRes vertRes ] specifying the resolution of the image in samples per inch.</td>
            </tr>
            <tr>
                <td>ColorType</td> 
                <td>name </td> 
                <td>%ALDImageColorType</td> 
                <td>(Optional) The type of colour specified by the **Color** entry. Valid values are Process, Spot, and Separation. Default value: Spot.</td>
            </tr>
            <tr>
                <td>Color</td> 
                <td>array </td> 
                <td>%ALDImageColor</td> 
                <td>(Optional) An array of four numbers and a byte string of the form [ C M Y K colorName ] specifying the value and name of the colour in which the image is to be rendered. The values of C, M, Y, and K shall all be in the range 0.0 to 1.0. Default value: [ 0.0 0.0 0.0 1.0 ( Black )].</td>
            </tr>
            <tr>
                <td>Tint</td> 
                <td>number </td> 
                <td>%ALDImageTint</td> 
                <td>(Optional) A number in the range 0.0 to 1.0 specifying the concentration of the colour specified by **Color** in which the image is to be rendered. Default value: 1.0.</td>
            </tr>
            <tr>
                <td>Overprint</td> 
                <td>boolean </td> 
                <td>%ALDImageOverprint</td> 
                <td>(Optional) A flag specifying whether the image is to overprint (**true**) or knock out (**false**) underlying marks on other separations. Default value: **false**.</td>
            </tr>
            <tr>
                <td>ImageType</td> 
                <td>array </td> 
                <td>%ALDImageType</td> 
                <td>(Optional) An array of two integers of the form [ samples bits ] specifying the number of samples per pixel and bits per sample in the image.</td>
            </tr>
            <tr>
                <td>GrayMap</td> 
                <td>array </td> 
                <td>%ALDImageGrayMap</td> 
                <td>(Optional) An array of 2n integers in the range 0 to 65,535 (where n is the number of bits per sample) recording changes made to the brightness or contrast of the image.</td>
            </tr>
            <tr>
                <td>Transparency</td> 
                <td>boolean </td> 
                <td>%ALDImageTransparency</td> 
                <td>(Optional) A flag specifying whether white pixels in the image shall be treated as transparent. Default value: **true**.</td>
            </tr>
            <tr>
                <td>Tags</td> 
                <td>array </td> 
                <td>%ALDImageAsciiTag< NNN ></td> 
                <td>(Optional) An array of pairs of the form [ tagNum1 tagText1 … tagNumn tagTextn ] where each tagNum is an integer representing a TIFF tag number and each tagText is an ASCII string representing the corresponding ASCII tag value.</td>
            </tr>
        </tbody>
    </table>
        
    <table id="table368" markdown="span">
        <caption>**Table 368 – Entry in an OPI version dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**OPI Comment**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name </td> 
                <td></td> 
                <td>(Optional) The type of PDF object that this dictionary describes; if present, shall be **OPI** for an OPI dictionary.</td>
            </tr>
            <tr>
                <td>**Version**</td> 
                <td>number </td> 
                <td></td> 
                <td>(Required) The version of OPI to which this dictionary refers; shall be the number 2 or 2.0 (not the name 2.0, as in an OPI version dictionary).</td>
            </tr>
            <tr>
                <td>**F**</td> 
                <td>file specification </td> 
                <td>%%ImageFilename</td> 
                <td>(Required) The external file containing the low-resolution proxy image.</td>
            </tr>
            <tr>
                <td>**MainImage**</td> 
                <td>byte string </td> 
                <td>%%MainImage</td> 
                <td>(Optional) The pathname of the file containing the full-resolution image corresponding to this proxy, or any other identifying string that uniquely identifies the full-resolution image.</td>
            </tr>
            <tr>
                <td>**Tags**</td> 
                <td>array </td> 
                <td>%%TIFFASCIITag</td> 
                <td>(Optional) An array of pairs of the form [ tagNum1 tagText1 … tagNumn tagTextn ] where each tagNum is an integer representing a TIFF tag number and each tagText is an ASCII string or an array of ASCII strings representing the corresponding ASCII tag value.</td>
            </tr>
            <tr>
                <td>**Size**</td> 
                <td>array </td> 
                <td>%%ImageDimensions</td> 
                <td>(Optional) An array of two numbers of the form [ width height ] specifying the dimensions of the image in pixels.</td>
            </tr>
            <tr>
                <td>**CropRect**</td> 
                <td>rectangle </td> 
                <td>%%ImageCropRect</td> 
                <td>(Optional) An array of four numbers of the form [ left top right bottom ] specifying the portion of the image to be used. The **Size** and **CropRect** entries shall either both be present or both be absent. If present, they shall satisfy the conditions 0 ≤ left < right ≤ width and 0 ≤ top < bottom ≤ height In this coordinate space, the positive y axis extends vertically downward; hence, the requirement that top < bottom.</td>
            </tr>
            <tr>
                <td>**Overprint**</td> 
                <td>boolean </td> 
                <td>%%ImageOverprint</td> 
                <td>(Optional) A flag specifying whether the image is to overprint (**true**) or knock out (**false**) underlying marks on other separations. Default value: **false**.</td>
            </tr>
            <tr>
                <td>**Inks**</td> 
                <td>name or array </td> 
                <td>%%ImageInks</td> 
                <td>(Optional) A name object or array specifying the colorants to be applied to the image. The value may be the name full_color or registration or an array of the form [ /monochrome name1 tint1 … namen tintn ] where each name is a string representing the name of a colorant and each tint is a real number in the range 0.0 to 1.0 specifying the concentration of that colorant to be applied.</td>
            </tr>
            <tr>
                <td>**IncludedImageDimensions**</td> 
                <td>array </td> 
                <td>%%IncludedImageDimensions</td> 
                <td>(Optional) An array of two integers of the form [ pixelsWide pixelsHigh ] specifying the dimensions of the included image in pixels.</td>
            </tr>
            <tr>
                <td>**IncludedImageQuality**</td> 
                <td>number </td> 
                <td>%%IncludedImageQuality</td> 
                <td>(Optional) A number indicating the quality of the included image. Valid values are 1, 2, and 3.</td>
            </tr>
        </tbody>
    </table>

[8.10]: ../c8/s10.md
[12.5]: ../c12/s5.md

[8.4.3.6]: ../c8/s4.md#8436-虚线样式
[8.6.6.4]: ../c8/s6.md#8664-分离色彩空间
[8.6.6.5]: ../c8/s6.md#8665-devicen-色彩空间
[8.6.5.5]: ../c8/s6.md#8655-基于-icc-的色彩空间
[8.6.5.6]: ../c8/s6.md#8656-默认颜色空间

[7.7.2]: ../c7/s7.md#772-文档目录
[7.8.3]: ../c7/s8.md#783-资源字典
[7.9.4]: ../c7/s9.md#794-日期
[8.10.2]: ../c8/s10.md#8102-表单字典
[12.5.2]: ../c12/s5.md#1252-注解字典
[12.5.3]: ../c12/s5.md#1253-注解标志
[12.5.5]: ../c12/s5.md#1255-外观流
[14.11.4]: ../c14/s11.md#14114-分色字典
[14.11.7]: ../c14/s11.md#14117-开放印前接口-opi

[7.7.3.3]: ../c7/s7.md#7733-page对象
[14.11.2]: #14112-页面边界
[14.11.3]: #14113-印刷标记
[14.11.4]: #14114-分色字典
[14.11.5]: #14115-输出意图
[14.11.6]: #14116-陷印支持
[14.11.7]: #14117-开放印前接口-opi

[14.11.6.2]: #141162-陷印网络注释