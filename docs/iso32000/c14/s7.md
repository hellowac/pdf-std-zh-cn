# 14.7 逻辑结构

**14.7 Logical Structure**

## 14.7.1 概述

**14.7.1 General**

=== "中文"

    PDF’s *logical structure* facilities (PDF 1.3) shall provide a mechanism for incorporating structural information about a document’s content into a PDF file. Such information may include the organization of the document into chapters and sections or the identification of special elements such as figures, tables, and footnotes. The logical structure facilities shall be extensible, allowing conforming writers to choose what structural information to include and how to represent it, while enabling conforming readers to navigate a file without knowing the producer’s structural conventions.
    
    PDF logical structure shares basic features with standard document markup languages such as HTML, SGML, and XML. A document’s logical structure shall be expressed as a hierarchy of structure elements, each represented by a dictionary object. Like their counterparts in other markup languages, PDF structure elements may have content and attributes. In PDF, rendered document content takes over the role occupied by text in HTML, SGML, and XML.
    
    A PDF document’s logical structure shall be stored separately from its visible content, with pointers from each to the other. This separation allows the ordering and nesting of logical elements to be entirely independent of the order and location of graphics objects on the document’s pages.
    
    The **Markings** entry in the document catalogue (see [7.7.2], “Document Catalog”) shall specify a *mark information* dictionary, whose entries are shown in [Table 321](#table321). It provides additional information relevant to specialized uses of structured PDF documents.
    
    <table id="table321" markdown="span">
        <caption>**Table 321 – Entries in the mark information dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Marked**</td> 
                <td>boolean</td>
                <td>
                    (Optional) A flag indicating whether the document conforms to Tagged PDF conventions (see [14.8], “Tagged PDF”). Default value: **false**. <br/>
                    If **Suspects** is **true**, the document may not completely conform to Tagged PDF conventions.
                </td>
            </tr>
            <tr>
                <td>**UserProperties**</td> 
                <td>boolean</td>
                <td>(Optional; PDF 1.6) A flag indicating the presence of structure elements that contain user properties attributes (see [14.7.5.4], “User Properties”). <br/>
                    Default value: **false**.</td>
            </tr>
            <tr>
                <td>**Suspects**</td> 
                <td>boolean</td>
                <td>(Optional; PDF 1.6) A flag indicating the presence of tag suspects (see [14.8.2.3], “Page Content Order”). Default value: **false**.</td>
            </tr>
        </tbody>
    </table>

=== "英文"

    PDF’s *logical structure* facilities (PDF 1.3) shall provide a mechanism for incorporating structural information about a document’s content into a PDF file. Such information may include the organization of the document into chapters and sections or the identification of special elements such as figures, tables, and footnotes. The logical structure facilities shall be extensible, allowing conforming writers to choose what structural information to include and how to represent it, while enabling conforming readers to navigate a file without knowing the producer’s structural conventions.
    
    PDF logical structure shares basic features with standard document markup languages such as HTML, SGML, and XML. A document’s logical structure shall be expressed as a hierarchy of structure elements, each represented by a dictionary object. Like their counterparts in other markup languages, PDF structure elements may have content and attributes. In PDF, rendered document content takes over the role occupied by text in HTML, SGML, and XML.
    
    A PDF document’s logical structure shall be stored separately from its visible content, with pointers from each to the other. This separation allows the ordering and nesting of logical elements to be entirely independent of the order and location of graphics objects on the document’s pages.
    
    The **Markings** entry in the document catalogue (see [7.7.2], “Document Catalog”) shall specify a *mark information* dictionary, whose entries are shown in [Table 321](#table321). It provides additional information relevant to specialized uses of structured PDF documents.
    
    <table id="table321" markdown="span">
        <caption>**Table 321 – Entries in the mark information dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Marked**</td> 
                <td>boolean</td>
                <td>
                    (Optional) A flag indicating whether the document conforms to Tagged PDF conventions (see [14.8], “Tagged PDF”). Default value: **false**. <br/>
                    If **Suspects** is **true**, the document may not completely conform to Tagged PDF conventions.
                </td>
            </tr>
            <tr>
                <td>**UserProperties**</td> 
                <td>boolean</td>
                <td>(Optional; PDF 1.6) A flag indicating the presence of structure elements that contain user properties attributes (see [14.7.5.4], “User Properties”). <br/>
                    Default value: **false**.</td>
            </tr>
            <tr>
                <td>**Suspects**</td> 
                <td>boolean</td>
                <td>(Optional; PDF 1.6) A flag indicating the presence of tag suspects (see [14.8.2.3], “Page Content Order”). Default value: **false**.</td>
            </tr>
        </tbody>
    </table>

## 14.7.2 结构层次

**14.7.2 Structure Hierarchy**

=== "中文"

    The logical structure of a document shall be described by a hierarchy of objects called the *structure hierarchy* or *structure tree*. At the root of the hierarchy shall be a dictionary object called the structure tree root, located by means of the **StructTreeRoot** entry in the document catalogue (see [7.7.2], “Document Catalog”). [Table 322](#table322) shows the entries in the structure tree root dictionary. The **K** entry shall specify the immediate children of the structure tree root, which shall be structure elements.
    
    Structure elements shall be represented by a dictionary, whose entries are shown in [Table 323](#table323). The **K** entry shall specify the children of the structure element, which may be zero or more items of the following kinds:
    
    - Other structure elements
    - References to content items, which are either marked-content sequences (see [14.6], “Marked Content”) or complete PDF objects such as XObjects and annotations. These content items represent the graphical content, if any, associated with a structure element. Content items are discussed in detail in [14.7.4], “Structure Content.”
        
    <table id="table322" markdown="span">
        <caption>**Table 322 – Entries in the structure tree root**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name</td>
                <td>
                    (Required) The type of PDF object that this dictionary describes; shall be **StructTreeRoot** for a structure tree root.
                </td>
            </tr>
            <tr>
                <td>**K**</td> 
                <td>dictionary or array</td>
                <td>
                (Optional) The immediate child or children of the structure tree root in the structure hierarchy. The value may be either a dictionary representing a single structure element or an array of such dictionaries.
                </td>
            </tr>
            <tr>
                <td>**IDTree**</td> 
                <td>name tree</td>
                <td>
                (Required if any structure elements have element identifiers) A name tree that maps element identifiers (see [Table 323](#table323)) to the structure elements they denote.
                </td>
            </tr>
            <tr>
                <td>**ParentTree**</td> 
                <td>number tree</td>
                <td>
                (Required if any structure element contains content items) A number tree (see [7.9.7], “Number Trees”) used in finding the structure elements to which content items belong. Each integer key in the number tree shall correspond to a single page of the document or to an individual object (such as an annotation or an XObject) that is a content item in its own right. The integer key shall be the value of the **StructParent** or **StructParents** entry in that object (see [14.7.4.4], “Finding Structure Elements from Content Items”). The form of the associated value shall depend on the nature of the object: <br/>
                For an object that is a content item in its own right, the value shall be an indirect reference to the object’s parent element (the structure element that contains it as a content item).<br/>
                For a page object or content stream containing marked-content sequences that are content items, the value shall be an array of references to the parent elements of those marked-content sequences. <br/>
                See [14.7.4.4], “Finding Structure Elements from Content Items” for further discussion.
                </td>
            </tr>
            <tr>
                <td>**ParentTreeNext Key**</td> 
                <td>integer</td>
                <td>
                (Optional) An integer greater than any key in the parent tree, shall be used as a key for the next entry added to the tree.
                </td>
            </tr>
            <tr>
                <td>**RoleMap**</td> 
                <td>dictionary</td>
                <td>
                (Optional) A dictionary that shall map the names of structure types used in the document to their approximate equivalents in the set of standard structure types (see [14.8.4], “Standard Structure Types”).
                </td>
            </tr>
            <tr>
                <td>**ClassMap**</td> 
                <td>dictionary</td>
                <td>
                (Optional) A dictionary that shall map name objects designating attribute classes to the corresponding attribute objects or arrays of attribute objects (see [14.7.5.2], “Attribute Classes”).
                </td>
            </tr>
        </tbody>
    </table>
        
    <table id="table323" markdown="span">
        <caption>**Table 323 – Entries in a structure element dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name</td>
                <td>
                (Optional) The type of PDF object that this dictionary describes; if present, shall be **StructElem** for a structure element.
                </td>
            </tr>
            <tr>
                <td>**S**</td> 
                <td>name</td>
                <td>
                (Required) The structure type, a name object identifying the nature of the structure element and its role within the document, such as a chapter, paragraph, or footnote (see [14.7.3], “Structure Types”). Names of structure types shall conform to the guidelines described in [Annex E](../a5.md).
                </td>
            </tr>
            <tr>
                <td>**P**</td> 
                <td>dictionary</td>
                <td>
                (Required; shall be an indirect reference) The structure element that is the immediate parent of this one in the structure hierarchy.
                </td>
            </tr>
            <tr>
                <td>**ID**</td> 
                <td>byte string</td>
                <td>
                (Optional) The element identifier, a byte string designating this structure element. The string shall be unique among all elements in the document’s structure hierarchy. The **IDTree** entry in the structure tree root (see [Table 322](#table322)) defines the correspondence between element identifiers and the structure elements they denote.
                </td>
            </tr>
            <tr>
                <td>**Pg**</td> 
                <td>dictionary</td>
                <td>
                (Optional; shall be an indirect reference) A page object representing a page on which some or all of the content items designated by the **K** entry shall be rendered.
                </td>
            </tr>
            <tr>
                <td>**K**</td> 
                <td>(various)</td>
                <td>
                (Optional) The children of this structure element. The value of this entry may be one of the following objects or an array consisting of one or more of the following objects: <br/><br/>
                • A structure element dictionary denoting another structure element <br/>
                • An integer marked-content identifier denoting a marked-content sequence <br/>
                • A marked-content reference dictionary denoting a marked-content sequence <br/>
                • An object reference dictionary denoting a PDF object <br/><br/>
                Each of these objects other than the first (structure element dictionary) shall be considered to be a content item; see [14.7.4], “Structure Content” for further discussion of each of these forms of representation. <br/>
                If the value of **K** is a dictionary containing no **Type** entry, it shall be assumed to be a structure element dictionary.
                </td>
            </tr>
            <tr>
                <td>**A**</td> 
                <td>(various)</td>
                <td>
                    (Optional) A single attribute object or array of attribute objects associated with this structure element. Each attribute object shall be either a dictionary or a stream. If the value of this entry is an array, each attribute object in the array may be followed by an integer representing its revision number (see [14.7.5], “Structure Attributes,” and [14.7.5.3], “Attribute Revision Numbers”).
                </td>
            </tr>
            <tr>
                <td>**C**</td> 
                <td>name or array</td>
                <td>
                    (Optional) An attribute class name or array of class names associated with this structure element. If the value of this entry is an array, each class name in the array may be followed by an integer representing its revision number (see 14.7.5.2, “Attribute Classes,” and [14.7.5.3], “Attribute Revision Numbers”). <br/>
                    If both the **A** and **C** entries are present and a given attribute is specified by both, the one specified by the **A** entry shall take precedence.
                </td>
            </tr>
            <tr>
                <td>**R**</td> 
                <td>integer</td>
                <td>
                (Optional) The current revision number of this structure element (see [14.7.5.3], “Attribute Revision Numbers”). The value shall be a non-negative integer. Default value: 0.
                </td>
            </tr>
            <tr>
                <td>**T**</td> 
                <td>text string</td>
                <td>
                   (Optional) The title of the structure element, a text string representing it in human-readable form. The title should characterize the specific structure element, such as Chapter 1, rather than merely a generic element type, such as Chapter.
                </td>
            </tr>
            <tr>
                <td>**Lang**</td> 
                <td>text string</td>
                <td>
                   (Optional; PDF 1.4) A language identifier specifying the natural language for all text in the structure element except where overridden by language specifications for nested structure elements or marked content (see [14.9.2], “Natural Language Specification”). If this entry is absent, the language (if any) specified in the document catalogue applies.
                </td>
            </tr>
            <tr>
                <td>**Alt**</td> 
                <td>text string</td>
                <td>
                   (Optional) An alternate description of the structure element and its children in human-readable form, which is useful when extracting the document’s contents in support of accessibility to users with disabilities or for other purposes (see [14.9.3], “Alternate Descriptions”).
                </td>
            </tr>
            <tr>
                <td>**E**</td> 
                <td>text string</td>
                <td>
                   (Optional; PDF 1.5) The expanded form of an abbreviation.
                </td>
            </tr>
            <tr>
                <td>**ActualText**</td> 
                <td>text string</td>
                <td>
                   (Optional; PDF 1.4) Text that is an exact replacement for the structure element and its children. This replacement text (which should apply to as small a piece of content as possible) is useful when extracting the document’s contents in support of accessibility to users with disabilities or for other purposes (see [14.9.4], “Replacement Text”).
                </td>
            </tr>
        </tbody>
    </table>

=== "英文"

    The logical structure of a document shall be described by a hierarchy of objects called the *structure hierarchy* or *structure tree*. At the root of the hierarchy shall be a dictionary object called the structure tree root, located by means of the **StructTreeRoot** entry in the document catalogue (see [7.7.2], “Document Catalog”). [Table 322](#table322) shows the entries in the structure tree root dictionary. The **K** entry shall specify the immediate children of the structure tree root, which shall be structure elements.
    
    Structure elements shall be represented by a dictionary, whose entries are shown in [Table 323](#table323). The **K** entry shall specify the children of the structure element, which may be zero or more items of the following kinds:
    
    - Other structure elements
    - References to content items, which are either marked-content sequences (see [14.6], “Marked Content”) or complete PDF objects such as XObjects and annotations. These content items represent the graphical content, if any, associated with a structure element. Content items are discussed in detail in [14.7.4], “Structure Content.”
        
    <table id="table322" markdown="span">
        <caption>**Table 322 – Entries in the structure tree root**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name</td>
                <td>
                    (Required) The type of PDF object that this dictionary describes; shall be **StructTreeRoot** for a structure tree root.
                </td>
            </tr>
            <tr>
                <td>**K**</td> 
                <td>dictionary or array</td>
                <td>
                (Optional) The immediate child or children of the structure tree root in the structure hierarchy. The value may be either a dictionary representing a single structure element or an array of such dictionaries.
                </td>
            </tr>
            <tr>
                <td>**IDTree**</td> 
                <td>name tree</td>
                <td>
                (Required if any structure elements have element identifiers) A name tree that maps element identifiers (see [Table 323](#table323)) to the structure elements they denote.
                </td>
            </tr>
            <tr>
                <td>**ParentTree**</td> 
                <td>number tree</td>
                <td>
                (Required if any structure element contains content items) A number tree (see [7.9.7], “Number Trees”) used in finding the structure elements to which content items belong. Each integer key in the number tree shall correspond to a single page of the document or to an individual object (such as an annotation or an XObject) that is a content item in its own right. The integer key shall be the value of the **StructParent** or **StructParents** entry in that object (see [14.7.4.4], “Finding Structure Elements from Content Items”). The form of the associated value shall depend on the nature of the object: <br/>
                For an object that is a content item in its own right, the value shall be an indirect reference to the object’s parent element (the structure element that contains it as a content item).<br/>
                For a page object or content stream containing marked-content sequences that are content items, the value shall be an array of references to the parent elements of those marked-content sequences. <br/>
                See [14.7.4.4], “Finding Structure Elements from Content Items” for further discussion.
                </td>
            </tr>
            <tr>
                <td>**ParentTreeNext Key**</td> 
                <td>integer</td>
                <td>
                (Optional) An integer greater than any key in the parent tree, shall be used as a key for the next entry added to the tree.
                </td>
            </tr>
            <tr>
                <td>**RoleMap**</td> 
                <td>dictionary</td>
                <td>
                (Optional) A dictionary that shall map the names of structure types used in the document to their approximate equivalents in the set of standard structure types (see [14.8.4], “Standard Structure Types”).
                </td>
            </tr>
            <tr>
                <td>**ClassMap**</td> 
                <td>dictionary</td>
                <td>
                (Optional) A dictionary that shall map name objects designating attribute classes to the corresponding attribute objects or arrays of attribute objects (see [14.7.5.2], “Attribute Classes”).
                </td>
            </tr>
        </tbody>
    </table>
        
    <table id="table322" markdown="span">
        <caption>**Table 322 – Entries in the structure tree root**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name</td>
                <td>
                (Optional) The type of PDF object that this dictionary describes; if present, shall be **StructElem** for a structure element.
                </td>
            </tr>
            <tr>
                <td>**S**</td> 
                <td>name</td>
                <td>
                (Required) The structure type, a name object identifying the nature of the structure element and its role within the document, such as a chapter, paragraph, or footnote (see [14.7.3], “Structure Types”). Names of structure types shall conform to the guidelines described in [Annex E](../a5.md).
                </td>
            </tr>
            <tr>
                <td>**P**</td> 
                <td>dictionary</td>
                <td>
                (Required; shall be an indirect reference) The structure element that is the immediate parent of this one in the structure hierarchy.
                </td>
            </tr>
            <tr>
                <td>**ID**</td> 
                <td>byte string</td>
                <td>
                (Optional) The element identifier, a byte string designating this structure element. The string shall be unique among all elements in the document’s structure hierarchy. The **IDTree** entry in the structure tree root (see [Table 322](#table322)) defines the correspondence between element identifiers and the structure elements they denote.
                </td>
            </tr>
            <tr>
                <td>**Pg**</td> 
                <td>dictionary</td>
                <td>
                (Optional; shall be an indirect reference) A page object representing a page on which some or all of the content items designated by the **K** entry shall be rendered.
                </td>
            </tr>
            <tr>
                <td>**K**</td> 
                <td>(various)</td>
                <td>
                (Optional) The children of this structure element. The value of this entry may be one of the following objects or an array consisting of one or more of the following objects: <br/><br/>
                • A structure element dictionary denoting another structure element <br/>
                • An integer marked-content identifier denoting a marked-content sequence <br/>
                • A marked-content reference dictionary denoting a marked-content sequence <br/>
                • An object reference dictionary denoting a PDF object <br/><br/>
                Each of these objects other than the first (structure element dictionary) shall be considered to be a content item; see [14.7.4], “Structure Content” for further discussion of each of these forms of representation. <br/>
                If the value of **K** is a dictionary containing no **Type** entry, it shall be assumed to be a structure element dictionary.
                </td>
            </tr>
            <tr>
                <td>**A**</td> 
                <td>(various)</td>
                <td>
                    (Optional) A single attribute object or array of attribute objects associated with this structure element. Each attribute object shall be either a dictionary or a stream. If the value of this entry is an array, each attribute object in the array may be followed by an integer representing its revision number (see [14.7.5], “Structure Attributes,” and [14.7.5.3], “Attribute Revision Numbers”).
                </td>
            </tr>
            <tr>
                <td>**C**</td> 
                <td>name or array</td>
                <td>
                    (Optional) An attribute class name or array of class names associated with this structure element. If the value of this entry is an array, each class name in the array may be followed by an integer representing its revision number (see 14.7.5.2, “Attribute Classes,” and [14.7.5.3], “Attribute Revision Numbers”). <br/>
                    If both the **A** and **C** entries are present and a given attribute is specified by both, the one specified by the **A** entry shall take precedence.
                </td>
            </tr>
            <tr>
                <td>**R**</td> 
                <td>integer</td>
                <td>
                (Optional) The current revision number of this structure element (see [14.7.5.3], “Attribute Revision Numbers”). The value shall be a non-negative integer. Default value: 0.
                </td>
            </tr>
            <tr>
                <td>**T**</td> 
                <td>text string</td>
                <td>
                   (Optional) The title of the structure element, a text string representing it in human-readable form. The title should characterize the specific structure element, such as Chapter 1, rather than merely a generic element type, such as Chapter.
                </td>
            </tr>
            <tr>
                <td>**Lang**</td> 
                <td>text string</td>
                <td>
                   (Optional; PDF 1.4) A language identifier specifying the natural language for all text in the structure element except where overridden by language specifications for nested structure elements or marked content (see [14.9.2], “Natural Language Specification”). If this entry is absent, the language (if any) specified in the document catalogue applies.
                </td>
            </tr>
            <tr>
                <td>**Alt**</td> 
                <td>text string</td>
                <td>
                   (Optional) An alternate description of the structure element and its children in human-readable form, which is useful when extracting the document’s contents in support of accessibility to users with disabilities or for other purposes (see [14.9.3], “Alternate Descriptions”).
                </td>
            </tr>
            <tr>
                <td>**E**</td> 
                <td>text string</td>
                <td>
                   (Optional; PDF 1.5) The expanded form of an abbreviation.
                </td>
            </tr>
            <tr>
                <td>**ActualText**</td> 
                <td>text string</td>
                <td>
                   (Optional; PDF 1.4) Text that is an exact replacement for the structure element and its children. This replacement text (which should apply to as small a piece of content as possible) is useful when extracting the document’s contents in support of accessibility to users with disabilities or for other purposes (see [14.9.4], “Replacement Text”).
                </td>
            </tr>
        </tbody>
    </table>

## 14.7.3 结构类型

**14.7.3 Structure Types**

=== "中文"

    Every structure element shall have a structure type, a name object that identifies the nature of the structure element and its role within the document (such as a chapter, paragraph, or footnote). To facilitate the interchange of content among conforming products, PDF defines a set of standard structure types; see [14.8.4], “Standard Structure Types.” Conforming products are not required to adopt them, however, and may use any names for their structure types.
    
    Where names other than the standard ones are used, a *role map* may be provided in the structure tree root,
    mapping the structure types used in the document to their nearest equivalents in the standard set.
    
    !!! note "NOTE 1"
    
        A structure type named Section used in the document might be mapped to the standard type Sect. The equivalence need not be exact; the role map merely indicates an approximate analogy between types, allowing conforming products to share nonstandard structure elements in a reasonable way.
    
    !!! note "NOTE 2"
    
        The same structure type may occur as both a key and a value in the role map, and circular chains of association are explicitly permitted. Therefore, a single role map may define a bidirectional mapping. A conforming reader using the role map should follow the chain of associations until it either finds a structure type it recognizes or returns to one it has already encountered.
    
    !!! note "NOTE 3"
    
        In PDF versions earlier than 1.5, standard element types were never remapped. Beginning with PDF 1.5, an element name shall always be mapped to its corresponding name in the role map, if there is one, even if the original name is one of the standard types. This shall be done to allow the element, for example, to represent a tag with the same name as a standard role, even though its use differs from the standard role.

=== "英文"

    Every structure element shall have a structure type, a name object that identifies the nature of the structure element and its role within the document (such as a chapter, paragraph, or footnote). To facilitate the interchange of content among conforming products, PDF defines a set of standard structure types; see [14.8.4], “Standard Structure Types.” Conforming products are not required to adopt them, however, and may use any names for their structure types.
    
    Where names other than the standard ones are used, a *role map* may be provided in the structure tree root,
    mapping the structure types used in the document to their nearest equivalents in the standard set.
    
    !!! note "NOTE 1"
    
        A structure type named Section used in the document might be mapped to the standard type Sect. The equivalence need not be exact; the role map merely indicates an approximate analogy between types, allowing conforming products to share nonstandard structure elements in a reasonable way.
    
    !!! note "NOTE 2"
    
        The same structure type may occur as both a key and a value in the role map, and circular chains of association are explicitly permitted. Therefore, a single role map may define a bidirectional mapping. A conforming reader using the role map should follow the chain of associations until it either finds a structure type it recognizes or returns to one it has already encountered.
    
    !!! note "NOTE 3"
    
        In PDF versions earlier than 1.5, standard element types were never remapped. Beginning with PDF 1.5, an element name shall always be mapped to its corresponding name in the role map, if there is one, even if the original name is one of the standard types. This shall be done to allow the element, for example, to represent a tag with the same name as a standard role, even though its use differs from the standard role.

## 14.7.4 结构内容

**14.7.4 Structure Content**

### 14.7.4.1 概述

**14.7.4.1 General**

=== "中文"

    Any structure element may have associated graphical content, consisting of one or more content items. Content items shall be graphical objects that exist in the document independently of the structure tree but are associated with structure elements as described in the following sub-clauses. Content items are of two kinds:
    
    - Marked-content sequences within content streams (see [14.7.4.2], “Marked-Content Sequences as Content Items”)
    - Complete PDF objects such as annotations and XObjects (see [14.7.4.3], “PDF Objects as Content Items”)
    
    The **K** entry in a structure element dictionary (see [Table 323](#table323)) shall specify the children of the structure element, which may include any number of content items, as well as child structure elements that may in turn have content items of their own.
    
    Content items shall be leaf nodes of the structure tree; that is, they may not have other content items nested within them for purposes of logical structure. The hierarchical relationship among structure elements shall be represented entirely by the **K** entries of the structure element dictionaries, not by nesting of the associated content items. Therefore, the following restrictions shall apply:
    
    - A marked-content sequence delimiting a structure content item may not have another marked-content sequence for a content item nested within it though non-structural marked content shall be allowed.
    - A structure content item shall not invoke (with the **Do** operator) an XObject that is itself a structure content item.

=== "英文"

    Any structure element may have associated graphical content, consisting of one or more content items. Content items shall be graphical objects that exist in the document independently of the structure tree but are associated with structure elements as described in the following sub-clauses. Content items are of two kinds:
    
    - Marked-content sequences within content streams (see [14.7.4.2], “Marked-Content Sequences as Content Items”)
    - Complete PDF objects such as annotations and XObjects (see [14.7.4.3], “PDF Objects as Content Items”)
    
    The **K** entry in a structure element dictionary (see [Table 323](#table323)) shall specify the children of the structure element, which may include any number of content items, as well as child structure elements that may in turn have content items of their own.
    
    Content items shall be leaf nodes of the structure tree; that is, they may not have other content items nested within them for purposes of logical structure. The hierarchical relationship among structure elements shall be represented entirely by the **K** entries of the structure element dictionaries, not by nesting of the associated content items. Therefore, the following restrictions shall apply:
    
    - A marked-content sequence delimiting a structure content item may not have another marked-content sequence for a content item nested within it though non-structural marked content shall be allowed.
    - A structure content item shall not invoke (with the **Do** operator) an XObject that is itself a structure content item.

### 14.7.4.2 标记内容序列作为内容项

**14.7.4.2 Marked-Content Sequences as Content Items**

=== "中文"

    A sequence of graphics operators in a content stream may be specified as a content item of a structure element in the following way:
    
    - The operators shall be bracketed as a marked-content sequence between **BDC** and **EMC** operators (see [14.6], “Marked Content”). Although the tag associated with a marked-content sequence is not directly related to the document’s logical structure, it should be the same as the structure type of the associated structure element.
    - The marked-content sequence shall have a property list (see [14.6.2], “Property Lists”) containing an **MCID** entry, which i shall be an integer *marked-content identifier* that uniquely identifies the marked-content sequence within its content stream, as shown in the following example:
    
    !!! info "EXAMPLE 1"
    
        ```text
        2 0 obj                    % Page object
            << /Type /Page
                /Contents 3 0 R    % Content stream
                …
            >>
        endobj
        
        3 0 obj
            << /Length … >>            % Page's content stream
        stream
            …
            /P << /MCID 0 >>            % Start of marked-content sequence
                BDC
                    …
                    ( Here is some text ) Tj
                    …
                EMC                    % End of marked-content sequence
            …
        endstream
        endobj
        ```
    
    !!! note "NOTE"
    
        This example and the following examples omit required **StructParents** entries in the objects used as content items (see [14.7.4.4], “Finding Structure Elements from Content Items”).
    
    A structure element dictionary may include one or more marked-content sequences as content items by referring to them in its **K** entry (see [Table 323](#table323)). This reference may have two forms:
    
    - A dictionary object called a marked-content reference. [Table 324](#table324) shows the contents of this type of dictionary, which shall specify the marked-content identifier, as well other information identifying the stream in which the sequence is contained. Example 2 illustrates the use of a marked-content reference to the marked-content sequence shown in Example 3.
    - An integer that specifies the marked-content identifier. This may be done in the common case where the marked-content sequence is contained in the content stream of the page that is specified in the **Pg** entry of the structure element dictionary. Example 3 shows a structure element that has three children: a marked- content sequence specified by a marked-content identifier, as well as two other structure elements.
    
    !!! info "EXAMPLE 2"
    
    ```text
    1 0 obj                        % Structure element
        << /Type /StructElem
            /S /P                  % Structure type
            /P …                   % Parent in structure hierarchy
            /K << /Type /MCR
                /Pg 2 0 R          % Page containing marked-content sequence
                /MCID 0            % Marked-content identifier
            >>
        >>
    endobj
    ```
    
    <table id="table324" markdown="span">
        <caption>**Table 324 – Entries in a marked-content reference dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name</td>
                <td>
                    (Required) The type of PDF object that this dictionary describes; shall be **MCR** for a marked-content reference.
                </td>
            </tr>
            <tr>
                <td>**Pg**</td> 
                <td>dictionary</td>
                <td>
                (Optional; shall be an indirect reference) The page object representing the page on which the graphics objects in the marked-content sequence shall be rendered. This entry overrides any **Pg** entry in the structure element containing the marked-content reference; it shall be required if the structure element has no such entry.
                </td>
            </tr>
            <tr>
                <td>**Stm**</td> 
                <td>stream</td>
                <td>
                (Optional; shall be an indirect reference) The content stream containing the marked-content sequence. This entry should be present only if the marked-content sequence resides in a content stream other than the content stream for the page (see [8.10], “Form XObjects” and [12.5.5], “Appearance Streams”). <br/>
                If this entry is absent, the marked-content sequence shall be contained in the content stream of the page identified by Pg (either in the marked-content reference dictionary or in the parent structure element).
                </td>
            </tr>
            <tr>
                <td>**StmOwn**</td> 
                <td>(any)</td>
                <td>
                (Optional; shall be an indirect reference) The PDF object owning the stream identified by **Stems** annotation to which an appearance stream belongs.
                </td>
            </tr>
            <tr>
                <td>**MCID**</td> 
                <td>integer</td>
                <td>
                (Required) The marked-content identifier of the marked-content sequence within its content stream.
                </td>
            </tr>
        </tbody>
    </table>
    
    !!! info "EXAMPLE 3"
    
        ```text
        1 0 obj                    % Containing structure element
            << /Type /StructElem
                /S /MixedContainer    % Structure type
                /P …                  % Parent in structure hierarchy
                /Pg 2 0 R             % Page containing marked-content sequence
                /K [ 4 0 R            % Three children: a structure element
                    0                 % a marked-content identifier
                    50R               % another structure element
                ]
            >>
        endobj
        
        2 0 obj                        % Page object
            << /Type /Page
                /Contents 3 0 R        % Content stream
                …
            >>
        endobj
        
        3 0 obj                        % Page's content stream
            << /Length … >>
        stream
            …
            /P << /MCID 0 >>            % Start of marked-content sequence
                BDC
                    ( Here is some text ) Tj
                    …
                EMC                    % End of marked-content sequence
            …
        endstream
        endobj
        ```
    
    Content streams other than page contents may also contain marked content sequences that are content items of structure elements. The content of form XObjects may be incorporated into structure elements in one of the following ways:
    
    - A **Do** operator that paints a form XObject may be part of a marked-content sequence that shall be associated with a structure element (see Example 4). In this case, the entire form XObject shall be considered to be part of the structure element’s content, as if it were inserted into the marked-content sequence at the point of the **Do** operator. The form XObject shall not in turn contain any marked-content sequences associated with this or other structure elements.
    - The content stream of a form XObject may contain one or more marked-content sequences that shall be associated with structure elements (see Example 5). The form XObject may have arbitrary substructure, containing any number of marked-content sequences associated with logical structure elements. However, any **Do** operator that paints the form XObject should not be part of a logical structure content item.
    
    A form XObject that is painted with multiple invocations of the **Do** operator may be incorporated into the document’s logical structure only by the first method, with each invocation of **Do** individually associated with a structure element.
    
    !!! info "EXAMPLE 4"
    
        ```text
        1 0 obj                    % Structure element
            << /Type /StructElem
                /S /P                % Structure type
                /P …                 % Parent in structure hierarchy
                /Pg 2 0 R            % Page containing marked-content sequence
                /K 0                 % Marked-content identifier
            >>
        endobj
        
        2 0 obj                         % Page object
            << /Type /Page
                /Resources << /XObject << /Fm4 4 0 R >>    % Resource dictionary
                           >>                              % containing form XObject
                /Contents 3 0 R                            % Content stream
                …
            >>
        endobj
        
        3 0 obj                        % Page's content stream
            << /Length … >>
        stream
            …
            /P << /MCID 0 >>                % Start of marked-content sequence
                BDC
                    /Fm4 Do                 % Paint form XObject
                EMC                         % End of marked-content sequence
            …
        endstream
        endobj
        
        4 0 obj                            % Form XObject
            << /Type /XObject
                /Subtype /Form
                /Length …
            >>
        stream
            …
            ( Here is some text ) Tj
            …
        endstream
        endobj
        ```
    
    !!! info "EXAMPLE 5"
    
        ```text
        1 0 obj                        % Structure element
            << /Type /StructElem
                /S /P                    % Structure type
                /P …                     % Parent in structure hierarchy
                /K << /Type /MCR
                    /Pg 2 0 R               % Page containing marked-content sequence
                    /Stm 4 0 R              % Stream containing marked-content sequence
                    /MCID 0                 % Marked-content identifier
                >>
            >>
        endobj
        
        2 0 obj                            % Page object
            << /Type /Page
                /Resources << /XObject << /Fm4 4 0 R >>  % Resource dictionary
                           >>                            % containing form XObject
                /Contents 3 0 R                          % Content stream
                …
            >>
        endobj
        
        3 0 obj                            % Page's content stream
            << /Length … >>
        stream
            …
            /Fm4 Do                        % Paint form XObject
            …
        endstream
        endobj
        
        4 0 obj                            % Form XObject
            << /Type /XObject
                /Subtype /Form
                /Length …
            >>
        stream
            …
            /P << /MCID 0 >>                % Start of marked-content sequence
                BDC
                …
                ( Here is some text ) Tj
                …
            EMC                            % End of marked-content sequence
            …
        endstream
        endobj
        ```

=== "英文"

    A sequence of graphics operators in a content stream may be specified as a content item of a structure element in the following way:
    
    - The operators shall be bracketed as a marked-content sequence between **BDC** and **EMC** operators (see [14.6], “Marked Content”). Although the tag associated with a marked-content sequence is not directly related to the document’s logical structure, it should be the same as the structure type of the associated structure element.
    - The marked-content sequence shall have a property list (see [14.6.2], “Property Lists”) containing an **MCID** entry, which i shall be an integer *marked-content identifier* that uniquely identifies the marked-content sequence within its content stream, as shown in the following example:
    
    !!! info "EXAMPLE 1"
    
        ```text
        2 0 obj                    % Page object
            << /Type /Page
                /Contents 3 0 R    % Content stream
                …
            >>
        endobj
        
        3 0 obj
            << /Length … >>            % Page's content stream
        stream
            …
            /P << /MCID 0 >>            % Start of marked-content sequence
                BDC
                    …
                    ( Here is some text ) Tj
                    …
                EMC                    % End of marked-content sequence
            …
        endstream
        endobj
        ```
    
    !!! note "NOTE"
    
        This example and the following examples omit required **StructParents** entries in the objects used as content items (see [14.7.4.4], “Finding Structure Elements from Content Items”).
    
    A structure element dictionary may include one or more marked-content sequences as content items by referring to them in its **K** entry (see [Table 323](#table323)). This reference may have two forms:
    
    - A dictionary object called a marked-content reference. [Table 324](#table324) shows the contents of this type of dictionary, which shall specify the marked-content identifier, as well other information identifying the stream in which the sequence is contained. Example 2 illustrates the use of a marked-content reference to the marked-content sequence shown in Example 3.
    - An integer that specifies the marked-content identifier. This may be done in the common case where the marked-content sequence is contained in the content stream of the page that is specified in the **Pg** entry of the structure element dictionary. Example 3 shows a structure element that has three children: a marked- content sequence specified by a marked-content identifier, as well as two other structure elements.
    
    !!! info "EXAMPLE 2"
    
    ```text
    1 0 obj                        % Structure element
        << /Type /StructElem
            /S /P                  % Structure type
            /P …                   % Parent in structure hierarchy
            /K << /Type /MCR
                /Pg 2 0 R          % Page containing marked-content sequence
                /MCID 0            % Marked-content identifier
            >>
        >>
    endobj
    ```
    
    <table id="table324" markdown="span">
        <caption>**Table 324 – Entries in a marked-content reference dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name</td>
                <td>
                    (Required) The type of PDF object that this dictionary describes; shall be **MCR** for a marked-content reference.
                </td>
            </tr>
            <tr>
                <td>**Pg**</td> 
                <td>dictionary</td>
                <td>
                (Optional; shall be an indirect reference) The page object representing the page on which the graphics objects in the marked-content sequence shall be rendered. This entry overrides any **Pg** entry in the structure element containing the marked-content reference; it shall be required if the structure element has no such entry.
                </td>
            </tr>
            <tr>
                <td>**Stm**</td> 
                <td>stream</td>
                <td>
                (Optional; shall be an indirect reference) The content stream containing the marked-content sequence. This entry should be present only if the marked-content sequence resides in a content stream other than the content stream for the page (see [8.10], “Form XObjects” and [12.5.5], “Appearance Streams”). <br/>
                If this entry is absent, the marked-content sequence shall be contained in the content stream of the page identified by Pg (either in the marked-content reference dictionary or in the parent structure element).
                </td>
            </tr>
            <tr>
                <td>**StmOwn**</td> 
                <td>(any)</td>
                <td>
                (Optional; shall be an indirect reference) The PDF object owning the stream identified by **Stems** annotation to which an appearance stream belongs.
                </td>
            </tr>
            <tr>
                <td>**MCID**</td> 
                <td>integer</td>
                <td>
                (Required) The marked-content identifier of the marked-content sequence within its content stream.
                </td>
            </tr>
        </tbody>
    </table>
    
    !!! info "EXAMPLE 3"
    
        ```text
        1 0 obj                    % Containing structure element
            << /Type /StructElem
                /S /MixedContainer    % Structure type
                /P …                  % Parent in structure hierarchy
                /Pg 2 0 R             % Page containing marked-content sequence
                /K [ 4 0 R            % Three children: a structure element
                    0                 % a marked-content identifier
                    50R               % another structure element
                ]
            >>
        endobj
        
        2 0 obj                        % Page object
            << /Type /Page
                /Contents 3 0 R        % Content stream
                …
            >>
        endobj
        
        3 0 obj                        % Page's content stream
            << /Length … >>
        stream
            …
            /P << /MCID 0 >>            % Start of marked-content sequence
                BDC
                    ( Here is some text ) Tj
                    …
                EMC                    % End of marked-content sequence
            …
        endstream
        endobj
        ```
    
    Content streams other than page contents may also contain marked content sequences that are content items of structure elements. The content of form XObjects may be incorporated into structure elements in one of the following ways:
    
    - A **Do** operator that paints a form XObject may be part of a marked-content sequence that shall be associated with a structure element (see Example 4). In this case, the entire form XObject shall be considered to be part of the structure element’s content, as if it were inserted into the marked-content sequence at the point of the **Do** operator. The form XObject shall not in turn contain any marked-content sequences associated with this or other structure elements.
    - The content stream of a form XObject may contain one or more marked-content sequences that shall be associated with structure elements (see Example 5). The form XObject may have arbitrary substructure, containing any number of marked-content sequences associated with logical structure elements. However, any **Do** operator that paints the form XObject should not be part of a logical structure content item.
    
    A form XObject that is painted with multiple invocations of the **Do** operator may be incorporated into the document’s logical structure only by the first method, with each invocation of **Do** individually associated with a structure element.
    
    !!! info "EXAMPLE 4"
    
        ```text
        1 0 obj                    % Structure element
            << /Type /StructElem
                /S /P                % Structure type
                /P …                 % Parent in structure hierarchy
                /Pg 2 0 R            % Page containing marked-content sequence
                /K 0                 % Marked-content identifier
            >>
        endobj
        
        2 0 obj                         % Page object
            << /Type /Page
                /Resources << /XObject << /Fm4 4 0 R >>    % Resource dictionary
                           >>                              % containing form XObject
                /Contents 3 0 R                            % Content stream
                …
            >>
        endobj
        
        3 0 obj                        % Page's content stream
            << /Length … >>
        stream
            …
            /P << /MCID 0 >>                % Start of marked-content sequence
                BDC
                    /Fm4 Do                 % Paint form XObject
                EMC                         % End of marked-content sequence
            …
        endstream
        endobj
        
        4 0 obj                            % Form XObject
            << /Type /XObject
                /Subtype /Form
                /Length …
            >>
        stream
            …
            ( Here is some text ) Tj
            …
        endstream
        endobj
        ```
    
    !!! info "EXAMPLE 5"
    
        ```text
        1 0 obj                        % Structure element
            << /Type /StructElem
                /S /P                    % Structure type
                /P …                     % Parent in structure hierarchy
                /K << /Type /MCR
                    /Pg 2 0 R               % Page containing marked-content sequence
                    /Stm 4 0 R              % Stream containing marked-content sequence
                    /MCID 0                 % Marked-content identifier
                >>
            >>
        endobj
        
        2 0 obj                            % Page object
            << /Type /Page
                /Resources << /XObject << /Fm4 4 0 R >>  % Resource dictionary
                           >>                            % containing form XObject
                /Contents 3 0 R                          % Content stream
                …
            >>
        endobj
        
        3 0 obj                            % Page's content stream
            << /Length … >>
        stream
            …
            /Fm4 Do                        % Paint form XObject
            …
        endstream
        endobj
        
        4 0 obj                            % Form XObject
            << /Type /XObject
                /Subtype /Form
                /Length …
            >>
        stream
            …
            /P << /MCID 0 >>                % Start of marked-content sequence
                BDC
                …
                ( Here is some text ) Tj
                …
            EMC                            % End of marked-content sequence
            …
        endstream
        endobj
        ```

### 14.7.4.3 PDF对象作为内容项

**14.7.4.3 PDF Objects as Content Items**

=== "中文"

    When a structure element’s content includes an entire PDF object, such as an XObject or an annotation, that is associated with a page but not directly included in the page’s content stream, the object shall be identified in the structure element’s **K** entry by an *object reference dictionary* (see [Table 325](#table325)).
    
    !!! note "NOTE 1"
    
        This form of reference is used only for entire objects. If the referenced content forms only part of the object’s content stream, it is instead handled as a marked-content sequence, as described in the preceding sub-clause.
    
    <table id="table324" markdown="span">
        <caption>**Table 324 – Entries in a marked-content reference dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name</td>
                <td>
                    (Required) The type of PDF object that this dictionary describes; shall be **OBJR** for an object reference.
                </td>
            </tr>
            <tr>
                <td>**Pg**</td> 
                <td>dictionary</td>
                <td>
                (Optional; shall be an indirect reference) The page object of the page on which the object shall be rendered. This entry overrides any **Pg** entry in the structure element containing the object reference; it shall be used if the structure element has no such entry.
                </td>
            </tr>
            <tr>
                <td>**Obj**</td> 
                <td>(any)</td>
                <td>
                (Required; shall be an indirect reference) The referenced object.
                </td>
            </tr>
        </tbody>
    </table>
    
    !!! note "NOTE 2"
    
        If the referenced object is rendered on multiple pages, each rendering requires a separate object reference. However, if it is rendered multiple times on the same page, just a single object reference suffices to identify all of them. (If it is important to distinguish between multiple renditions of the same XObject on the same page, they should be accessed by means of marked-content sequences enclosing particular invocations of the **Do** operator rather than through object references.)

=== "英文"

    When a structure element’s content includes an entire PDF object, such as an XObject or an annotation, that is associated with a page but not directly included in the page’s content stream, the object shall be identified in the structure element’s **K** entry by an *object reference dictionary* (see [Table 325](#table325)).
    
    !!! note "NOTE 1"
    
        This form of reference is used only for entire objects. If the referenced content forms only part of the object’s content stream, it is instead handled as a marked-content sequence, as described in the preceding sub-clause.
    
    <table id="table325" markdown="span">
        <caption>**Table 325 – Entries in an object reference dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**Type**</td> 
                <td>name</td>
                <td>
                    (Required) The type of PDF object that this dictionary describes; shall be **OBJR** for an object reference.
                </td>
            </tr>
            <tr>
                <td>**Pg**</td> 
                <td>dictionary</td>
                <td>
                (Optional; shall be an indirect reference) The page object of the page on which the object shall be rendered. This entry overrides any **Pg** entry in the structure element containing the object reference; it shall be used if the structure element has no such entry.
                </td>
            </tr>
            <tr>
                <td>**Obj**</td> 
                <td>(any)</td>
                <td>
                (Required; shall be an indirect reference) The referenced object.
                </td>
            </tr>
        </tbody>
    </table>
    
    !!! note "NOTE 2"
    
        If the referenced object is rendered on multiple pages, each rendering requires a separate object reference. However, if it is rendered multiple times on the same page, just a single object reference suffices to identify all of them. (If it is important to distinguish between multiple renditions of the same XObject on the same page, they should be accessed by means of marked-content sequences enclosing particular invocations of the **Do** operator rather than through object references.)

### 14.7.4.4 从内容项中查找结构元素

**14.7.4.4 Finding Structure Elements from Content Items**

=== "中文"

    Because a stream may not contain object references, there is no way for content items that are marked-content sequences to refer directly back to their parent structure elements (the ones to which they belong as content items). Instead, a different mechanism, the *structural parent tree*, shall be provided for this purpose. For consistency, content items that are entire PDF objects, such as XObjects, also shall use the parent tree to refer to their parent structure elements.
    
    The parent tree is a number tree (see [7.9.7], “Number Trees”), accessed from the **ParentTree** entry in a document’s structure tree root ([Table 322](#table322)). The tree shall contain an entry for each object that is a content item of at least one structure element and for each content stream containing at least one marked-content sequence that is a content item. The key for each entry shall be an integer given as the value of the **StructParent** or **StructParents** entry in the object (see [Table 326](#table326)). The values of these entries shall be as follows:
    
    - For an object identified as a content item by means of an object reference (see [14.7.4.3], “PDF Objects as Content Items”), the value shall be an indirect reference to the parent structure element.
    - For a content stream containing marked-content sequences that are content items, the value shall be an array of indirect references to the sequences’ parent structure elements. The array element corresponding to each sequence shall be found by using the sequence’s marked-content identifier as a zero-based index into the array.
    
    !!! note "NOTE"
    
        Because marked-content identifiers serve as indices into an array in the structural parent tree, their assigned values should be as small as possible to conserve space in the array.
    
    The **ParentTreeNextKey** entry in the structure tree root shall hold an integer value greater than any that is currently in use as a key in the structural parent tree. Whenever a new entry is added to the parent tree, the current value of **ParentTreeNextKey** shall be used as its key. The value shall be then incremented to prepare for the next new entry to be added.
    
    To locate the relevant parent tree entry, each object or content stream that is represented in the tree shall contain a special dictionary entry, **StructParent** or **StructParents** (see [Table 326](#table326)). Depending on the type of content item, this entry may appear in the page object of a page containing marked-content sequences, in the stream dictionary of a form or image XObject, in an annotation dictionary, or in any other type of object dictionary that is included as a content item in a structure element. Its value shall be the integer key under which the entry corresponding to the object shall be found in the structural parent tree.
    
    <table id="table326" markdown="span">
        <caption>**Table 326 – Additional dictionary entries for structure element access**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**StructParent**</td> 
                <td>integer</td>
                <td>
                    (Required for all objects that are structural content items; PDF 1.3) The integer key of this object’s entry in the structural parent tree.
                </td>
            </tr>
            <tr>
                <td>**StructParents**</td> 
                <td>integer</td>
                <td>
                    (Required for all content streams containing marked-content sequences that are structural content items; PDF 1.3) The integer key of this object’s entry in the structural parent tree. <br/>
                    At most one of these two entries shall be present in a given object. An object may be either a content item in its entirety or a container for marked-content sequences that are content items, but not both.
                </td>
            </tr>
        </tbody>
    </table>
    
    For a content item identified by an object reference, the parent structure element may be found by using the value of the **StructParent** entry in the item’s object dictionary as a retrieval key in the structural parent tree (found in the **ParentTree** entry of the structure tree root). The corresponding value in the parent tree shall be a reference to the parent structure element (see Example 1).
    
    !!! info "EXAMPLE 1"
    
        ```text
        1 0 obj                    % Parent structure element
            << /Type /StructElem
                …
                /K << /Type /OBJR          % Object reference
                      /Pg 2 0 R            % Page containing form XObject
                      /Obj 4 0 R           % Reference to form XObject
                >>
            >>
        endobj
        
        2 0 obj                            % Page object
            << /Type /Page
                /Resources << /XObject << /Fm4 4 0 R >>    % Resource dictionary
                           >>                              % containing form XObject
                /Contents 3 0 R                            % Content stream
                …
            >>
        endobj
        
        3 0 obj                            % Page's content stream
            << /Length … >>
        stream
            …
            /Fm4 Do                        % Paint form XObject
            …
        endstream
        endobj
        
        4 0 obj                        % Form XObject
            << /Type /XObject
                /Subtype /Form
                /Length …
                /StructParent 6        % Parent tree key
            >>
        stream
            …
        endstream
        endobj
        
        100 0 obj                        % Parent tree (accessed from structure tree root)
            << /Nums [ 0 101 0 R
                        1 102 0 R
                        …
                        6 10R            % Entry for page object 2; points back
                        …                % to parent structure element
                     ]
            >>
        endobj
        ```
    
    For a content item that is a marked-content sequence, the retrieval method is similar but slightly more complicated. Because a marked-content sequence is not an object in its own right, its parent tree key shall be found in the **StructParents** entry of the page object or other content stream in which the sequence resides. The value retrieved from the parent tree shall not be a reference to the parent structure element itself but to an array of such references—one for each marked-content sequence contained within that content stream. The parent structure element for the given sequence shall be found by using the sequence’s marked-content identifier as an index into this array (see Example 2).
    
    !!! info "EXAMPLE 2"
    
        ```text
        1 0 obj                    % Parent structure element
            << /Type /StructElem
                …
                /Pg 2 0 R                   % Page containing marked-content sequence
                /K 0                        % Marked-content identifier
            >>
        endobj
        
        2 0 obj                    % Page object
            << /Type /Page
                /Contents 3 0 R            % Content stream
                /StructParents 6            % Parent tree key
                …
            >>
        endobj
        
        3 0 obj                    % Page's content stream
            << /Length … >>
        stream
            …
            /P << /MCID 0 >>            % Start of marked-content sequence
                BDC
                    ( Here is some text ) TJ
                    …
                EMC                         % End of marked-content sequence
            …
        endstream
        endobj
        
        100 0 obj                    % Parent tree (accessed from structure tree root)
            << /Nums [ 0 101 0 R
                        1 102 0 R
                        …
                        6 [1 0 R]   % Entry for page object 2; array element at index 0
                        …           % points back to parent structure element
                    ]
            >>
        endobj
        ```

=== "英文"

    Because a stream may not contain object references, there is no way for content items that are marked-content sequences to refer directly back to their parent structure elements (the ones to which they belong as content items). Instead, a different mechanism, the *structural parent tree*, shall be provided for this purpose. For consistency, content items that are entire PDF objects, such as XObjects, also shall use the parent tree to refer to their parent structure elements.
    
    The parent tree is a number tree (see [7.9.7], “Number Trees”), accessed from the **ParentTree** entry in a document’s structure tree root ([Table 322](#table322)). The tree shall contain an entry for each object that is a content item of at least one structure element and for each content stream containing at least one marked-content sequence that is a content item. The key for each entry shall be an integer given as the value of the **StructParent** or **StructParents** entry in the object (see [Table 326](#table326)). The values of these entries shall be as follows:
    
    - For an object identified as a content item by means of an object reference (see [14.7.4.3], “PDF Objects as Content Items”), the value shall be an indirect reference to the parent structure element.
    - For a content stream containing marked-content sequences that are content items, the value shall be an array of indirect references to the sequences’ parent structure elements. The array element corresponding to each sequence shall be found by using the sequence’s marked-content identifier as a zero-based index into the array.
    
    !!! note "NOTE"
    
        Because marked-content identifiers serve as indices into an array in the structural parent tree, their assigned values should be as small as possible to conserve space in the array.
    
    The **ParentTreeNextKey** entry in the structure tree root shall hold an integer value greater than any that is currently in use as a key in the structural parent tree. Whenever a new entry is added to the parent tree, the current value of **ParentTreeNextKey** shall be used as its key. The value shall be then incremented to prepare for the next new entry to be added.
    
    To locate the relevant parent tree entry, each object or content stream that is represented in the tree shall contain a special dictionary entry, **StructParent** or **StructParents** (see [Table 326](#table326)). Depending on the type of content item, this entry may appear in the page object of a page containing marked-content sequences, in the stream dictionary of a form or image XObject, in an annotation dictionary, or in any other type of object dictionary that is included as a content item in a structure element. Its value shall be the integer key under which the entry corresponding to the object shall be found in the structural parent tree.
    
    <table id="table326" markdown="span">
        <caption>**Table 326 – Additional dictionary entries for structure element access**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**StructParent**</td> 
                <td>integer</td>
                <td>
                    (Required for all objects that are structural content items; PDF 1.3) The integer key of this object’s entry in the structural parent tree.
                </td>
            </tr>
            <tr>
                <td>**StructParents**</td> 
                <td>integer</td>
                <td>
                    (Required for all content streams containing marked-content sequences that are structural content items; PDF 1.3) The integer key of this object’s entry in the structural parent tree. <br/>
                    At most one of these two entries shall be present in a given object. An object may be either a content item in its entirety or a container for marked-content sequences that are content items, but not both.
                </td>
            </tr>
        </tbody>
    </table>
    
    For a content item identified by an object reference, the parent structure element may be found by using the value of the **StructParent** entry in the item’s object dictionary as a retrieval key in the structural parent tree (found in the **ParentTree** entry of the structure tree root). The corresponding value in the parent tree shall be a reference to the parent structure element (see Example 1).
    
    !!! info "EXAMPLE 1"
    
        ```text
        1 0 obj                    % Parent structure element
            << /Type /StructElem
                …
                /K << /Type /OBJR          % Object reference
                      /Pg 2 0 R            % Page containing form XObject
                      /Obj 4 0 R           % Reference to form XObject
                >>
            >>
        endobj
        
        2 0 obj                            % Page object
            << /Type /Page
                /Resources << /XObject << /Fm4 4 0 R >>    % Resource dictionary
                           >>                              % containing form XObject
                /Contents 3 0 R                            % Content stream
                …
            >>
        endobj
        
        3 0 obj                            % Page's content stream
            << /Length … >>
        stream
            …
            /Fm4 Do                        % Paint form XObject
            …
        endstream
        endobj
        
        4 0 obj                        % Form XObject
            << /Type /XObject
                /Subtype /Form
                /Length …
                /StructParent 6        % Parent tree key
            >>
        stream
            …
        endstream
        endobj
        
        100 0 obj                        % Parent tree (accessed from structure tree root)
            << /Nums [ 0 101 0 R
                        1 102 0 R
                        …
                        6 10R            % Entry for page object 2; points back
                        …                % to parent structure element
                     ]
            >>
        endobj
        ```
    
    For a content item that is a marked-content sequence, the retrieval method is similar but slightly more complicated. Because a marked-content sequence is not an object in its own right, its parent tree key shall be found in the **StructParents** entry of the page object or other content stream in which the sequence resides. The value retrieved from the parent tree shall not be a reference to the parent structure element itself but to an array of such references—one for each marked-content sequence contained within that content stream. The parent structure element for the given sequence shall be found by using the sequence’s marked-content identifier as an index into this array (see Example 2).
    
    !!! info "EXAMPLE 2"
    
        ```text
        1 0 obj                    % Parent structure element
            << /Type /StructElem
                …
                /Pg 2 0 R                   % Page containing marked-content sequence
                /K 0                        % Marked-content identifier
            >>
        endobj
        
        2 0 obj                    % Page object
            << /Type /Page
                /Contents 3 0 R            % Content stream
                /StructParents 6            % Parent tree key
                …
            >>
        endobj
        
        3 0 obj                    % Page's content stream
            << /Length … >>
        stream
            …
            /P << /MCID 0 >>            % Start of marked-content sequence
                BDC
                    ( Here is some text ) TJ
                    …
                EMC                         % End of marked-content sequence
            …
        endstream
        endobj
        
        100 0 obj                    % Parent tree (accessed from structure tree root)
            << /Nums [ 0 101 0 R
                        1 102 0 R
                        …
                        6 [1 0 R]   % Entry for page object 2; array element at index 0
                        …           % points back to parent structure element
                    ]
            >>
        endobj
        ```

## 14.7.5 结构属性

**14.7.5 Structure Attributes**

### 14.7.5.1 概述

**14.7.5.1 General**

=== "中文"

    A conforming product that processes logical structure may attach additional information, called attributes, to any structure element. The attribute information shall be held in one or more attribute objects associated with the structure element. An attribute object shall be a dictionary or stream that includes an **O** entry (see [Table 327](#table327)) identifying the conforming product that owns the attribute information. Other entries shall represent the attributes: the keys shall be attribute names, and values shall be the corresponding attribute values. To facilitate the interchange of content among conforming products, PDF defines a set of standard structure attributes identified by specific standard owners; see [14.8.5], “Standard Structure Attributes.” In addition, (PDF 1.6) attributes may be used to represent user properties (see [14.7.5.4], “User Properties”).
        
    <table id="table327" markdown="span">
        <caption>**Table 327 – Entry common to all attribute object dictionaries**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**O**</td> 
                <td>name</td>
                <td>
                    (Required) The name of the conforming product owning the attribute data. The name shall conform to the guidelines described in [Annex E](../a5.md).
                </td>
            </tr>
        </tbody>
    </table>
    
    Any conforming product may attach attributes to any structure element, even one created by another conforming product. Multiple conforming products may attach attributes to the same structure element. The **A** entry in the structure element dictionary (see [Table 323](#table323)) shall hold either a single attribute object or an array of such objects, together with revision numbers for coordinating attributes created by different conforming products (see [14.7.5.3], “Attribute Revision Numbers”). A conforming product creating or destroying the second attribute object for a structure element shall be responsible for converting the value of the **A** entry from a single object to an array or vice versa, as well as for maintaining the integrity of the revision numbers. No inherent order shall be defined for the attribute objects in an **A** array, but new objects should be added at the end of the array so that the first array element is the one belonging to the conforming product that originally created the structure element.

=== "英文"

    A conforming product that processes logical structure may attach additional information, called attributes, to any structure element. The attribute information shall be held in one or more attribute objects associated with the structure element. An attribute object shall be a dictionary or stream that includes an **O** entry (see [Table 327](#table327)) identifying the conforming product that owns the attribute information. Other entries shall represent the attributes: the keys shall be attribute names, and values shall be the corresponding attribute values. To facilitate the interchange of content among conforming products, PDF defines a set of standard structure attributes identified by specific standard owners; see [14.8.5], “Standard Structure Attributes.” In addition, (PDF 1.6) attributes may be used to represent user properties (see [14.7.5.4], “User Properties”).
        
    <table id="table327" markdown="span">
        <caption>**Table 327 – Entry common to all attribute object dictionaries**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**O**</td> 
                <td>name</td>
                <td>
                    (Required) The name of the conforming product owning the attribute data. The name shall conform to the guidelines described in [Annex E](../a5.md).
                </td>
            </tr>
        </tbody>
    </table>
    
    Any conforming product may attach attributes to any structure element, even one created by another conforming product. Multiple conforming products may attach attributes to the same structure element. The **A** entry in the structure element dictionary (see [Table 323](#table323)) shall hold either a single attribute object or an array of such objects, together with revision numbers for coordinating attributes created by different conforming products (see [14.7.5.3], “Attribute Revision Numbers”). A conforming product creating or destroying the second attribute object for a structure element shall be responsible for converting the value of the **A** entry from a single object to an array or vice versa, as well as for maintaining the integrity of the revision numbers. No inherent order shall be defined for the attribute objects in an **A** array, but new objects should be added at the end of the array so that the first array element is the one belonging to the conforming product that originally created the structure element.

### 14.7.5.2 属性类别

**14.7.5.2 Attribute Classes**

=== "中文"

    If many structure elements share the same set of attribute values, they may be defined as an attribute class sharing the identical attribute object. Structure elements shall refer to the class by name. The association between class names and attribute objects shall be defined by a dictionary called the class map, that shall be kept in the **ClassMap** entry of the structure tree root (see [Table 322](#table322)). Each key in the class map shall be a name object denoting the name of a class. The corresponding value shall be an attribute object or an array of such objects.
    
    !!! note "NOTE"
    
        PDF attribute classes are unrelated to the concept of a class in object-oriented programming languages such as Java and C++. Attribute classes are strictly a mechanism for storing attribute information in a more compact form; they have no inheritance properties like those of true object-oriented classes.
    
    The **C** entry in a structure element dictionary (see [Table 323](#table323)) shall contain a class name or an array of class names (typically accompanied by revision numbers as well; see [14.7.5.3], “Attribute Revision Numbers”). For each class named in the C entry, the corresponding attribute object or objects shall be considered to be attached to the given structure element, along with those identified in the element’s **A** entry. If both the **A** and **C** entries are present and a given attribute is specified by both, the one specified by the **A** entry shall take precedence.

=== "英文"

    If many structure elements share the same set of attribute values, they may be defined as an attribute class sharing the identical attribute object. Structure elements shall refer to the class by name. The association between class names and attribute objects shall be defined by a dictionary called the class map, that shall be kept in the **ClassMap** entry of the structure tree root (see [Table 322](#table322)). Each key in the class map shall be a name object denoting the name of a class. The corresponding value shall be an attribute object or an array of such objects.
    
    !!! note "NOTE"
    
        PDF attribute classes are unrelated to the concept of a class in object-oriented programming languages such as Java and C++. Attribute classes are strictly a mechanism for storing attribute information in a more compact form; they have no inheritance properties like those of true object-oriented classes.
    
    The **C** entry in a structure element dictionary (see [Table 323](#table323)) shall contain a class name or an array of class names (typically accompanied by revision numbers as well; see [14.7.5.3], “Attribute Revision Numbers”). For each class named in the C entry, the corresponding attribute object or objects shall be considered to be attached to the given structure element, along with those identified in the element’s **A** entry. If both the **A** and **C** entries are present and a given attribute is specified by both, the one specified by the **A** entry shall take precedence.

### 14.7.5.3 属性修订号

**14.7.5.3 Attribute Revision Numbers**

=== "中文"

    When a conforming product modifies a structure element or its contents, the change may affect the validity of attribute information attached to that structure element by other conforming products. A system of *revision numbers* shall allow conforming products to detect such changes and update their own attribute information accordingly, as described in this sub-clause.
    
    A structure element shall have a revision number, that shall be stored in the **R** entry in the structure element dictionary (see [Table 323](#table323)) or default to 0 if no **R** entry is present. Initially, the revision number shall be 0. When a conforming product modifies the structure element or any of its content items, it may signal the change by incrementing the revision number.
    
    !!! note "NOTE 1"
    
        The revision number is unrelated to the generation number associated with an indirect object (see [7.3.10], “Indirect Objects”).
    
    !!! note "NOTE 2"
    
        If their is no R entry and the revision number is to be incremented from the default value of 0 to 1, an R entry must be created in the structure element dictionary in order to record the 1.
    
    Each attribute object attached to a structure element shall have an associated revision number. The revision number shall be stored in the array that associates the attribute object with the structure element or if not stored in the array that associates the attribute object with the structure element shall default to 0.
    
    - Each attribute object in a structure element’s **A** array shall be represented by a single or a pair of array elements, the first or only element shall contain the attribute object itself and the second (when present) shall contain the integer revision number associated with it in this structure element.
    - The structure element’s **C** array shall contain a single or a pair of elements for each attribute class, the first or only shall contain the class name and the second (when present) shall contain the associated revision number.
    
    The revision numbers are optional in both the **A** and **C** arrays. An attribute object or class name that is not followed by an integer array element shall have a revision number of 0 and is represented by a single entry in the array.
    
    !!! note "NOTE 3"
    
        The revision number is not stored directly in the attribute object because a single attribute object may be associated with more than one structure element (whose revision numbers may differ). Since an attribute object reference is distinct from an integer, that distinction is used to determine whether the attribute object is represented in the array by a single or a pair of entries.
    
    !!! note "NOTE 4"
    
        When an attribute object is created or modified, its revision number is set to the current value of the structure element’s **R** entry. By comparing the attribute object’s revision number with that of the structure element, an application can determine whether the contents of the attribute object are still current or whether they have been outdated by more recent changes in the underlying structure element.
    
    Changes in an attribute object shall not change the revision number of the associated structure element, which shall change only when the structure element itself or any of its content items is modified.
    
    Occasionally, a conforming product may make extensive changes to a structure element that are likely to invalidate all previous attribute information associated with it. In this case, instead of incrementing the structure element’s revision number, the conforming product may choose to delete all unknown attribute objects from its **A** and **C** arrays. These two actions shall be mutually exclusive: the conforming product should either increment the structure element’s revision number or remove its attribute objects, but not both.
    
    !!! note "NOTE 5"
    
        Any conforming product creating attribute objects needs to be prepared for the possibility that they can be deleted at any time by another conforming product.

=== "英文"

    When a conforming product modifies a structure element or its contents, the change may affect the validity of attribute information attached to that structure element by other conforming products. A system of *revision numbers* shall allow conforming products to detect such changes and update their own attribute information accordingly, as described in this sub-clause.
    
    A structure element shall have a revision number, that shall be stored in the **R** entry in the structure element dictionary (see [Table 323](#table323)) or default to 0 if no **R** entry is present. Initially, the revision number shall be 0. When a conforming product modifies the structure element or any of its content items, it may signal the change by incrementing the revision number.
    
    !!! note "NOTE 1"
    
        The revision number is unrelated to the generation number associated with an indirect object (see [7.3.10], “Indirect Objects”).
    
    !!! note "NOTE 2"
    
        If their is no R entry and the revision number is to be incremented from the default value of 0 to 1, an R entry must be created in the structure element dictionary in order to record the 1.
    
    Each attribute object attached to a structure element shall have an associated revision number. The revision number shall be stored in the array that associates the attribute object with the structure element or if not stored in the array that associates the attribute object with the structure element shall default to 0.
    
    - Each attribute object in a structure element’s **A** array shall be represented by a single or a pair of array elements, the first or only element shall contain the attribute object itself and the second (when present) shall contain the integer revision number associated with it in this structure element.
    - The structure element’s **C** array shall contain a single or a pair of elements for each attribute class, the first or only shall contain the class name and the second (when present) shall contain the associated revision number.
    
    The revision numbers are optional in both the **A** and **C** arrays. An attribute object or class name that is not followed by an integer array element shall have a revision number of 0 and is represented by a single entry in the array.
    
    !!! note "NOTE 3"
    
        The revision number is not stored directly in the attribute object because a single attribute object may be associated with more than one structure element (whose revision numbers may differ). Since an attribute object reference is distinct from an integer, that distinction is used to determine whether the attribute object is represented in the array by a single or a pair of entries.
    
    !!! note "NOTE 4"
    
        When an attribute object is created or modified, its revision number is set to the current value of the structure element’s **R** entry. By comparing the attribute object’s revision number with that of the structure element, an application can determine whether the contents of the attribute object are still current or whether they have been outdated by more recent changes in the underlying structure element.
    
    Changes in an attribute object shall not change the revision number of the associated structure element, which shall change only when the structure element itself or any of its content items is modified.
    
    Occasionally, a conforming product may make extensive changes to a structure element that are likely to invalidate all previous attribute information associated with it. In this case, instead of incrementing the structure element’s revision number, the conforming product may choose to delete all unknown attribute objects from its **A** and **C** arrays. These two actions shall be mutually exclusive: the conforming product should either increment the structure element’s revision number or remove its attribute objects, but not both.
    
    !!! note "NOTE 5"
    
        Any conforming product creating attribute objects needs to be prepared for the possibility that they can be deleted at any time by another conforming product.

### 14.7.5.4 用户属性

**14.7.5.4 User Properties**

=== "中文"

    Most structure attributes (see [14.8.5], “Standard Structure Attributes”) specify information that is reflected in the element’s appearance; for example, BackgroundColor or BorderStyle.
    
    Some conforming writers, such as CAD applications, may use objects that have a standardized appearance, each of which contains non-graphical information that distinguishes the objects from one another. For example, several transistors might have the same appearance but different attributes such as type and part number.
    
    *User properties* (PDF 1.6) may be used to contain such information. Any graphical object that corresponds to a
    structure element may have associated user properties, specified by means of an attribute object dictionary
    that shall have a value of **UserProperties** for the **O** entry (see [Table 328](#table328)).
    
    <table id="table328" markdown="span">
        <caption>**Table 328 – Additional entries in an attribute object dictionary for user properties**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**O**</td> 
                <td>name</td>
                <td>
                    (Required) The attribute owner. Shall be **UserProperties**.
                </td>
            </tr>
            <tr>
                <td>**P**</td> 
                <td>array</td>
                <td>
                    (Required) An array of dictionaries, each of which represents a user property (see [Table 329](#table329)).
                </td>
            </tr>
        </tbody>
    </table>
    
    The **P** entry shall be an array specifying the user properties. Each element in the array shall be a *user property dictionary* representing an individual property (see [Table 329](#table329)). The order of the array elements shall specify attributes in order of importance.
    
    <table id="table329" markdown="span">
        <caption>**Table 329 – Entries in a user property dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**N**</td> 
                <td>text</td>
                <td>
                    (Required) The name of the user property.
                </td>
            </tr>
            <tr>
                <td>**V**</td> 
                <td>array</td>
                <td>
                    (Required) The value of the user property. <br/>
                    While the value of this entry shall be any type of PDF object, conforming writers should use only text string, number, and boolean values. Conforming readers should display text, number and boolean values to users but need not display values of other types; however, they should not treat other values as errors.
                </td>
            </tr>
            <tr>
                <td>**F**</td> 
                <td>text string</td>
                <td>
                    (Optional) A formatted representation of the value of V, that shall be used for special formatting; for example “($123.45)” for the number -123.45. If this entry is absent, conforming readers should use a default format.
                </td>
            </tr>
            <tr>
                <td>**H**</td> 
                <td>boolean</td>
                <td>
                    (Optional) If **true**, the attribute shall be hidden; that is, it shall not be shown in any user interface element that presents the attributes of an object. Default value: **false**.
                </td>
            </tr>
        </tbody>
    </table>
    
    PDF documents that contain user properties shall provide a **UserProperties** entry with a value of **true** in the document’s mark information dictionary (see [Table 321](#table321)). This entry allows conforming readers to quickly determine whether it is necessary to search the structure tree for elements containing user properties.
    
    !!! info "EXAMPLE"
    
        The following example shows a structure element containing user properties called Part Name, Part Number, Supplier, and Price.
    
        ```text
        100 0 obj
            << /Type /StructElem
                /S /Figure                                    % Structure type
                /P 50 0 R                                     % Parent in structure tree
                /A << /O /UserProperties                      % Attribute object
                      /P [                     % Array of user properties
                           << /N (Part Name) /V (Framostat) >>
                           << /N (Part Number) /V 11603 >>                     % Hidden attribute
                           << /N (Supplier) /V (Just Framostats) /H true >>    % Formatted value
                           << /N (Price) /V -37.99 /F ($37.99) >>
                         ]
                   >>
            >>
        endobj
        ```

=== "英文"

    Most structure attributes (see [14.8.5], “Standard Structure Attributes”) specify information that is reflected in the element’s appearance; for example, BackgroundColor or BorderStyle.
    
    Some conforming writers, such as CAD applications, may use objects that have a standardized appearance, each of which contains non-graphical information that distinguishes the objects from one another. For example, several transistors might have the same appearance but different attributes such as type and part number.
    
    *User properties* (PDF 1.6) may be used to contain such information. Any graphical object that corresponds to a
    structure element may have associated user properties, specified by means of an attribute object dictionary
    that shall have a value of **UserProperties** for the **O** entry (see [Table 328](#table328)).
    
    <table id="table328" markdown="span">
        <caption>**Table 328 – Additional entries in an attribute object dictionary for user properties**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**O**</td> 
                <td>name</td>
                <td>
                    (Required) The attribute owner. Shall be **UserProperties**.
                </td>
            </tr>
            <tr>
                <td>**P**</td> 
                <td>array</td>
                <td>
                    (Required) An array of dictionaries, each of which represents a user property (see [Table 329](#table329)).
                </td>
            </tr>
        </tbody>
    </table>
    
    The **P** entry shall be an array specifying the user properties. Each element in the array shall be a *user property dictionary* representing an individual property (see [Table 329](#table329)). The order of the array elements shall specify attributes in order of importance.
    
    <table id="table329" markdown="span">
        <caption>**Table 329 – Entries in a user property dictionary**</caption>
        <thead>
            <tr>
                <th>**Key**</th>
                <th>**Type**</th>
                <th>**Value**</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>**N**</td> 
                <td>text</td>
                <td>
                    (Required) The name of the user property.
                </td>
            </tr>
            <tr>
                <td>**V**</td> 
                <td>array</td>
                <td>
                    (Required) The value of the user property. <br/>
                    While the value of this entry shall be any type of PDF object, conforming writers should use only text string, number, and boolean values. Conforming readers should display text, number and boolean values to users but need not display values of other types; however, they should not treat other values as errors.
                </td>
            </tr>
            <tr>
                <td>**F**</td> 
                <td>text string</td>
                <td>
                    (Optional) A formatted representation of the value of V, that shall be used for special formatting; for example “($123.45)” for the number -123.45. If this entry is absent, conforming readers should use a default format.
                </td>
            </tr>
            <tr>
                <td>**H**</td> 
                <td>boolean</td>
                <td>
                    (Optional) If **true**, the attribute shall be hidden; that is, it shall not be shown in any user interface element that presents the attributes of an object. Default value: **false**.
                </td>
            </tr>
        </tbody>
    </table>
    
    PDF documents that contain user properties shall provide a **UserProperties** entry with a value of **true** in the document’s mark information dictionary (see [Table 321](#table321)). This entry allows conforming readers to quickly determine whether it is necessary to search the structure tree for elements containing user properties.
    
    !!! info "EXAMPLE"
    
        The following example shows a structure element containing user properties called Part Name, Part Number, Supplier, and Price.
    
        ```text
        100 0 obj
            << /Type /StructElem
                /S /Figure                                    % Structure type
                /P 50 0 R                                     % Parent in structure tree
                /A << /O /UserProperties                      % Attribute object
                      /P [                     % Array of user properties
                           << /N (Part Name) /V (Framostat) >>
                           << /N (Part Number) /V 11603 >>                     % Hidden attribute
                           << /N (Supplier) /V (Just Framostats) /H true >>    % Formatted value
                           << /N (Price) /V -37.99 /F ($37.99) >>
                         ]
                   >>
            >>
        endobj
        ```

## 14.7.6 逻辑结构示例

**14.7.6 Example of Logical Structure**

=== "中文"

    The next Example shows portions of a PDF file with a simple document structure. The structure tree root (object 300) contains elements with structure types **Chap** (object 301) and **Para** (object 304). The **Chap** element, titled Chapter 1, contains elements with types **Head1** (object 302) and **Para** (object 303).
    
    These elements are mapped to the standard structure types specified in Tagged PDF (see [14.8.4], “Standard Structure Types”) by means of the role map specified in the structure tree root. Objects 302 through 304 have attached attributes (see [14.7.5], “Structure Attributes,” and [14.8.5], “Standard Structure Attributes”).
    
    The example also illustrates the structure of a parent tree (object 400) that maps content items back to their parent structure elements and an ID tree (object 403) that maps element identifiers to the structure elements they denote.

=== "英文"

    The next Example shows portions of a PDF file with a simple document structure. The structure tree root (object 300) contains elements with structure types **Chap** (object 301) and **Para** (object 304). The **Chap** element, titled Chapter 1, contains elements with types **Head1** (object 302) and **Para** (object 303).
    
    These elements are mapped to the standard structure types specified in Tagged PDF (see [14.8.4], “Standard Structure Types”) by means of the role map specified in the structure tree root. Objects 302 through 304 have attached attributes (see [14.7.5], “Structure Attributes,” and [14.8.5], “Standard Structure Attributes”).
    
    The example also illustrates the structure of a parent tree (object 400) that maps content items back to their parent structure elements and an ID tree (object 403) that maps element identifiers to the structure elements they denote.
    
!!! info "EXAMPLE"

    ```text
    1 0 obj                              % Document catalog
        << /Type /Catalog
            /Pages 100 0 R                % Page tree
            /StructTreeRoot 300 0 R       % Structure tree root
        >>
    endobj
    
    100 0 obj                            % Page tree
        << /Type /Pages
            /Kids [ 101 1 R              % First page object
                    102 0 R              % Second page object
                    ]
            /Count 2                     % Page count
        >>
    endobj
    
    101 1 obj                            % First page object
        << /Type /Page
            /Parent 100 0 R                      % Parent is the page tree
            /Resources << /Font << /F1 6 0 R     % Font resources
                                    /F12 7 0 R
                                >>
                            /ProcSet [ /PDF /Text ]              % Procedure sets
                        >>
            /MediaBox [ 0 0 612 792 ]            % Media box
            /Contents 201 0 R                    % Content stream
            /StructParents 0                     % Parent tree key
        >>
    endobj
    
    201 0 obj                             % Content stream for first page
        << /Length … >>
    stream
        1 1 1 rg
        0 0 612 792 re f
        BT                                   % Start of text object
    
        /Head1 << /MCID 0 >>                 % Start of marked-content sequence 0
            BDC
                0 0 0 rg
                /F1 1 Tf
                30 0 0 30 18 732 Tm
                ( This is a first level heading . Hello world : ) Tj
                1.1333 TL
                T*
                ( goodbye universe . ) Tj
            EMC                                % End of marked-content sequence 0
        
        /Para << /MCID 1 >>                    % Start of marked-content sequence 1
            BDC
                /F12 1 Tf
                14 0 0 14 18 660.8 Tm
                ( This is the first paragraph, which spans pages . It has four fairly short and \
    concise sentences . This is the next to last ) Tj
            EMC                                % End of marked-content sequence 1
        ET
    endstream
    endobj
    
    202 0 obj                                 % Content stream for second page
        << /Length … >>
    stream
        1 1 1 rg
        0 0 612 792 re f
        BT                                    % Start of text object
        
            /Para << /MCID 0 >>               % Start of marked-content sequence 0
                BDC
                    0 0 0 rg
                    /F12 1 Tf
                    14 0 0 14 18 732 Tm
                    ( sentence . This is the very last sentence of the first paragraph . ) Tj
                EMC                           % End of marked-content sequence 0
        
        /Para << /MCID 1 >>                   % Start of marked-content sequence 1
            BDC
                /F12 1 Tf
                14 0 0 14 18 570.8 Tm
                ( This is the second paragraph . It has four fairly short and concise sentences . \ This is the next
    to last ) Tj
            EMC                                % End of marked-content sequence 1
        
        /Para << /MCID 2 >>                    % Start of marked-content sequence 2
            BDC
                1.1429 TL
                T*
                ( sentence . This is the very last sentence of the second paragraph . ) Tj
            EMC                                % End of marked-content sequence 2
        
        ET                                     % End of text object
    endstream
    endobj
    
    300 0 obj                                    % Structure tree root
        << /Type /StructTreeRoot
            /K [ 301 0 R                             % Two children: a chapter
                304 0 R                             % and a paragraph
                ]
            /RoleMap  << /Chap /Sect                % Mapping to standard structure types
                        /Head1 /H
                        /Para /P
                        >>
            /ClassMap   << /Normal 305 0 R >>        % Class map containing one attribute class
            
            /ParentTree 400 0 R                      % Number tree for parent elements
            /ParentTreeNextKey 2                     % Next key to use in parent tree
            /IDTree 403 0 R                          % Name tree for element identifiers
        >>
    endobj
    
    301 0 obj                                    % Structure element for a chapter
        << /Type /StructElem
            /S /Chap
            /ID ( Chap1 )                          % Element identifier
            /T ( Chapter 1 )                       % Human-readable title
            /P 300 0 R                             % Parent is the structure tree root
            /K [ 302 0 R                           % Two children: a section head
                303 0 R                           % and a paragraph
                ]
        >>
    endobj
    
    302 0 obj                                    % Structure element for a section head
        << /Type /StructElem
            /S /Head1
            /ID ( Sec1.1 )                         % Element identifier
            /T ( Section 1.1 )                     % Human-readable title
            /P 301 0 R                             % Parent is the chapter
            /Pg 101 1 R                            % Page containing content items
            /A << /O /Layout                       % Attribute owned by Layout
                    /SpaceAfter 25
                    /SpaceBefore 0
                    /TextIndent 12.5
                >>
            /K 0                                   % Marked-content sequence 0
        >>
    endobj
    
    303 0 obj                                    % Structure element for a paragraph
        << /Type /StructElem
            /S /Para
            /ID ( Para1 )                         % Element identifier
            /P 301 0 R                            % Parent is the chapter
            /Pg 101 1 R                           % Page containing first content item
            /C /Normal                            % Class containing this element’s attributes
            /K [ 1                                % Marked-content sequence 1
                    << /Type /MCR                 % Marked-content reference to 2nd item
                        /Pg 102 0 R                % Page containing second item
                        /MCID 0                    % Marked-content sequence 0
                    >>                         
                ]                         
        >>
    endobj
    
    304 0 obj                                    % Structure element for another paragraph
        << /Type /StructElem
            /S /Para
            /ID ( Para2 )                         % Element identifier
            /P 300 0 R                            % Parent is the structure tree root
            /Pg 102 0 R                           % Page containing content items
            /C /Normal                            % Class containing this element’s attributes
            /A << /O /Layout
                    /TextAlign /Justify             % Overrides attribute provided by classmap
                >>
            /K [ 1 2 ]                            % Marked-content sequences 1 and 2
        >>
    endobj
    
    305 0 obj                                 % Attribute class
        << /O /Layout                            % Owned by Layout
            /EndIndent 0
            /StartIndent 0
            /WritingMode /LrTb
            /TextAlign /Start
        >>
    endobj
    
    400 0 obj                            % Parent tree
        << /Nums [
                    0 401 0 R               % Parent elements for first page
                    1 402 0 R               % Parent elements for second page
                    ]
        >>
    endobj
    
    401 0 obj                          % Array of parent elements for first page
        [ 302 0 R                         % Parent of marked-content sequence 0
            303 0 R                         % Parent of marked-content sequence 1
        ]
    endobj
    
    402 0 obj                          % Array of parent elements for second page
        [ 303 0 R                        % Parent of marked-content sequence 0
            304 0 R                        % Parent of marked-content sequence 1
            304 0 R                        % Parent of marked-content sequence 2
        ]
    endobj
    
    403 0 obj                            % ID tree root node
        << /Kids [ 404 0 R ] >>             % Reference to leaf node
    endobj
    
    404 0 obj                            % ID tree leaf node
        << /Limits [ ( Chap1 ) ( Sec1.3 ) ]       % Least and greatest keys in tree
            /Names  [ ( Chap1 ) 301 0 R             % Mapping from element identifiers
                        ( Sec1.1 ) 302 0 R                        % to structure elements
                        ( Sec1.2 ) 303 0 R
                        ( Sec1.3 ) 304 0 R
                    ]
        >>
    endobj
    ```

[8.10]: ../c8/s10.md
[14.6]: ../c14/s6.md
[14.8]: ../c14/s8.md

[7.3.10]: ../c7/s3.md#7310-间接对象
[7.7.2]: ../c7/s7.md#772-文档目录
[7.9.7]: ../c7/s9.md#797-number树
[12.5.5]: ../c12/s5.md#1255-外观流
[14.6.2]: ../c14/s6.md#1462-属性列表
[14.7.3]: ../c14/s7.md#1473-结构类型
[14.7.4]: ../c14/s7.md#1474-结构内容
[14.7.5]: ../c14/s7.md#1475-结构属性
[14.8.4]: ../c14/s8.md#1484-标准结构类型
[14.8.5]: ../c14/s8.md#1485-标准结构属性
[14.9.2]: ../c14/s9.md#1492-自然语言规范
[14.9.3]: ../c14/s9.md#1493-替代描述
[14.9.4]: ../c14/s9.md#1494-替换文本

[14.7.5.3]: ../c14/s7.md#14753-属性修订号
[14.7.5.4]: ../c14/s7.md#14754-用户属性
[14.7.4.2]: ../c14/s7.md#14742-标记内容序列作为内容项
[14.7.4.3]: ../c14/s7.md#14743-pdf对象作为内容项
[14.7.4.4]: ../c14/s7.md#14744-从内容项中查找结构元素
[14.7.5.4]: ../c14/s7.md#14754-用户属性
[14.8.2.3]: ../c14/s8.md#14823-页面内容顺序
